<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="google-site-verification"
    content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"
  />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <meta name="description" content="notes about the coding life" />
  <meta name="keywords" content="ç‰›å“‡å‹‡, åšå®¢, äº’è”ç½‘, Web, JavaScript, å‰ç«¯, è®¾è®¡" />
  <meta name="theme-color" content="#000000" />

  <!-- Open Graph -->
  <meta
    property="og:title"
    content="å¿ƒä¸­æ— è·¯ç”±ï¼Œå¤„å¤„çš†è‡ªç”±/react-router v4 åŠ¨æ€è·¯ç”± - ç‰›ã•ã‚“ã®éƒ¨è½æ ¼|åˆ˜å“‡å‹‡çš„éƒ¨è½æ ¼"
  />
  
  <meta property="og:type" content="article" />
  <meta
    property="og:description"
    content="å¿ƒä¸­æ— è·¯ç”±ï¼Œå¤„å¤„çš†è‡ªç”±/react-router v4 åŠ¨æ€è·¯ç”±

react-router v4 çš„åˆ°æ¥å·²ç»è¿‡äº†ä¸€äº›æ—¶æ—¥äº†ï¼Œæ³¨æ„åˆ°å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ç¯‡ä»‹ç»å…¶æ–°å¼è®¾è®¡å“²å­¦çš„æ–‡ç« ã€‚å…¶ä¸­åŒºåˆ†äº†ä¼ ç»Ÿé™æ€è·¯ç”±ï¼ˆStatic Routingï¼‰å’Œæ–°ç‰ˆä¸­å¼•å…¥çš„åŠ¨æ€è·¯ç”±ï¼ˆDynamic Routingï¼‰ã€‚

åŠ¨æ€è·¯ç”±ä¹ˆï¼ŒInterestingï¼ˆå‘µå‘µï¼‰ã€‚ å¬èµ·æ¥å¹¶ä¸æ˜¯å¾ˆæ–°é²œï¼Œä½†å…¶å®æƒ³å½“ç„¶äº†ã€‚è¿™é‡Œé¢å­˜åœ¨ä¸€ä¸ªç†è§£è¯¯åŒºã€‚..."
  />
   <meta property="article:published_time" content="2018-02-05T18:02:00Z">   
  <meta property="article:tag" content="javascript" />
  
  <meta property="article:tag" content="react" />
   
  <meta property="og:image" content="http://0.0.0.0:4000" />
  <meta property="og:url" content="http://0.0.0.0:4000/2018/02/05/%E5%BF%83%E4%B8%AD%E6%97%A0%E8%B7%AF%E7%94%B1-%E5%A4%84%E5%A4%84%E7%9A%86%E8%87%AA%E7%94%B1-react-router-v4-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/" />
  <meta property="og:site_name" content="ç‰›ã•ã‚“ã®éƒ¨è½æ ¼|åˆ˜å“‡å‹‡çš„éƒ¨è½æ ¼" />

  <title>
    å¿ƒä¸­æ— è·¯ç”±ï¼Œå¤„å¤„çš†è‡ªç”±/react-router v4 åŠ¨æ€è·¯ç”± - ç‰›ã•ã‚“ã®éƒ¨è½æ ¼|åˆ˜å“‡å‹‡çš„éƒ¨è½æ ¼
  </title>

  <!-- Favicon -->
  <link rel="shortcut icon" href="/favicon.ico" />

  <!-- Canonical URL -->
  <link
    rel="canonical"
    href="http://0.0.0.0:4000/2018/02/05/%E5%BF%83%E4%B8%AD%E6%97%A0%E8%B7%AF%E7%94%B1-%E5%A4%84%E5%A4%84%E7%9A%86%E8%87%AA%E7%94%B1-react-router-v4-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/"
  />

  <!-- Bootstrap Core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/blog.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- ga & ba script hoook -->
  <script></script>
</head>


  <!-- hack iOS CSS :active style -->
  <body ontouchstart="">
    <!-- Navigation -->

  <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle">
          <span class="sr-only">âŒ</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div id="huxblog_navbar">
        <div class="navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="/">ä¸»é¡µ</a>
            </li>
               
            <li>
              <a href="/about/"
                >å…³äº</a
              >
            </li>
              
            <li>
              <a href="/archive"
                >Archive</a
              >
            </li>
                                                                   
          </ul>
        </div>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
  </nav>

  <script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body = document.body;
    var $toggle = document.querySelector(".navbar-toggle");
    var $navbar = document.querySelector("#huxblog_navbar");
    var $collapse = document.querySelector(".navbar-collapse");

    var __HuxNav__ = {
      close: function () {
        $navbar.className = " ";
        // wait until animation end.
        setTimeout(function () {
          // prevent frequently toggle
          if ($navbar.className.indexOf("in") < 0) {
            $collapse.style.height = "0px";
          }
        }, 400);
      },
      open: function () {
        $collapse.style.height = "auto";
        $navbar.className += " in";
      },
    };

    // Bind Event
    $toggle.addEventListener("click", function (e) {
      if ($navbar.className.indexOf("in") > 0) {
        __HuxNav__.close();
      } else {
        __HuxNav__.open();
      }
    });

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from
     * $toggle/$collapse will break global delegation.
     *
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener("click", function (e) {
      if (e.target == $toggle) return;
      if (e.target.className == "icon-bar") return;
      __HuxNav__.close();
    });
  </script>
</nav>
 <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background: ;
    }

    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=javascript" title="javascript">javascript</a>
                        
                        <a class="tag" href="/archive/?tag=react" title="react">react</a>
                        
                    </div>
                    <h1>å¿ƒä¸­æ— è·¯ç”±ï¼Œå¤„å¤„çš†è‡ªç”±/react-router v4 åŠ¨æ€è·¯ç”±</h1>
                    
                    <h2 class="subheading"></h2>
                    <span class="meta">February 5, 2018</span>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"
      >
        <!-- Multi-Lingual -->
         <h2 id="å¿ƒä¸­æ— è·¯ç”±å¤„å¤„çš†è‡ªç”±react-router-v4-åŠ¨æ€è·¯ç”±">å¿ƒä¸­æ— è·¯ç”±ï¼Œå¤„å¤„çš†è‡ªç”±/react-router v4 åŠ¨æ€è·¯ç”±</h2>

<p>react-router v4 çš„åˆ°æ¥å·²ç»è¿‡äº†ä¸€äº›æ—¶æ—¥äº†ï¼Œæ³¨æ„åˆ°å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ç¯‡ä»‹ç»å…¶æ–°å¼è®¾è®¡å“²å­¦çš„<a href="https://reacttraining.com/react-router/web/guides/philosophy">æ–‡ç« </a>ã€‚å…¶ä¸­åŒºåˆ†äº†ä¼ ç»Ÿé™æ€è·¯ç”±ï¼ˆStatic Routingï¼‰å’Œæ–°ç‰ˆä¸­å¼•å…¥çš„åŠ¨æ€è·¯ç”±ï¼ˆDynamic Routingï¼‰ã€‚</p>

<p>åŠ¨æ€è·¯ç”±ä¹ˆï¼ŒInterestingï¼ˆå‘µå‘µï¼‰ã€‚ å¬èµ·æ¥å¹¶ä¸æ˜¯å¾ˆæ–°é²œï¼Œä½†å…¶å®æƒ³å½“ç„¶äº†ã€‚è¿™é‡Œé¢å­˜åœ¨ä¸€ä¸ªç†è§£è¯¯åŒºã€‚éœ€è¦æ³¨æ„è¿™é‡Œå®šä¹‰çš„ <code class="language-plaintext highlighter-rouge">Dynamic Routing</code>ï¼Œä»–ä¸æ˜¯æŒ‡åˆå§‹åŒ–è·¯ç”±çš„æ—¶å€™å¯ä»¥åŠ ç‚¹ä¸šåŠ¡é€»è¾‘å»åŠ¨æ€ç”Ÿæˆè·¯ç”±é…ç½®ï¼Œä¹Ÿä¸æ˜¯æŒ‡é€šè¿‡è·¯ç”±å‚æ•°ï¼ˆqueryï¼‰å¯ä»¥åŠ¨æ€æ§åˆ¶é¡µé¢çš„è¾“å‡ºã€‚å®ƒæŠ›å¼€äº†ä¼ ç»Ÿé™æ€è·¯ç”±åœ¨ç¨‹åºæ¸²æŸ“å‰å®šä¹‰å¥½çš„åšæ³•ï¼Œé‡‡ç”¨ç¨‹åºåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­åŠ¨æ€ç”Ÿæˆçš„æ–¹å¼ã€‚</p>

<h3 id="é™æ€è·¯ç”±static-routing">é™æ€è·¯ç”±/Static Routing</h3>

<p>å…ˆæ¥çœ‹æˆ‘ä»¬ç†Ÿæ‚‰å¹¶æƒ¯ç”¨çš„ä¼ ç»Ÿé™æ€è·¯ç”±ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">React</span><span class="p">.</span><span class="nx">render</span><span class="p">((</span>
  <span class="o">&lt;</span><span class="nx">Router</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">App</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">about</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">About</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">inbox</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Inbox</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/Router</span><span class="err">&gt;
</span><span class="p">),</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span>
</code></pre></div></div>

<p>è¿™é‡Œè·¯ç”±è¿›è¡Œé›†ä¸­é…ç½®ï¼ŒUI ä¸è·¯ç”±å¼ºç»‘å®šã€‚</p>

<p>ä¼ ç»Ÿé™æ€è·¯ç”±æ˜¯åœ¨é¡µé¢æ¸²æŸ“å‰å£°æ˜é…ç½®å¥½çš„ã€‚åƒ Angularï¼ŒExpress, Emberï¼Œéƒ½æ˜¯è¿™ç§æ–¹å¼ï¼Œå¦‚æœä½¿ç”¨è¿‡å…¶ä¸­æŸä¸ªæ¡†æ¶ï¼Œä¸€å®šä¸ä¼šé™Œç”Ÿã€‚react-router v4 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯æ²¿è¢­è¿™ä¸€æ–¹å¼çš„ã€‚</p>

<h3 id="é™æ€è·¯ç”±çš„é—®é¢˜">é™æ€è·¯ç”±çš„é—®é¢˜</h3>

<p>v4 ç‰ˆæœ¬å°†æ•´ä¸ªåº“è¿›è¡Œé‡æ„ï¼Œå¹¶ä¸æ˜¯æ‹è„‘è¢‹å†³å®šçš„ã€‚æŒ‰ç…§<a href="https://reacttraining.com/react-router/core/guides/philosophy/backstory">å®˜æ–¹æ–‡æ¡£ä¸Šçš„è®°è½½</a>ï¼ŒMichael å’Œ Ryan ï¼ˆåº“çš„æ ¸å¿ƒä½œè€…ï¼‰æ„Ÿè§‰ç°æœ‰çš„å®ç°ä¸¥é‡åœ°å— React API çš„åˆ¶çº¦ï¼Œå¹¶ä¸”å®ç°æ–¹å¼ä¹Ÿä¸å¤Ÿä¼˜é›…ï¼ˆåé¢ä¼šè®²ï¼‰ã€‚åæ­£å°±æ˜¯å†™èµ·æ¥ç”¨èµ·æ¥éƒ½ä¸çˆ½ã€‚</p>

<p>é‚£å¤©ä»–ä¿©å‚åŠ ä¸€ä¸ªå·¥ä½œåŠï¼ˆWorkshopï¼Œé‚£ç§æŠ€æœ¯äººå‘˜çš„çº¿ä¸‹äº¤æµä¼šï¼ŒåŒºåˆ«äºå…¨çƒåŒæ€§æŠ€æœ¯ç¤¾åŒº Github çš„çº¿ä¸Š issue äº’åŠ¨ï¼‰ï¼Œèµ°åœ¨å¤§å…çš„è·¯ä¸Šä¾¿èŠåˆ°äº†æ¥ä¸‹æ¥å¦‚ä½•é‡æ„çš„äº‹ã€‚</p>

<p>ç¼˜ï¼Œå¦™ä¸å¯è¨€ã€‚</p>

<p>ä¸¤äººå¿ƒç…§ä¸å®£åœ°æƒ³åˆ°äº†ä¸€å—ï¼Œéƒ½ä»è¿™æ¬¡å·¥ä½œåŠçš„åˆ†äº«å†…å®¹ä¸­è·å¾—äº†çµæ„Ÿï¼Œå³ v4 ä¸­å¼•å…¥çš„åŠ¨æ€è·¯ç”±ã€‚</p>

<p>æ‰€ä»¥è¿™æ¬¡é‡æ„æ˜¯çº¿ä¸‹ç¢°æ’å‡ºæ¥çš„ç«èŠ±ã€‚</p>

<p>é‚£ä¹ˆï¼Œä¹‹å‰çš„é™æ€è·¯ç”±ï¼Œåˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜ã€‚æœ¬æ¥ç”¨å¾—å¥½å¥½çš„ï¼Œåˆ°è¿™é‡Œï¼Œä¸å…å¿ƒç”Ÿç–‘æƒ‘ã€‚è¯šç„¶ï¼Œè¦è¯´é—®é¢˜ï¼ˆGotchasï¼‰ï¼Œé‚£è‚¯å®šæ˜¯æœ‰çš„ã€‚æ²¡æœ‰å®Œç¾çš„åº“è§£å†³æ‰€æœ‰äººçš„é—®é¢˜ï¼Œä¸ç„¶ä½ ä»¥ä¸ºè¿™ 4000+ çš„ issue æ•°æ€ä¹ˆæ¥çš„ã€‚</p>

<p><img src="https://raw.githubusercontent.com/wayou/wayou.github.io/master/posts/react-router-dynamic-routing/assets/react-router-issue-count.png" alt="react-router issues count" />
<em>react-router issue åˆ—è¡¨ï¼ˆå’¦~å¥½åƒæœ‰ F Word ä¹±å…¥~~ï¼‰</em></p>

<p>Issue å¤šå€’ä¸ä¸€å®šéƒ½æ˜¯åº“çš„é—®é¢˜ã€‚å…¶ä¸­ä¸ä¹ä½¿ç”¨å§¿åŠ¿ä¸å¯¹é€ æˆçš„é—®é¢˜ï¼Œè­¬å¦‚å¾ªç¯è·¯ç”±å†…å­˜æº¢å‡ºï¼›è¿˜æœ‰çš„æ˜¯ Feature reuqestã€‚æ€»ä¹‹ï¼Œissue æ•°é‡ä¹Ÿä½“ç°äº† react-router å—ä¼—ä¹‹å¤§ï¼Œç¤¾åŒºå½±å“åŠ›ä¸å¯å°è§‘ã€‚æ‰€ä»¥å¦‚ä½•æŠŠåº“åšå¾—æ›´å¥½æ›´å¼ºï¼Œå‹åŠ›å±±å¤§ã€‚</p>

<p>è¯é¢˜å›åˆ°é™æ€è·¯ç”±ä¸Šæ¥ã€‚åŸºäºé™æ€é…ç½®çš„æ–¹å¼ï¼Œè®©ç‰ˆæœ¬æ¥åˆ° v3 çš„ react-routerï¼Œéš¾ä»¥ä¸ºç»§æ›´åŠ å¤æ‚çš„åŠŸèƒ½ï¼Œè€Œæˆ‘ä»¬ä»è¯¥åº“èº«ä¸ŠæœŸæœ›çš„è¿˜æœ‰å¾ˆå¤šã€‚å‰é¢ issue ä¸­ï¼Œåªæ˜¯ç”¨æˆ·çš„é—®é¢˜ï¼Œä½œä¸ºåº“çš„å¼€å‘ç»´æŠ¤è€…ï¼Œæ‰€è€ƒè™‘çš„æ˜¯åŠŸèƒ½å®ç°åŠç¨‹åºæ‰©å±•æ€§çš„é—®é¢˜ã€‚å¦‚æœä¸æ˜¯æ ¸å¿ƒè´¡çŒ®è€…ï¼Œæƒ³å¿…å¾ˆéš¾ä½“å‘³å…¶ä¸­çš„éŸµå‘³ã€‚æ‰€ä»¥åœ¨ <code class="language-plaintext highlighter-rouge">v4.0.0-beta</code> è¿™ä¸ªå¼€å‘åˆ†æ”¯çš„ <a href="https://github.com/ReactTraining/react-router/blob/v4.0.0-beta.8/README.md">README</a> ä¸­ï¼Œreact-router å›¢é˜Ÿå¯¹é¢ä¸´çš„æŒ‘æˆ˜å’Œå­˜åœ¨çš„é—®é¢˜è¿›è¡Œäº†ç®€è¦é˜è¿°ï¼Œé¡ºä¾¿ç­”ä¸€äº›ç–‘è§£ä¸€äº›æƒ‘ï¼ˆFAQ ç§€ä¸€æ³¢ï¼‰ã€‚</p>

<p>å…¶ä¸­<a href="https://github.com/ReactTraining/react-router/tree/v4.0.0-beta.8#why-a-major-version-bump">Why a major version bump?</a>è¿™ä¸€æ®µä¾¿è¯´å‡ºäº†ç°åœ¨çš„ä¸€äº›ç—›ç‚¹ã€‚</p>

<ul>
  <li>è·¯ç”±å†™æ³•åˆ™éœ€è¦æ»¡è¶³çº¦å®šçš„æ ¼å¼ï¼Œä½ ç”šè‡³éƒ½ä¸èƒ½å°† <code class="language-plaintext highlighter-rouge">&lt;Route&gt;</code> è„±ç¦» <code class="language-plaintext highlighter-rouge">&lt;Router&gt;</code> åœ¨ç»„ä»¶ä¸­ä»»æ„ç»„åˆã€‚å¦ç™½åœ°è¯´ï¼Œè¿™ä¸€ç‚¹ä¹Ÿä¸ Reactã€‚React ç†å¿µæ˜¯å¯ä»¥<strong>å£°æ˜å¼çµæ´»æ€§è¿›è¡Œç»„ä»¶ç»„è£…</strong>çš„ï¼ˆ<strong>Declarative Composability</strong>ï¼‰ã€‚</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// NOPE!</span>
<span class="kd">const</span> <span class="nx">CoolRoute</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">Route</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="nx">cool</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span></code></pre></div></div>

<ul>
  <li>å› ä¸ºå…¶å® <code class="language-plaintext highlighter-rouge">&lt;Router /&gt;</code> æ¥ç®¡äº†ä½ çš„ç»„ä»¶ï¼Œå†…éƒ¨å®ƒå®ç°äº† <code class="language-plaintext highlighter-rouge">createElement</code>ï¼Œ<code class="language-plaintext highlighter-rouge">render</code> å’Œ <code class="language-plaintext highlighter-rouge">createRouterMiddleware</code> ç­‰æ–¹æ³•ã€‚åŒæ—¶ï¼Œä¹Ÿéœ€è¦æä¾›ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œ<code class="language-plaintext highlighter-rouge">onEnter</code>ï¼Œ<code class="language-plaintext highlighter-rouge">onLeave</code> åŠ <code class="language-plaintext highlighter-rouge">onChange</code>ï¼Œè€Œè¿™äº›ç”Ÿå‘½å‘¨æœŸ React æœ¬èº«å°±æœ‰ï¼š<code class="language-plaintext highlighter-rouge">componentWillMount</code>, <code class="language-plaintext highlighter-rouge">componentWillReceiveProps</code> åŠ <code class="language-plaintext highlighter-rouge">componentWillUnmount</code>ã€‚</li>
</ul>

<p><em><a href="https://github.com/ReactTraining/react-router/blob/v3/modules/Router.js">v3 Router.js</a></em></p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">history</span><span class="p">:</span> <span class="nx">object</span><span class="p">,</span>
  <span class="na">children</span><span class="p">:</span> <span class="nx">routes</span><span class="p">,</span>
  <span class="nx">routes</span><span class="p">,</span> <span class="c1">// alias for children</span>
  <span class="na">render</span><span class="p">:</span> <span class="nx">func</span><span class="p">,</span>
  <span class="na">createElement</span><span class="p">:</span> <span class="nx">func</span><span class="p">,</span>
  <span class="na">onError</span><span class="p">:</span> <span class="nx">func</span><span class="p">,</span>
  <span class="na">onUpdate</span><span class="p">:</span> <span class="nx">func</span><span class="p">,</span>

  <span class="c1">// PRIVATE: For client-side rehydration of server match.</span>
  <span class="na">matchContext</span><span class="p">:</span> <span class="nx">object</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>é…ç½®è·¯ç”±çš„è¿‡ç¨‹ä¹Ÿæ˜¯ç¨‹åºç»“æ„é‡ç°çš„è¿‡ç¨‹ï¼Œä¸€çº§ä¸€çº§çš„åµŒå¥—ï¼Œå’Œç»„ä»¶åœ¨ç•Œé¢ä¸­çš„è§†å›¾å¤§è‡´å¯¹åº”ã€‚ä½†å…¶å®æˆ‘ä»¬åœ¨å†™é¡µé¢è¿‡ç¨‹ä¸­ï¼Œå †ç§¯ç»„ä»¶æ—¶ï¼Œå°±å·²ç»ä½“ç°å‡ºç¨‹åºçš„ç»“æ„å±‚çº§äº†ã€‚</li>
  <li>ä¸ºäº†é€‚åº”ä»£ç æ‹†åˆ†ï¼ˆcode splitï¼‰ï¼Œå¼•å…¥äº† <code class="language-plaintext highlighter-rouge">getComponent</code> å’Œ <code class="language-plaintext highlighter-rouge">getChildRoutes</code>ã€‚ä¸ºäº†æ”¯æŒçƒ­æ›¿æ¢ï¼ˆhot module replacementï¼‰ï¼Œåˆå¾—æ•´ä¸€å †å¾ˆ hack çš„ä¸œè¥¿å‡ºæ¥ã€‚</li>
  <li>â€¦</li>
</ul>

<p>æ‰€ä»¥ä¹‹å‰åº”è¯¥æ˜¯æ–¹å‘ä¸Šå‡ºäº†ç‚¹åå·®ã€‚è¦æ˜¯æ¥ä¸‹æ¥çš„ v4 ç‰ˆæœ¬æ²¡èƒ½è§£å†³è¿™äº›é—®é¢˜ï¼Œæ˜¯è¦è´Ÿè´£ä»»çš„ï¼ˆæˆ‘æŒ‡çš„æ˜¯å¯¹ç¤¾åŒºï¼‰ã€‚</p>

<h3 id="åŠ¨æ€è·¯ç”±dynamic-routing">åŠ¨æ€è·¯ç”±/Dynamic Routing</h3>

<p>æ‰€ä»¥åœ¨ v4 ç‰ˆæœ¬ä¸­ï¼Œè®©æˆ‘ä»¬æŠ›å¼ƒä¼ ç»Ÿçš„è·¯ç”±æ¦‚å¿µï¼Œåšåˆ°å¿ƒä¸­æ— è·¯ç”±ï¼Œçœ‹å±±è¿˜æ˜¯å±±ï¼Œå§ã€‚</p>

<p>æ€ä¹ˆè®²ï¼Ÿå°±æ˜¯ä¸å­˜åœ¨è·¯ç”±çš„æ¦‚å¿µäº†ï¼Œå½“ç„¶ä¹Ÿå°±æ— éœ€è·¯ç”±é…ç½®äº†ã€‚</p>

<p>é‚£æˆ‘ä»¬è¿˜æ€ä¹ˆåˆ‡é¡µé¢ï¼Ÿ</p>

<p>é€šè¿‡æ§åˆ¶ç»„ä»¶çš„æ¸²æŸ“ï¼Œæ¥åˆ‡é¡µé¢ã€‚</p>

<p>react-router v4 ä¸­ï¼Œè¯·æŠŠè·¯ç”±çœ‹æˆæ™®é€šçš„ React ç»„ä»¶ï¼Œä¼ é€’ <code class="language-plaintext highlighter-rouge">props</code> æ¥æ­£å¸¸ä½¿ç”¨ï¼ˆä¹‹å‰<code class="language-plaintext highlighter-rouge">&lt;Route&gt;</code>ä¼šå¿½ç•¥æ‰è¿™äº›å±æ€§ï¼‰ï¼Œå€ŸåŠ©å®ƒæ¥æ§åˆ¶ç»„ä»¶çš„å±•ç°ã€‚å±•ç¤ºçš„é€»è¾‘åŠæƒåˆ©å›å½’åˆ°äº†ç»„ä»¶æœ¬èº«ï¼Œå›å½’åˆ°äº†ç†Ÿæ‚‰çš„ Reactã€‚è¿™æ ·ï¼Œæ²¡æœ‰äº†é™æ€é…ç½®çš„è·¯ç”±è§„åˆ™ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ç¨‹åºåœ¨è¿è¡Œæ¸²æŸ“è¿‡ç¨‹ä¸­åŠ¨æ€æ§åˆ¶çš„å±•ç°ã€‚</p>

<p>è¿™ä¾¿æ˜¯ v4 ä¸­ç§°ä¹‹ä¸ºçš„åŠ¨æ€è·¯ç”±ã€‚</p>

<p>å½“è·¯ç”± <code class="language-plaintext highlighter-rouge">&lt;Route&gt;</code> å›å½’ç»„ä»¶åï¼Œreact-router æä¾›çš„é‚£äº› APIï¼Œåƒä¸Šé¢è®¨è®ºçš„é‚£äº›ï¼Œå°±ä¸å¤å­˜åœ¨äº†ï¼Œå› ä¸ºå®ƒæ˜¯æ™®é€šçš„ React ç»„ä»¶ï¼Œå®ƒçš„ API å°±æ˜¯ React æä¾›çš„é‚£äº› APIã€‚</p>

<p>æ›¾è®°å¦ï¼Œ<a href="https://en.wikiquote.org/wiki/Linus_Torvalds">Linus</a> å¤§ç¥çš„è­¦ä¸–ç®´è¨€ã€ŒTalk is cheap. Show me the code.ã€æ‰€ä»¥æ¥ä¸‹æ¥çœ‹ä¸€æ®µç¤ºä¾‹ä»£ç ï¼Œä»¥å±•ç¤ºä¸¤ä¸ªè·¯ç”±é¡µçš„ç¨‹åºåœ¨ v3 ä¸ v4 ä¸­åˆ†åˆ«å¦‚ä½•å®ç°ã€‚</p>

<p><em>ä¸‹é¢çš„ä»£ç æ¥è‡ªæ–‡ç« <a href="https://css-tricks.com/react-router-4/">All About React Router 4</a></em></p>

<p>v3:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Router</span><span class="p">,</span> <span class="nx">Route</span><span class="p">,</span> <span class="nx">IndexRoute</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">PrimaryLayout</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">primary-layout</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">header</span><span class="o">&gt;</span>
      <span class="nx">Our</span> <span class="nx">React</span> <span class="nx">Router</span> <span class="mi">3</span> <span class="nx">App</span>
    <span class="o">&lt;</span><span class="sr">/header</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">main</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/main</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">HomePage</span> <span class="o">=</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Home</span> <span class="nx">Page</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="kd">const</span> <span class="nx">UsersPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Users</span> <span class="nx">Page</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>
<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">Router</span> <span class="nx">history</span><span class="o">=</span><span class="p">{</span><span class="nx">browserHistory</span><span class="p">}</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">PrimaryLayout</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">IndexRoute</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">HomePage</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/users</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">UsersPage</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/Router</span><span class="err">&gt;
</span><span class="p">)</span>

<span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">root</span><span class="dl">'</span><span class="p">))</span>
</code></pre></div></div>

<p>v3 ä¸­ï¼Œè·¯ç”±é…ç½®é›†ä¸­åœ¨ <code class="language-plaintext highlighter-rouge">App</code> å‡½æ•°ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">&lt;Route&gt;</code> ç›´æ¥åµŒå¥—äº <code class="language-plaintext highlighter-rouge">&lt;Router&gt;</code>ï¼Œé¡µé¢ç»„ä»¶èäºå…¶ä¸­ä½œä¸ºè·¯ç”±çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¾¿æ˜¯æ•´ä¸ªè·¯ç”±çš„é…ç½®ã€‚</p>

<p>v4:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserRouter</span><span class="p">,</span> <span class="nx">Route</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">PrimaryLayout</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">primary-layout</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">header</span><span class="o">&gt;</span>
      <span class="nx">Our</span> <span class="nx">React</span> <span class="nx">Router</span> <span class="mi">4</span> <span class="nx">App</span>
    <span class="o">&lt;</span><span class="sr">/header</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">main</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span> <span class="nx">exact</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">HomePage</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/users</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">UsersPage</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/main</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">HomePage</span> <span class="o">=</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Home</span> <span class="nx">Page</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="kd">const</span> <span class="nx">UsersPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Users</span> <span class="nx">Page</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>
<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">PrimaryLayout</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/BrowserRouter</span><span class="err">&gt;
</span><span class="p">)</span>

<span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">root</span><span class="dl">'</span><span class="p">))</span>
</code></pre></div></div>

<p>v4 ä¸­ react-router ä»“åº“æ‹†åˆ†æˆäº†å¤šä¸ªåŒ…è¿›è¡Œå‘å¸ƒï¼Œ</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">react-router</code> è·¯ç”±åŸºç¡€åº“</li>
  <li><code class="language-plaintext highlighter-rouge">react-router-dom</code> æµè§ˆå™¨ä¸­ä½¿ç”¨çš„å°è£…</li>
  <li><code class="language-plaintext highlighter-rouge">react-router-native</code> React native å°è£…</li>
</ul>

<p>ç¤ºä¾‹ä¸­ <code class="language-plaintext highlighter-rouge">BrowserRouter</code> ç»„ä»¶ä¾¿æ¥è‡ª <code class="language-plaintext highlighter-rouge">react-router-dom</code> è¿™ä¸ªåŒ…ã€‚</p>

<p>å¦‚æœä¹‹å‰é™æ€è·¯ç”±çš„è§‚å¿µæ ¹æ¤å¿ƒä¸­ï¼Œé‚£ä¹ˆåœ¨ v4 çš„ç‰ˆæœ¬ä¸­ï¼Œä¼¼ä¹çœ‹ä¸åˆ°è·¯ç”±çš„å½±å­äº†ï¼Œå®ƒç©¿æ’åœ¨äº†å„ç»„ä»¶ä¸­ã€‚è¿™ä¸€ç‚¹åœ¨éœ€è¦åµŒå¥—è·¯ç”±ï¼ˆNested Routesï¼‰çš„åœºæ™¯æ—¶å°¤ä¸ºæ˜æ˜¾ã€‚</p>

<p><em>æ¥è‡ªå®˜æ–¹æ–‡æ¡£çš„ç¤ºä¾‹ä»£ç </em></p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
    <span class="p">{</span><span class="cm">/* here's a div */</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="cm">/* here's a Route */</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/tacos</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Tacos</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/BrowserRouter</span><span class="err">&gt;
</span><span class="p">)</span>

<span class="c1">// when the url matches `/tacos` this component renders</span>
<span class="kd">const</span> <span class="nx">Tacos</span>  <span class="o">=</span> <span class="p">({</span> <span class="nx">match</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="c1">// here's a nested div</span>
  <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="p">{</span><span class="cm">/* here's a nested Route,
        match.url helps us make a relative path */</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nx">Route</span>
      <span class="nx">path</span><span class="o">=</span><span class="p">{</span><span class="nx">match</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/carnitas</span><span class="dl">'</span><span class="p">}</span>
      <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Carnitas</span><span class="p">}</span>
    <span class="sr">/</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="p">)</span>
</code></pre></div></div>

<p>ä¸Šé¢ï¼Œ<code class="language-plaintext highlighter-rouge">&lt;Tacos&gt;</code> ç»„ä»¶å±•ç¤ºä¸å¦ï¼Œå–å†³äºå½“å‰è·¯ç”±æ˜¯å¦ä¸ <code class="language-plaintext highlighter-rouge">/tacos</code> åŒ¹é…ã€‚è€Œ <code class="language-plaintext highlighter-rouge">&lt;Route&gt;</code> åˆ™å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå®¹å™¨å‹ç»„ä»¶ï¼Œå®ƒåšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œå°†ä¼ å…¥çš„ <code class="language-plaintext highlighter-rouge">path</code> ä¸å½“å‰çš„ <code class="language-plaintext highlighter-rouge">location</code> æ¯”è¾ƒï¼ŒåŒ¹é…åˆ™æ¸²æŸ“ <code class="language-plaintext highlighter-rouge">component</code> å±æ€§ä¼ å…¥çš„ç»„ä»¶ï¼Œå¦åˆ™ <code class="language-plaintext highlighter-rouge">return null</code>ï¼ˆå®é™…å®ç°ä»¥æºç ä¸ºå‡†ï¼‰ã€‚</p>

<p>ç”± react-router v3 è½¬åˆ° v4ï¼Œåœ¨æ€æƒ³ä¸Šçš„è½¬å˜è¿˜æ˜¯éœ€è¦äº›æ—¶é—´æ¥ç£¨åˆã€‚æ­£å¦‚ react-router åˆšå‘å¸ƒæ—¶ï¼Œå¯¹äºå°†è·¯ç”±å†™åœ¨ jsx ä¸­ï¼Œæˆ‘ä»¬æ˜¯æ‹’ç»çš„ã€‚</p>

<h4 id="å“åº”å¼è·¯ç”±">å“åº”å¼è·¯ç”±ï¼</h4>

<p>è¯´å‡ºæ¥ä½ å¯èƒ½ä¸ä¿¡ï¼Œæ”¹ä¸ºåŠ¨æ€è·¯ç”±çš„å®ç°æ–¹å¼åï¼Œå…¶å±•ç°å®Œå…¨ç”±ç»„ä»¶æ§åˆ¶ï¼Œæ‰€ä»¥ç«Ÿç„¶å¯ä»¥å’Œåª’ä½“æŸ¥è¯¢ï¼ˆMedia queriesï¼‰ç»“åˆï¼Œå®ç°ä¸åŒå±å¹•å¤§å°è·¯ç”±åˆ°ä¸åŒçš„ç•Œé¢æ ·å¼ã€‚å®˜æ–¹çš„ä¸€ä¸ªç¤ºä¾‹ä¾¿å±•ç¤ºäº†è¿™ä¸€éªšæ°”æ“ä½œã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">AppLayout</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/invoices</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Invoices</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/AppLayout</span><span class="err">&gt;
</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">Invoices</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">Layout</span><span class="o">&gt;</span>

    <span class="p">{</span><span class="cm">/* always show the nav */</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nx">InvoicesNav</span><span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">Media</span> <span class="nx">query</span><span class="o">=</span><span class="p">{</span><span class="nx">PRETTY_SMALL</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">screenIsSmall</span> <span class="o">=&gt;</span> <span class="nx">screenIsSmall</span>
        <span class="c1">// small screen has no redirect</span>
        <span class="p">?</span> <span class="o">&lt;</span><span class="nx">Switch</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">exact</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/invoices/dashboard</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Dashboard</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/invoices/:id</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Invoice</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/Switch</span><span class="err">&gt;
</span>        <span class="c1">// large screen does!</span>
        <span class="p">:</span> <span class="o">&lt;</span><span class="nx">Switch</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">exact</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/invoices/dashboard</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Dashboard</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/invoices/:id</span><span class="dl">"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Invoice</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Redirect</span> <span class="k">from</span><span class="o">=</span><span class="dl">"</span><span class="s2">/invoices</span><span class="dl">"</span> <span class="nx">to</span><span class="o">=</span><span class="dl">"</span><span class="s2">/invoices/dashboard</span><span class="dl">"</span><span class="o">/&gt;</span>
          <span class="o">&lt;</span><span class="sr">/Switch</span><span class="err">&gt;
</span>      <span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/Media</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/Layout</span><span class="err">&gt;
</span><span class="p">)</span>
</code></pre></div></div>

<blockquote>
  <p><strong>å°è´´å£«/ä¸ºå¥½å¥‡çš„æœ‹å‹ä»¬å‡†å¤‡</strong>
<code class="language-plaintext highlighter-rouge">&lt;Media&gt;</code>ï¼šä¸è¦é—®æˆ‘ä»å“ªé‡Œæ¥ï¼Œæˆ‘æ»´æ•…ä¹¡åœ¨ <a href="https://github.com/ReactTraining/react-media">ReactTraining/react-media</a>~</p>
</blockquote>

<p>è¿™ï¼Œä¸å°±è®©è·¯ç”±å˜å¾—å¾ˆå“åº”å¼äº†ä¹ˆï¼ç®€ç›´éªšå¾—ä¸è¡Œã€‚</p>

<h3 id="åŠ¨æ€è·¯ç”±çš„é—®é¢˜">åŠ¨æ€è·¯ç”±çš„é—®é¢˜</h3>

<p>å°½è¯´äº†ä¼˜ç‚¹ï¼Œçœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œé‚£æ–°ç‰ˆçš„åŠ¨æ€è·¯ç”±å®ç°æ–¹å¼ï¼Œç¤¾åŒºçš„äººä¹°ä¸ä¹°å¸ï¼Œå¹¿å¤§äººæ°‘ç¾¤ä¼—åŒæ„ä¸åŒæ„å‘¢ï¼Ÿ</p>

<p>åœ¨æˆ‘çœ‹æ¥ï¼Œ</p>

<ul>
  <li>ä¸å¤Ÿç›´è§‚äº†ã€‚ä½ æ— æ³•çŸ¥é“ç¨‹åºä¸­æ‰€æœ‰çš„è·¯ç”±ï¼ˆæ˜¯æ—¶å€™é€ ä¸€ä¸ª sitemap çš„è½®å­äº†ï¼‰ã€‚</li>
  <li>æµ‹è¯•æˆäº†è€å¤§éš¾çš„é—®é¢˜ã€‚ç»„ä»¶ä¸­æºæ‚äº†è·¯ç”±é€»è¾‘ï¼ŒåŸæœ¬å¯¹é’ˆå¯¹ç»„ä»¶çš„å•å…ƒæµ‹è¯•ï¼ˆåŠŸèƒ½å±‚é¢ï¼‰å®Œå…¨ä¸éœ€è¦çŸ¥é“è·¯ç”±çš„å­˜åœ¨ï¼Œè€Œç°åœ¨å°±è¦è€ƒè™‘äº†ã€‚æ­£å¦‚æ–‡ç« <a href="https://medium.freecodecamp.org/you-might-not-need-react-router-38673620f3d">You might not need React Router
</a>ä¸‹é¢çš„<a href="https://medium.com/@DaveSchinkel/react-router-v4-is-terrible-3b3bfa2aab9d">è¯„è®º</a>ï¼š</li>
</ul>

<blockquote>
  <p>react-router v4 is terrible. Now your tests have to be aware of it and completely coupled to it even if your tests have nothing to do with testing custom routes. Thatâ€™s garbage. Teams who test or TDD know exactly what I mean, this is not simple, and react-router v4 now leaks into your tests tooâ€¦and you have no choice but to wrap the components youâ€™re testing with react-router components.</p>
</blockquote>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<p>æœ¬è´¨ä¸Šï¼Œå¯ä»¥çœ‹åšæ˜¯é¡µé¢è‡ªå·±æ§åˆ¶äº†é¡µé¢ï¼Œè¿™ä¸ªé€»è¾‘ç»™åˆ°äº†æ¯ä¸ªç»„ä»¶æœ¬èº«ï¼Œè€Œä¸æ˜¯ç”±é¡¶çº§è·¯ç”±é…ç½®æ¥å†³å®šé¡µé¢çš„å±•ç¤ºï¼Œæ›´åŠ çš„çµæ´»ã€‚è·¯ç”±å›å½’åˆ°äº†ç»„ä»¶çš„æœ¬è´¨ï¼Œæ‹¥æŠ±æ›´åŠ çº¯æ­£çš„ Reactï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨ä½¿ç”¨ v4 çš„æ—¶å€™è¿˜é‡åˆ°ä»€ä¹ˆé—®é¢˜çš„è¯ï¼Œé‚£å¤§éƒ¨åˆ†éƒ½åº”è¯¥æ˜¯ä½¿ç”¨ React èƒ½é‡åˆ°çš„é—®é¢˜ã€‚</p>

<blockquote>
  <p>Think about how to solve the problem with Reactâ€™s declarative composability because nearly every â€œReact Router questionâ€ is probably a â€œReact questionâ€.</p>
</blockquote>

<p>è¿˜æœ‰ä¸€ç‚¹å¥½å¤„æ˜¯åŸºäºåŸç”Ÿ React ç»„ä»¶åï¼Œæ²¡æœ‰è‡ªå·±é€ çš„ç”Ÿæ¶©è½®å­ï¼Œæ­å»ºå¥½åŸºç¡€å¹³å°åç¤¾åŒºå¯ä»¥åŸºäº React è´¡çŒ®æ›´å¤šæ’ä»¶ã€‚</p>

<p>æ›´åŠ è¯¦å°½çš„å…³äº react-router v4 çš„ä¸œè¥¿æ¨èé˜…è¯»<a href="https://css-tricks.com/react-router-4/">All About React Router 4</a>ï¼ˆè®²çœŸæˆ‘å¾ˆå¥‡æ€ªè¿™æ–‡ç« ä¸ºä»€ä¹ˆå‘åœ¨äº† css-tricksï¼Œé»‘äººé—®å·ï¼Ÿï¼‰ ï¼Œæˆ–è€…æŸ¥çœ‹è¿™ä¸ª<a href="https://codepen.io/bradwestfall/project/editor/XWNWge">åœ¨çº¿ Demo</a>ã€‚</p>

<p>ä¸åƒç¡¬æ°”çš„ iOS æ¯æ¬¡éƒ½<strong>å¢™è£‚</strong>å»ºè®®<strong>æ‰€æœ‰</strong>ç”¨æˆ·å‡çº§ï¼ˆç»“æœè¯æ˜è¶Šå‡è¶Šæ…¢ï¼‰ï¼Œv4 beta æ–‡æ¡£é‡Œå…³äºã€Œ<a href="https://github.com/ReactTraining/react-router/tree/v4.0.0-beta.8#do-i-have-to-upgrade">Do I have to upgrade?</a>ã€çš„å›ç­”æ˜¾å¾—ç‰¹åˆ«åŠ¡å®ï¼š</p>

<blockquote>
  <p>No. Leave your package.json at v2/3 and move on with your life. Weâ€™ll be merging bug fixes for v2/3 indefinitely.</p>
</blockquote>

<p>æ²¡æœ‰å¿…è¦å‡çº§ï¼Œv2/3 ä¼šæŒç»­ç»´æŠ¤ï¼ˆå½“ç„¶ä¸ä¼šå‘Šè¯‰ä½ æ‰€è°“çš„ç»´æŠ¤ä»…ä»…æ˜¯æŒ‡åˆå¹¶ç¤¾åŒºè´¡çŒ®çš„ bug fixï¼‰ã€‚ä¸è¿‡æ–°é¡¹ç›®å€’æ˜¯å¯ä»¥æŠŠç©ä¸€ä¸‹çš„ï¼Œè°ä¸å–œæ–°åŒæ—§å‘¢ã€‚</p>

<p>æŠ‘æˆ–ï¼Œå…¶å®ä¹Ÿå¹¶ä¸éœ€è¦ä»€ä¹ˆ react-routerã€‚è¿™ä¸ªä¸‹æ¬¡å†è®²ã€‚</p>

<h3 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æº</h3>

<ul>
  <li><a href="https://github.com/ReactTraining/react-router/tree/v4.0.0-beta.8#why-a-major-version-bump">v4 FAQ - Why a major version bump?</a></li>
  <li><a href="https://reacttraining.com/react-router/web/guides/philosophy">React routerâ€™s philosophy</a></li>
  <li><a href="https://stackoverflow.com/questions/46096518/what-exactly-is-dynamic-routing-in-reactjs">What exactly is Dynamic Routing in ReactJS</a></li>
  <li><a href="https://css-tricks.com/react-router-4/">All About React Router 4</a></li>
</ul>



        <hr style="visibility: hidden" />
        <ul class="pager">
          
          <li class="previous">
            <a
              href="/2018/01/24/%E8%AF%B4%E5%87%BA%E6%9D%A5%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E4%BF%A1-Git-%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%8A%A8%E6%89%BE-Bug/"
              data-toggle="tooltip"
              data-placement="top"
              title="è¯´å‡ºæ¥ä½ å¯èƒ½ä¸ä¿¡ï¼ŒGit å¯ä»¥è‡ªåŠ¨æ‰¾ Bug"
            >
              Previous<br />
              <span>è¯´å‡ºæ¥ä½ å¯èƒ½ä¸ä¿¡ï¼ŒGit å¯ä»¥è‡ªåŠ¨æ‰¾ Bug</span>
            </a>
          </li>
           
          <li class="next">
            <a
              href="/2018/02/27/webpack-v4-%E5%8D%87%E7%BA%A7%E5%B0%9D%E9%B2%9C/"
              data-toggle="tooltip"
              data-placement="top"
              title="webpack v4 å‡çº§å°é²œ"
            >
              Next<br />
              <span>webpack v4 å‡çº§å°é²œ</span>
            </a>
          </li>
          
        </ul>
        <hr style="visibility: hidden" />

         
      </div>

      <!-- Side Catalog Container -->
      
      <div
        class="col-lg-2 col-lg-offset-0 visible-lg-block sidebar-container catalog-container"
      >
        <div class="side-catalog">
          <hr class="hidden-sm hidden-xs" />
          <ul class="catalog-body"></ul>
        </div>
      </div>
      

      <!-- Sidebar Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"
      >
        <!-- Featured Tags -->
        



        <!-- Friends Blog -->
        
      </div>
    </div>
  </div>
</article>

<!-- add support for mathjax by voleking-->
   
<!-- async load function -->
<script>
  function async(u, c) {
    var d = document,
      t = "script",
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener(
        "load",
        function (e) {
          c(null, e);
        },
        false
      );
    }
    s.parentNode.insertBefore(o, s);
  }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
  async(
    "//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",
    function () {
      anchors.options = {
        visible: "hover",
        placement: "right",
        // icon: '#'
      };
      anchors
        .add()
        .remove(".intro-header h1")
        .remove(".subheading")
        .remove(".sidebar-container h5");
    }
  );
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

 <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  <li>
    <a href="/feed.xml">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a href="https://twitter.com/liuwayong">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/wayou">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

                <p class="copyright text-muted">
                   å·²ç»åˆ°åº•äº†ğŸ˜
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->



<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");
  
    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


  </body>
</html>
