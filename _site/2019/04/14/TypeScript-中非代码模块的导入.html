<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>TypeScript ä¸­éä»£ç æ¨¡å—çš„å¯¼å…¥ | ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="TypeScript ä¸­éä»£ç æ¨¡å—çš„å¯¼å…¥" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="TypeScript ä¸­éä»£ç æ¨¡å—çš„å¯¼å…¥ éœ€è¦ç†è§£çš„æ˜¯ï¼ŒTypeScript ä½œä¸ºè¯­è¨€ï¼Œä»–åªå¤„ç†ä»£ç æ¨¡å—ã€‚å…¶ä»–ç±»å‹çš„æ–‡ä»¶è¿™ç§éä»£ç æ¨¡å—çš„å¯¼å…¥ï¼Œè®²é“ç†æ˜¯é€šè¿‡å¦å¤–çš„æ‰“åŒ…å·¥å…·æ¥å®Œæˆçš„ï¼Œæ¯”å¦‚ Web åº”ç”¨ä¸­çš„å›¾ç‰‡ï¼Œæ ·å¼ï¼ŒJSON è¿˜æœ‰ HTML æ¨¡æ¿æ–‡ä»¶ã€‚åªæ˜¯æˆ‘ä»¬éœ€è¦åœ¨ TypeScript å±‚é¢è§£å†³æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ã€‚ é€šé…ç¬¦æ¨¡å—å£°æ˜ ç›´æ¥å¯¼å…¥éä»£ç æ¨¡å—ï¼ŒTypeScript ä¼šæŠ¥é”™ã€‚ /** ğŸš¨ Cannot find module &#39;./index.html&#39;. */ import * as html from &quot;./index.html&quot;; TypeScript æ–‡æ¡£ä¸­å…³äºè¿™éƒ¨åˆ†çš„æè¿°æ˜¯ Wildcard module declarationsï¼Œå³é€šè¿‡å®šä¹‰é€šé…ç¬¦æ¨¡å—ã€‚ä¸ SystemJS å’Œ AMD ä¸€è‡´ï¼Œåœ¨å¯¼å…¥æ—¶è·¯å¾„ä¸ŠåŠ ä¸Šå®šä¹‰å¥½çš„æ–‡ä»¶ç±»å‹å‰åç¼€ï¼Œè¿™äº›è·¯å¾„ä¸Šçš„é¢å¤–ä¿¡æ¯åœ¨ç¼–è¯‘åå¯é€šè¿‡è¿è¡Œæ—¶å®é™…çš„åŠ è½½å™¨ä¸­ç›¸åº”çš„æ’ä»¶æ¥è§£æå¤„ç†ã€‚ typings.d.ts declare module &quot;*!text&quot; { const content: string; export default content; } // Some do it the other way around. declare module &quot;json!*&quot; { const value: any; export default value; } main.ts import fileContent from &quot;./xyz.txt!text&quot;; import data from &quot;json!http://example.com/data.json&quot;; console.log(data, fileContent); ä½¿ç”¨å®šä¹‰ç±»å‹å‰åç¼€çš„æ–¹å¼æ˜¯å¯ä»¥è§£å†³ä»£ç ä¸­ TypeScript æŠ¥é”™çš„é—®é¢˜ï¼Œä½†ç¼–è¯‘åå› ä¸ºæ¨¡å—åœ°å€ä¸­çš„ç±»å‹å‰ç¼€æˆ–åç¼€ï¼ˆ!text,json!ï¼‰æ²¡æœ‰å»æ‰ï¼Œè¿™å°±éœ€è¦å¯¹ require å®šä¹‰ç›¸åº”çš„æ’ä»¶æ¥å¤„ç†ã€‚ $ node main.js internal/modules/cjs/loader.js:670 throw err; ^ Error: Cannot find module &#39;./xyz.txt!text&#39; å¦‚æœä½ çœ‹è¿‡ VSCode çš„æºç ï¼Œä¼šå‘ç°é‡Œé¢å¤§é‡ä½¿ç”¨äº†æœ‰ç±»ä¼¼è¿™æ ·çš„æ–¹å¼å¯¼å…¥æ ·å¼æ–‡ä»¶ï¼š import &#39;vs/css!./selections&#39;; è¿™é‡Œ vs/css! ä¾¿æ˜¯ä¸Šé¢æåˆ°çš„æ–¹å¼ï¼Œä½† VSCode æ˜¯ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ä¸€ä¸ªæ¨¡å—åŠ è½½å™¨ Microsoft/vscode-loader æ¥å¤„ç†ã€‚ è¿˜å¯ä»¥åƒä¸‹é¢è¿™æ ·æ¥è¿›è¡Œæ–‡ä»¶ç±»å‹çš„å£°æ˜ï¼š typings.d.ts declare module &quot;*.html&quot; { const value: string; export default value; } ç„¶åå†™æ­£å¸¸çš„è·¯å¾„æ¥å¯¼å…¥å³å¯ï¼Œç¼–è¯‘åçš„äº§å‡ºä¸­è·¯å¾„æ²¡æœ‰æ”¹å˜ã€‚ /** âœ… ojbk */ import * as html from &quot;./index.html&quot;; å¯¹äºå…¶ä»–ç±»å‹çš„åç¼€åŒç†ã€‚ typings.d.ts declare module &quot;*.png&quot; { const value: string; export default value; } declare module &#39;*.scss&#39; { const content: any; export default content; } éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™åªæ˜¯è§£å†³äº† TypeScript çš„æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ï¼Œå®é™…æ–‡ä»¶çš„å¯¼å…¥å¹¶ä¸æ˜¯åœ¨ TypeScript ä¸­åšçš„ï¼Œè€Œéœ€è¦é¢å¤–çš„æ‰“åŒ…å·¥å…·ã€‚Webpack ä¸­åˆ™æ˜¯ç›¸åº”çš„æ ·å¼ loader å’Œ å›¾ç‰‡ loader æ¥è´Ÿè´£è¿™äº›æ–‡ä»¶çš„è§£æåŠ è½½ã€‚ JSON æ–‡ä»¶çš„å¯¼å…¥ å› ä¸º JSON æ ¼å¼å¤ªè¿‡å¸¸è§ï¼ŒTypeScript ç¡®å®åœ¨è‡ªå·±çš„ç¼–è¯‘å™¨ä¸­æä¾›äº†å¯¹å…¶åŠ è½½çš„æ”¯æŒï¼Œé€šè¿‡ç›¸åº”çš„ç¼–è¯‘å‚æ•° --resolveJsonModul æ¥å¼€å¯ã€‚ åˆ›å»º tsconfig.json å¼€å¯å¯¹ JSON æ–‡ä»¶å¯¼å…¥çš„æ”¯æŒã€‚ tsconfig.json { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;, &quot;module&quot;: &quot;commonjs&quot;, &quot;resolveJsonModule&quot;: true } } ç„¶åä»£ç ä¸­å¯¼å…¥ JSON æ–‡ä»¶æ—¶æŒ‡å®šæ­£ç¡®çš„è·¯å¾„ï¼Œåƒå…¶ä»–æ­£å¸¸çš„ TypeScript æ¨¡å—ä¸€æ ·ã€‚æ— é¡»å‰ç¼€ï¼Œä¹Ÿæ— é¡»ç¼–å†™é¢å¤–çš„å£°æ˜æ–‡ä»¶ã€‚ main.ts import * as data from &quot;./bar.json&quot;; console.log(data); å½“å°è¯•ç¼–è¯‘ä¸Šé¢ä»£ç æ—¶ï¼Œä½ ä¼šå¾—åˆ°å¦‚ä¸‹çš„æŠ¥é”™ï¼š $ tsc error TS5055: Cannot write file &#39;/Users/wayou/Documents/dev/github/ts-wildcard-module/bar.json&#39; because it would overwrite input file. å› ä¸ºç¼–è¯‘å JSON æ–‡ä»¶ä¹Ÿä¼šæœ‰ä¸€ä»½åŒåçš„äº§å‡ºï¼Œåœ¨æ²¡æœ‰æŒ‡å®šç¼–è¯‘è¾“å‡ºç›®å½•çš„æƒ…å†µä¸‹ï¼Œ tsc é»˜è®¤è¾“å‡ºåˆ°å½“å‰ç›®å½•ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸Šé¢ JSON æ–‡ä»¶ä¼šè¢«è¦†ç›–çš„æç¤ºã€‚æ‰€ä»¥è§£å†³åŠæ³•å°±æ˜¯æ·»åŠ è¾“å‡ºç›®å½•çš„é…ç½®ã€‚ tsconfig.json { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;, &quot;module&quot;: &quot;commonjs&quot;, &quot;resolveJsonModule&quot;: true, + &quot;outDir&quot;: &quot;dist&quot; } } å†æ¬¡ç¼–è¯‘åå¯æ­£å¸¸è¿è¡Œã€‚ $ tsc $ node dist/main.js { data: &#39;blah&#39; } é…åˆç€ esModuleInterop é€‰é¡¹å¯ä»¥è®©å¯¼å…¥æ›´åŠ ç®€æ´ã€‚ tsconfig.json { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;, &quot;module&quot;: &quot;commonjs&quot;, + &quot;esModuleInterop&quot;: true, &quot;resolveJsonModule&quot;: true, &quot;outDir&quot;: &quot;dist&quot; } } main.ts - import * as data from &quot;./bar.json&quot;; + import data from &quot;./bar.json&quot;; console.log(data); æ€»ç»“ ä¸€èˆ¬é¡¹ç›®ä¸­éƒ½ä½¿ç”¨ä¸“é—¨çš„æ‰“åŒ…å·¥å…·æ¯”å¦‚ Webpackï¼ŒParcel ç­‰ï¼Œèµ„æºçš„è§£æåŠ è½½éƒ½ä¼šè¢«å¾ˆå¥½åœ°å¤„ç†ã€‚åªæ˜¯æˆ‘ä»¬éœ€è¦è§£å†³ TypeScipt æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ï¼Œæ­¤æ—¶å¯é€šè¿‡å¯¹ç›¸åº”æ–‡ä»¶ç¼–å†™å£°æ˜æ–‡ä»¶çš„æ–¹å¼ã€‚ ç›¸å…³èµ„æº Wildcard module declarations" />
<meta property="og:description" content="TypeScript ä¸­éä»£ç æ¨¡å—çš„å¯¼å…¥ éœ€è¦ç†è§£çš„æ˜¯ï¼ŒTypeScript ä½œä¸ºè¯­è¨€ï¼Œä»–åªå¤„ç†ä»£ç æ¨¡å—ã€‚å…¶ä»–ç±»å‹çš„æ–‡ä»¶è¿™ç§éä»£ç æ¨¡å—çš„å¯¼å…¥ï¼Œè®²é“ç†æ˜¯é€šè¿‡å¦å¤–çš„æ‰“åŒ…å·¥å…·æ¥å®Œæˆçš„ï¼Œæ¯”å¦‚ Web åº”ç”¨ä¸­çš„å›¾ç‰‡ï¼Œæ ·å¼ï¼ŒJSON è¿˜æœ‰ HTML æ¨¡æ¿æ–‡ä»¶ã€‚åªæ˜¯æˆ‘ä»¬éœ€è¦åœ¨ TypeScript å±‚é¢è§£å†³æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ã€‚ é€šé…ç¬¦æ¨¡å—å£°æ˜ ç›´æ¥å¯¼å…¥éä»£ç æ¨¡å—ï¼ŒTypeScript ä¼šæŠ¥é”™ã€‚ /** ğŸš¨ Cannot find module &#39;./index.html&#39;. */ import * as html from &quot;./index.html&quot;; TypeScript æ–‡æ¡£ä¸­å…³äºè¿™éƒ¨åˆ†çš„æè¿°æ˜¯ Wildcard module declarationsï¼Œå³é€šè¿‡å®šä¹‰é€šé…ç¬¦æ¨¡å—ã€‚ä¸ SystemJS å’Œ AMD ä¸€è‡´ï¼Œåœ¨å¯¼å…¥æ—¶è·¯å¾„ä¸ŠåŠ ä¸Šå®šä¹‰å¥½çš„æ–‡ä»¶ç±»å‹å‰åç¼€ï¼Œè¿™äº›è·¯å¾„ä¸Šçš„é¢å¤–ä¿¡æ¯åœ¨ç¼–è¯‘åå¯é€šè¿‡è¿è¡Œæ—¶å®é™…çš„åŠ è½½å™¨ä¸­ç›¸åº”çš„æ’ä»¶æ¥è§£æå¤„ç†ã€‚ typings.d.ts declare module &quot;*!text&quot; { const content: string; export default content; } // Some do it the other way around. declare module &quot;json!*&quot; { const value: any; export default value; } main.ts import fileContent from &quot;./xyz.txt!text&quot;; import data from &quot;json!http://example.com/data.json&quot;; console.log(data, fileContent); ä½¿ç”¨å®šä¹‰ç±»å‹å‰åç¼€çš„æ–¹å¼æ˜¯å¯ä»¥è§£å†³ä»£ç ä¸­ TypeScript æŠ¥é”™çš„é—®é¢˜ï¼Œä½†ç¼–è¯‘åå› ä¸ºæ¨¡å—åœ°å€ä¸­çš„ç±»å‹å‰ç¼€æˆ–åç¼€ï¼ˆ!text,json!ï¼‰æ²¡æœ‰å»æ‰ï¼Œè¿™å°±éœ€è¦å¯¹ require å®šä¹‰ç›¸åº”çš„æ’ä»¶æ¥å¤„ç†ã€‚ $ node main.js internal/modules/cjs/loader.js:670 throw err; ^ Error: Cannot find module &#39;./xyz.txt!text&#39; å¦‚æœä½ çœ‹è¿‡ VSCode çš„æºç ï¼Œä¼šå‘ç°é‡Œé¢å¤§é‡ä½¿ç”¨äº†æœ‰ç±»ä¼¼è¿™æ ·çš„æ–¹å¼å¯¼å…¥æ ·å¼æ–‡ä»¶ï¼š import &#39;vs/css!./selections&#39;; è¿™é‡Œ vs/css! ä¾¿æ˜¯ä¸Šé¢æåˆ°çš„æ–¹å¼ï¼Œä½† VSCode æ˜¯ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ä¸€ä¸ªæ¨¡å—åŠ è½½å™¨ Microsoft/vscode-loader æ¥å¤„ç†ã€‚ è¿˜å¯ä»¥åƒä¸‹é¢è¿™æ ·æ¥è¿›è¡Œæ–‡ä»¶ç±»å‹çš„å£°æ˜ï¼š typings.d.ts declare module &quot;*.html&quot; { const value: string; export default value; } ç„¶åå†™æ­£å¸¸çš„è·¯å¾„æ¥å¯¼å…¥å³å¯ï¼Œç¼–è¯‘åçš„äº§å‡ºä¸­è·¯å¾„æ²¡æœ‰æ”¹å˜ã€‚ /** âœ… ojbk */ import * as html from &quot;./index.html&quot;; å¯¹äºå…¶ä»–ç±»å‹çš„åç¼€åŒç†ã€‚ typings.d.ts declare module &quot;*.png&quot; { const value: string; export default value; } declare module &#39;*.scss&#39; { const content: any; export default content; } éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™åªæ˜¯è§£å†³äº† TypeScript çš„æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ï¼Œå®é™…æ–‡ä»¶çš„å¯¼å…¥å¹¶ä¸æ˜¯åœ¨ TypeScript ä¸­åšçš„ï¼Œè€Œéœ€è¦é¢å¤–çš„æ‰“åŒ…å·¥å…·ã€‚Webpack ä¸­åˆ™æ˜¯ç›¸åº”çš„æ ·å¼ loader å’Œ å›¾ç‰‡ loader æ¥è´Ÿè´£è¿™äº›æ–‡ä»¶çš„è§£æåŠ è½½ã€‚ JSON æ–‡ä»¶çš„å¯¼å…¥ å› ä¸º JSON æ ¼å¼å¤ªè¿‡å¸¸è§ï¼ŒTypeScript ç¡®å®åœ¨è‡ªå·±çš„ç¼–è¯‘å™¨ä¸­æä¾›äº†å¯¹å…¶åŠ è½½çš„æ”¯æŒï¼Œé€šè¿‡ç›¸åº”çš„ç¼–è¯‘å‚æ•° --resolveJsonModul æ¥å¼€å¯ã€‚ åˆ›å»º tsconfig.json å¼€å¯å¯¹ JSON æ–‡ä»¶å¯¼å…¥çš„æ”¯æŒã€‚ tsconfig.json { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;, &quot;module&quot;: &quot;commonjs&quot;, &quot;resolveJsonModule&quot;: true } } ç„¶åä»£ç ä¸­å¯¼å…¥ JSON æ–‡ä»¶æ—¶æŒ‡å®šæ­£ç¡®çš„è·¯å¾„ï¼Œåƒå…¶ä»–æ­£å¸¸çš„ TypeScript æ¨¡å—ä¸€æ ·ã€‚æ— é¡»å‰ç¼€ï¼Œä¹Ÿæ— é¡»ç¼–å†™é¢å¤–çš„å£°æ˜æ–‡ä»¶ã€‚ main.ts import * as data from &quot;./bar.json&quot;; console.log(data); å½“å°è¯•ç¼–è¯‘ä¸Šé¢ä»£ç æ—¶ï¼Œä½ ä¼šå¾—åˆ°å¦‚ä¸‹çš„æŠ¥é”™ï¼š $ tsc error TS5055: Cannot write file &#39;/Users/wayou/Documents/dev/github/ts-wildcard-module/bar.json&#39; because it would overwrite input file. å› ä¸ºç¼–è¯‘å JSON æ–‡ä»¶ä¹Ÿä¼šæœ‰ä¸€ä»½åŒåçš„äº§å‡ºï¼Œåœ¨æ²¡æœ‰æŒ‡å®šç¼–è¯‘è¾“å‡ºç›®å½•çš„æƒ…å†µä¸‹ï¼Œ tsc é»˜è®¤è¾“å‡ºåˆ°å½“å‰ç›®å½•ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸Šé¢ JSON æ–‡ä»¶ä¼šè¢«è¦†ç›–çš„æç¤ºã€‚æ‰€ä»¥è§£å†³åŠæ³•å°±æ˜¯æ·»åŠ è¾“å‡ºç›®å½•çš„é…ç½®ã€‚ tsconfig.json { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;, &quot;module&quot;: &quot;commonjs&quot;, &quot;resolveJsonModule&quot;: true, + &quot;outDir&quot;: &quot;dist&quot; } } å†æ¬¡ç¼–è¯‘åå¯æ­£å¸¸è¿è¡Œã€‚ $ tsc $ node dist/main.js { data: &#39;blah&#39; } é…åˆç€ esModuleInterop é€‰é¡¹å¯ä»¥è®©å¯¼å…¥æ›´åŠ ç®€æ´ã€‚ tsconfig.json { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;, &quot;module&quot;: &quot;commonjs&quot;, + &quot;esModuleInterop&quot;: true, &quot;resolveJsonModule&quot;: true, &quot;outDir&quot;: &quot;dist&quot; } } main.ts - import * as data from &quot;./bar.json&quot;; + import data from &quot;./bar.json&quot;; console.log(data); æ€»ç»“ ä¸€èˆ¬é¡¹ç›®ä¸­éƒ½ä½¿ç”¨ä¸“é—¨çš„æ‰“åŒ…å·¥å…·æ¯”å¦‚ Webpackï¼ŒParcel ç­‰ï¼Œèµ„æºçš„è§£æåŠ è½½éƒ½ä¼šè¢«å¾ˆå¥½åœ°å¤„ç†ã€‚åªæ˜¯æˆ‘ä»¬éœ€è¦è§£å†³ TypeScipt æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ï¼Œæ­¤æ—¶å¯é€šè¿‡å¯¹ç›¸åº”æ–‡ä»¶ç¼–å†™å£°æ˜æ–‡ä»¶çš„æ–¹å¼ã€‚ ç›¸å…³èµ„æº Wildcard module declarations" />
<link rel="canonical" href="http://localhost:4000/2019/04/14/TypeScript-%E4%B8%AD%E9%9D%9E%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9D%97%E7%9A%84%E5%AF%BC%E5%85%A5.html" />
<meta property="og:url" content="http://localhost:4000/2019/04/14/TypeScript-%E4%B8%AD%E9%9D%9E%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9D%97%E7%9A%84%E5%AF%BC%E5%85%A5.html" />
<meta property="og:site_name" content="ç‰›ã•ã‚“ã®éƒ¨è½æ ¼" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-14T21:04:00+08:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2019/04/14/TypeScript-%E4%B8%AD%E9%9D%9E%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9D%97%E7%9A%84%E5%AF%BC%E5%85%A5.html","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/04/14/TypeScript-%E4%B8%AD%E9%9D%9E%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9D%97%E7%9A%84%E5%AF%BC%E5%85%A5.html"},"description":"TypeScript ä¸­éä»£ç æ¨¡å—çš„å¯¼å…¥ éœ€è¦ç†è§£çš„æ˜¯ï¼ŒTypeScript ä½œä¸ºè¯­è¨€ï¼Œä»–åªå¤„ç†ä»£ç æ¨¡å—ã€‚å…¶ä»–ç±»å‹çš„æ–‡ä»¶è¿™ç§éä»£ç æ¨¡å—çš„å¯¼å…¥ï¼Œè®²é“ç†æ˜¯é€šè¿‡å¦å¤–çš„æ‰“åŒ…å·¥å…·æ¥å®Œæˆçš„ï¼Œæ¯”å¦‚ Web åº”ç”¨ä¸­çš„å›¾ç‰‡ï¼Œæ ·å¼ï¼ŒJSON è¿˜æœ‰ HTML æ¨¡æ¿æ–‡ä»¶ã€‚åªæ˜¯æˆ‘ä»¬éœ€è¦åœ¨ TypeScript å±‚é¢è§£å†³æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ã€‚ é€šé…ç¬¦æ¨¡å—å£°æ˜ ç›´æ¥å¯¼å…¥éä»£ç æ¨¡å—ï¼ŒTypeScript ä¼šæŠ¥é”™ã€‚ /** ğŸš¨ Cannot find module &#39;./index.html&#39;. */ import * as html from &quot;./index.html&quot;; TypeScript æ–‡æ¡£ä¸­å…³äºè¿™éƒ¨åˆ†çš„æè¿°æ˜¯ Wildcard module declarationsï¼Œå³é€šè¿‡å®šä¹‰é€šé…ç¬¦æ¨¡å—ã€‚ä¸ SystemJS å’Œ AMD ä¸€è‡´ï¼Œåœ¨å¯¼å…¥æ—¶è·¯å¾„ä¸ŠåŠ ä¸Šå®šä¹‰å¥½çš„æ–‡ä»¶ç±»å‹å‰åç¼€ï¼Œè¿™äº›è·¯å¾„ä¸Šçš„é¢å¤–ä¿¡æ¯åœ¨ç¼–è¯‘åå¯é€šè¿‡è¿è¡Œæ—¶å®é™…çš„åŠ è½½å™¨ä¸­ç›¸åº”çš„æ’ä»¶æ¥è§£æå¤„ç†ã€‚ typings.d.ts declare module &quot;*!text&quot; { const content: string; export default content; } // Some do it the other way around. declare module &quot;json!*&quot; { const value: any; export default value; } main.ts import fileContent from &quot;./xyz.txt!text&quot;; import data from &quot;json!http://example.com/data.json&quot;; console.log(data, fileContent); ä½¿ç”¨å®šä¹‰ç±»å‹å‰åç¼€çš„æ–¹å¼æ˜¯å¯ä»¥è§£å†³ä»£ç ä¸­ TypeScript æŠ¥é”™çš„é—®é¢˜ï¼Œä½†ç¼–è¯‘åå› ä¸ºæ¨¡å—åœ°å€ä¸­çš„ç±»å‹å‰ç¼€æˆ–åç¼€ï¼ˆ!text,json!ï¼‰æ²¡æœ‰å»æ‰ï¼Œè¿™å°±éœ€è¦å¯¹ require å®šä¹‰ç›¸åº”çš„æ’ä»¶æ¥å¤„ç†ã€‚ $ node main.js internal/modules/cjs/loader.js:670 throw err; ^ Error: Cannot find module &#39;./xyz.txt!text&#39; å¦‚æœä½ çœ‹è¿‡ VSCode çš„æºç ï¼Œä¼šå‘ç°é‡Œé¢å¤§é‡ä½¿ç”¨äº†æœ‰ç±»ä¼¼è¿™æ ·çš„æ–¹å¼å¯¼å…¥æ ·å¼æ–‡ä»¶ï¼š import &#39;vs/css!./selections&#39;; è¿™é‡Œ vs/css! ä¾¿æ˜¯ä¸Šé¢æåˆ°çš„æ–¹å¼ï¼Œä½† VSCode æ˜¯ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ä¸€ä¸ªæ¨¡å—åŠ è½½å™¨ Microsoft/vscode-loader æ¥å¤„ç†ã€‚ è¿˜å¯ä»¥åƒä¸‹é¢è¿™æ ·æ¥è¿›è¡Œæ–‡ä»¶ç±»å‹çš„å£°æ˜ï¼š typings.d.ts declare module &quot;*.html&quot; { const value: string; export default value; } ç„¶åå†™æ­£å¸¸çš„è·¯å¾„æ¥å¯¼å…¥å³å¯ï¼Œç¼–è¯‘åçš„äº§å‡ºä¸­è·¯å¾„æ²¡æœ‰æ”¹å˜ã€‚ /** âœ… ojbk */ import * as html from &quot;./index.html&quot;; å¯¹äºå…¶ä»–ç±»å‹çš„åç¼€åŒç†ã€‚ typings.d.ts declare module &quot;*.png&quot; { const value: string; export default value; } declare module &#39;*.scss&#39; { const content: any; export default content; } éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™åªæ˜¯è§£å†³äº† TypeScript çš„æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ï¼Œå®é™…æ–‡ä»¶çš„å¯¼å…¥å¹¶ä¸æ˜¯åœ¨ TypeScript ä¸­åšçš„ï¼Œè€Œéœ€è¦é¢å¤–çš„æ‰“åŒ…å·¥å…·ã€‚Webpack ä¸­åˆ™æ˜¯ç›¸åº”çš„æ ·å¼ loader å’Œ å›¾ç‰‡ loader æ¥è´Ÿè´£è¿™äº›æ–‡ä»¶çš„è§£æåŠ è½½ã€‚ JSON æ–‡ä»¶çš„å¯¼å…¥ å› ä¸º JSON æ ¼å¼å¤ªè¿‡å¸¸è§ï¼ŒTypeScript ç¡®å®åœ¨è‡ªå·±çš„ç¼–è¯‘å™¨ä¸­æä¾›äº†å¯¹å…¶åŠ è½½çš„æ”¯æŒï¼Œé€šè¿‡ç›¸åº”çš„ç¼–è¯‘å‚æ•° --resolveJsonModul æ¥å¼€å¯ã€‚ åˆ›å»º tsconfig.json å¼€å¯å¯¹ JSON æ–‡ä»¶å¯¼å…¥çš„æ”¯æŒã€‚ tsconfig.json { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;, &quot;module&quot;: &quot;commonjs&quot;, &quot;resolveJsonModule&quot;: true } } ç„¶åä»£ç ä¸­å¯¼å…¥ JSON æ–‡ä»¶æ—¶æŒ‡å®šæ­£ç¡®çš„è·¯å¾„ï¼Œåƒå…¶ä»–æ­£å¸¸çš„ TypeScript æ¨¡å—ä¸€æ ·ã€‚æ— é¡»å‰ç¼€ï¼Œä¹Ÿæ— é¡»ç¼–å†™é¢å¤–çš„å£°æ˜æ–‡ä»¶ã€‚ main.ts import * as data from &quot;./bar.json&quot;; console.log(data); å½“å°è¯•ç¼–è¯‘ä¸Šé¢ä»£ç æ—¶ï¼Œä½ ä¼šå¾—åˆ°å¦‚ä¸‹çš„æŠ¥é”™ï¼š $ tsc error TS5055: Cannot write file &#39;/Users/wayou/Documents/dev/github/ts-wildcard-module/bar.json&#39; because it would overwrite input file. å› ä¸ºç¼–è¯‘å JSON æ–‡ä»¶ä¹Ÿä¼šæœ‰ä¸€ä»½åŒåçš„äº§å‡ºï¼Œåœ¨æ²¡æœ‰æŒ‡å®šç¼–è¯‘è¾“å‡ºç›®å½•çš„æƒ…å†µä¸‹ï¼Œ tsc é»˜è®¤è¾“å‡ºåˆ°å½“å‰ç›®å½•ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸Šé¢ JSON æ–‡ä»¶ä¼šè¢«è¦†ç›–çš„æç¤ºã€‚æ‰€ä»¥è§£å†³åŠæ³•å°±æ˜¯æ·»åŠ è¾“å‡ºç›®å½•çš„é…ç½®ã€‚ tsconfig.json { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;, &quot;module&quot;: &quot;commonjs&quot;, &quot;resolveJsonModule&quot;: true, + &quot;outDir&quot;: &quot;dist&quot; } } å†æ¬¡ç¼–è¯‘åå¯æ­£å¸¸è¿è¡Œã€‚ $ tsc $ node dist/main.js { data: &#39;blah&#39; } é…åˆç€ esModuleInterop é€‰é¡¹å¯ä»¥è®©å¯¼å…¥æ›´åŠ ç®€æ´ã€‚ tsconfig.json { &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;, &quot;module&quot;: &quot;commonjs&quot;, + &quot;esModuleInterop&quot;: true, &quot;resolveJsonModule&quot;: true, &quot;outDir&quot;: &quot;dist&quot; } } main.ts - import * as data from &quot;./bar.json&quot;; + import data from &quot;./bar.json&quot;; console.log(data); æ€»ç»“ ä¸€èˆ¬é¡¹ç›®ä¸­éƒ½ä½¿ç”¨ä¸“é—¨çš„æ‰“åŒ…å·¥å…·æ¯”å¦‚ Webpackï¼ŒParcel ç­‰ï¼Œèµ„æºçš„è§£æåŠ è½½éƒ½ä¼šè¢«å¾ˆå¥½åœ°å¤„ç†ã€‚åªæ˜¯æˆ‘ä»¬éœ€è¦è§£å†³ TypeScipt æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ï¼Œæ­¤æ—¶å¯é€šè¿‡å¯¹ç›¸åº”æ–‡ä»¶ç¼–å†™å£°æ˜æ–‡ä»¶çš„æ–¹å¼ã€‚ ç›¸å…³èµ„æº Wildcard module declarations","@type":"BlogPosting","headline":"TypeScript ä¸­éä»£ç æ¨¡å—çš„å¯¼å…¥","dateModified":"2019-04-14T21:04:00+08:00","datePublished":"2019-04-14T21:04:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="ç‰›ã•ã‚“ã®éƒ¨è½æ ¼" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">TypeScript ä¸­éä»£ç æ¨¡å—çš„å¯¼å…¥</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-04-14T21:04:00+08:00" itemprop="datePublished">Apr 14, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="typescript-ä¸­éä»£ç æ¨¡å—çš„å¯¼å…¥">TypeScript ä¸­éä»£ç æ¨¡å—çš„å¯¼å…¥</h1>

<p>éœ€è¦ç†è§£çš„æ˜¯ï¼ŒTypeScript ä½œä¸ºè¯­è¨€ï¼Œä»–åªå¤„ç†ä»£ç æ¨¡å—ã€‚å…¶ä»–ç±»å‹çš„æ–‡ä»¶è¿™ç§éä»£ç æ¨¡å—çš„å¯¼å…¥ï¼Œè®²é“ç†æ˜¯é€šè¿‡å¦å¤–çš„æ‰“åŒ…å·¥å…·æ¥å®Œæˆçš„ï¼Œæ¯”å¦‚ Web åº”ç”¨ä¸­çš„å›¾ç‰‡ï¼Œæ ·å¼ï¼ŒJSON è¿˜æœ‰ HTML æ¨¡æ¿æ–‡ä»¶ã€‚åªæ˜¯æˆ‘ä»¬éœ€è¦åœ¨ TypeScript å±‚é¢è§£å†³æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ã€‚</p>

<h2 id="é€šé…ç¬¦æ¨¡å—å£°æ˜">é€šé…ç¬¦æ¨¡å—å£°æ˜</h2>

<p>ç›´æ¥å¯¼å…¥éä»£ç æ¨¡å—ï¼ŒTypeScript ä¼šæŠ¥é”™ã€‚</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/** ğŸš¨ Cannot find module './index.html'. */</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">html</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./index.html</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>TypeScript æ–‡æ¡£ä¸­å…³äºè¿™éƒ¨åˆ†çš„æè¿°æ˜¯ <a href="https://www.typescriptlang.org/docs/handbook/modules.html">Wildcard module declarations</a>ï¼Œå³é€šè¿‡å®šä¹‰é€šé…ç¬¦æ¨¡å—ã€‚ä¸ <a href="https://github.com/systemjs/systemjs/blob/master/docs/overview.md#plugin-syntax">SystemJS</a> å’Œ <a href="https://github.com/amdjs/amdjs-api/blob/master/LoaderPlugins.md">AMD</a> ä¸€è‡´ï¼Œåœ¨å¯¼å…¥æ—¶è·¯å¾„ä¸ŠåŠ ä¸Šå®šä¹‰å¥½çš„æ–‡ä»¶ç±»å‹å‰åç¼€ï¼Œè¿™äº›è·¯å¾„ä¸Šçš„é¢å¤–ä¿¡æ¯åœ¨ç¼–è¯‘åå¯é€šè¿‡è¿è¡Œæ—¶å®é™…çš„åŠ è½½å™¨ä¸­ç›¸åº”çš„æ’ä»¶æ¥è§£æå¤„ç†ã€‚</p>

<p><em>typings.d.ts</em></p>
<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">declare</span> <span class="kr">module</span> <span class="dl">"</span><span class="s2">*!text</span><span class="dl">"</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">content</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="k">export</span> <span class="k">default</span> <span class="nx">content</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Some do it the other way around.</span>
<span class="kr">declare</span> <span class="kr">module</span> <span class="dl">"</span><span class="s2">json!*</span><span class="dl">"</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">;</span>
    <span class="k">export</span> <span class="k">default</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><em>main.ts</em></p>
<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">fileContent</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./xyz.txt!text</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">data</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">json!http://example.com/data.json</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">fileContent</span><span class="p">);</span>
</code></pre></div></div>

<p>ä½¿ç”¨å®šä¹‰ç±»å‹å‰åç¼€çš„æ–¹å¼æ˜¯å¯ä»¥è§£å†³ä»£ç ä¸­ TypeScript æŠ¥é”™çš„é—®é¢˜ï¼Œä½†ç¼–è¯‘åå› ä¸ºæ¨¡å—åœ°å€ä¸­çš„ç±»å‹å‰ç¼€æˆ–åç¼€ï¼ˆ<code class="language-plaintext highlighter-rouge">!text</code>,<code class="language-plaintext highlighter-rouge">json!</code>ï¼‰æ²¡æœ‰å»æ‰ï¼Œè¿™å°±éœ€è¦å¯¹ <code class="language-plaintext highlighter-rouge">require</code> å®šä¹‰ç›¸åº”çš„æ’ä»¶æ¥å¤„ç†ã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>node main.js
internal/modules/cjs/loader.js:670
    throw err<span class="p">;</span>
    ^

Error: Cannot find module <span class="s1">'./xyz.txt!text'</span>
</code></pre></div></div>

<p>å¦‚æœä½ çœ‹è¿‡ <a href="https://github.com/Microsoft/vscode/blob/master/src/vs/editor/browser/viewParts/selections/selections.ts#L6">VSCode çš„æºç </a>ï¼Œä¼šå‘ç°é‡Œé¢å¤§é‡ä½¿ç”¨äº†æœ‰ç±»ä¼¼è¿™æ ·çš„æ–¹å¼å¯¼å…¥æ ·å¼æ–‡ä»¶ï¼š</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="dl">'</span><span class="s1">vs/css!./selections</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<p>è¿™é‡Œ <code class="language-plaintext highlighter-rouge">vs/css!</code> ä¾¿æ˜¯ä¸Šé¢æåˆ°çš„æ–¹å¼ï¼Œä½† VSCode æ˜¯ä½¿ç”¨äº†<a href="https://github.com/Microsoft/vscode/blob/master/src/vs/loader.js#L1491">è‡ªå®šä¹‰</a>çš„ä¸€ä¸ªæ¨¡å—åŠ è½½å™¨ <a href="https://github.com/Microsoft/vscode-loader">Microsoft/vscode-loader</a> æ¥å¤„ç†ã€‚</p>

<p>è¿˜å¯ä»¥åƒä¸‹é¢è¿™æ ·æ¥è¿›è¡Œæ–‡ä»¶ç±»å‹çš„å£°æ˜ï¼š</p>

<p><em>typings.d.ts</em></p>
<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">declare</span> <span class="kr">module</span> <span class="dl">"</span><span class="s2">*.html</span><span class="dl">"</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">export</span> <span class="k">default</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ç„¶åå†™æ­£å¸¸çš„è·¯å¾„æ¥å¯¼å…¥å³å¯ï¼Œç¼–è¯‘åçš„äº§å‡ºä¸­è·¯å¾„æ²¡æœ‰æ”¹å˜ã€‚</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/** âœ… ojbk */</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">html</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./index.html</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>å¯¹äºå…¶ä»–ç±»å‹çš„åç¼€åŒç†ã€‚</p>

<p><em>typings.d.ts</em></p>
<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">declare</span> <span class="kr">module</span> <span class="dl">"</span><span class="s2">*.png</span><span class="dl">"</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">export</span> <span class="k">default</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">declare</span> <span class="kr">module</span> <span class="dl">'</span><span class="s1">*.scss</span><span class="dl">'</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">content</span><span class="p">:</span> <span class="kr">any</span><span class="p">;</span>
  <span class="k">export</span> <span class="k">default</span> <span class="nx">content</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™åªæ˜¯è§£å†³äº† TypeScript çš„æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ï¼Œå®é™…æ–‡ä»¶çš„å¯¼å…¥å¹¶ä¸æ˜¯åœ¨ TypeScript ä¸­åšçš„ï¼Œè€Œéœ€è¦é¢å¤–çš„æ‰“åŒ…å·¥å…·ã€‚Webpack ä¸­åˆ™æ˜¯ç›¸åº”çš„æ ·å¼ loader å’Œ å›¾ç‰‡ loader æ¥è´Ÿè´£è¿™äº›æ–‡ä»¶çš„è§£æåŠ è½½ã€‚</p>

<h2 id="json-æ–‡ä»¶çš„å¯¼å…¥">JSON æ–‡ä»¶çš„å¯¼å…¥</h2>

<p>å› ä¸º JSON æ ¼å¼å¤ªè¿‡å¸¸è§ï¼ŒTypeScript ç¡®å®åœ¨è‡ªå·±çš„ç¼–è¯‘å™¨ä¸­æä¾›äº†å¯¹å…¶åŠ è½½çš„æ”¯æŒï¼Œé€šè¿‡ç›¸åº”çš„ç¼–è¯‘å‚æ•° <code class="language-plaintext highlighter-rouge">--resolveJsonModul</code> æ¥å¼€å¯ã€‚</p>

<p>åˆ›å»º <code class="language-plaintext highlighter-rouge">tsconfig.json</code> å¼€å¯å¯¹ JSON æ–‡ä»¶å¯¼å…¥çš„æ”¯æŒã€‚</p>

<p><em>tsconfig.json</em></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"commonjs"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"resolveJsonModule"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>ç„¶åä»£ç ä¸­å¯¼å…¥ JSON æ–‡ä»¶æ—¶æŒ‡å®šæ­£ç¡®çš„è·¯å¾„ï¼Œåƒå…¶ä»–æ­£å¸¸çš„ TypeScript æ¨¡å—ä¸€æ ·ã€‚æ— é¡»å‰ç¼€ï¼Œä¹Ÿæ— é¡»ç¼–å†™é¢å¤–çš„å£°æ˜æ–‡ä»¶ã€‚</p>

<p><em>main.ts</em></p>
<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">data</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./bar.json</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div></div>

<p>å½“å°è¯•ç¼–è¯‘ä¸Šé¢ä»£ç æ—¶ï¼Œä½ ä¼šå¾—åˆ°å¦‚ä¸‹çš„æŠ¥é”™ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>tsc
error TS5055: Cannot write file <span class="s1">'/Users/wayou/Documents/dev/github/ts-wildcard-module/bar.json'</span> because it would overwrite input file.
</code></pre></div></div>

<p>å› ä¸ºç¼–è¯‘å JSON æ–‡ä»¶ä¹Ÿä¼šæœ‰ä¸€ä»½åŒåçš„äº§å‡ºï¼Œåœ¨æ²¡æœ‰æŒ‡å®šç¼–è¯‘è¾“å‡ºç›®å½•çš„æƒ…å†µä¸‹ï¼Œ tsc é»˜è®¤è¾“å‡ºåˆ°å½“å‰ç›®å½•ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸Šé¢ JSON æ–‡ä»¶ä¼šè¢«è¦†ç›–çš„æç¤ºã€‚æ‰€ä»¥è§£å†³åŠæ³•å°±æ˜¯æ·»åŠ è¾“å‡ºç›®å½•çš„é…ç½®ã€‚</p>

<p><em>tsconfig.json</em></p>
<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">{</span>
  "compilerOptions": {
    "target": "es5",
    "module": "commonjs",
    "resolveJsonModule": true,
<span class="gi">+    "outDir": "dist"
</span>  }
<span class="err">}</span>
</code></pre></div></div>

<p>å†æ¬¡ç¼–è¯‘åå¯æ­£å¸¸è¿è¡Œã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>tsc
<span class="nv">$ </span>node dist/main.js
<span class="o">{</span> data: <span class="s1">'blah'</span> <span class="o">}</span>
</code></pre></div></div>

<p>é…åˆç€ <code class="language-plaintext highlighter-rouge">esModuleInterop</code> é€‰é¡¹å¯ä»¥è®©å¯¼å…¥æ›´åŠ ç®€æ´ã€‚</p>

<p><em>tsconfig.json</em></p>
<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">{</span>
  "compilerOptions": {
    "target": "es5",
    "module": "commonjs",
<span class="gi">+    "esModuleInterop": true,
</span>    "resolveJsonModule": true,
    "outDir": "dist"
  }
<span class="err">}</span>
</code></pre></div></div>

<p><em>main.ts</em></p>
<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">- import * as data from "./bar.json";
</span><span class="gi">+ import data from "./bar.json";
</span><span class="p">console.log(data);
</span></code></pre></div></div>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>ä¸€èˆ¬é¡¹ç›®ä¸­éƒ½ä½¿ç”¨ä¸“é—¨çš„æ‰“åŒ…å·¥å…·æ¯”å¦‚ Webpackï¼ŒParcel ç­‰ï¼Œèµ„æºçš„è§£æåŠ è½½éƒ½ä¼šè¢«å¾ˆå¥½åœ°å¤„ç†ã€‚åªæ˜¯æˆ‘ä»¬éœ€è¦è§£å†³ TypeScipt æ¨¡å—è§£ææŠ¥é”™çš„é—®é¢˜ï¼Œæ­¤æ—¶å¯é€šè¿‡å¯¹ç›¸åº”æ–‡ä»¶ç¼–å†™å£°æ˜æ–‡ä»¶çš„æ–¹å¼ã€‚</p>

<h2 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æº</h2>

<ul>
  <li><a href="https://www.typescriptlang.org/docs/handbook/modules.html">Wildcard module declarations</a></li>
</ul>


  </div><a class="u-url" href="/2019/04/14/TypeScript-%E4%B8%AD%E9%9D%9E%E4%BB%A3%E7%A0%81%E6%A8%A1%E5%9D%97%E7%9A%84%E5%AF%BC%E5%85%A5.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</li><li><a class="u-email" href="mailto:liuwayong@gmail.com">liuwayong@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>notes about the coding life</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
