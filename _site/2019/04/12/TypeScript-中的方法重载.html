<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>TypeScript ä¸­çš„æ–¹æ³•é‡è½½ | ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="TypeScript ä¸­çš„æ–¹æ³•é‡è½½" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="TypeScript ä¸­çš„æ–¹æ³•é‡è½½ æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰åœ¨ä¼ ç»Ÿçš„é™æ€ç±»å‹è¯­è¨€ä¸­æ˜¯å¾ˆå¸¸è§çš„ã€‚JavaScript ä½œä¸ºåŠ¨æ€è¯­è¨€ï¼Œ æ˜¯æ²¡æœ‰é‡è½½è¿™ä¸€è¯´çš„ã€‚ä¸€æ˜¯å®ƒçš„å‚æ•°æ²¡æœ‰ç±»å‹çš„åŒºåˆ†ï¼ŒäºŒæ˜¯å¯¹å‚æ•°ä¸ªæ•°ä¹Ÿæ²¡æœ‰æ£€æŸ¥ã€‚è™½ç„¶è¯­è¨€å±‚é¢æ— æ³•è‡ªåŠ¨è¿›è¡Œé‡è½½ï¼Œä½†å€ŸåŠ©å…¶åŠ¨æ€çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ£€æŸ¥å…¥å‚çš„ç±»å‹ï¼Œæˆ–è€…é€šè¿‡ arguments è·å–åˆ°å‚æ•°ä¸ªæ•°ï¼Œä»è€Œå®ç°æ ¹æ®ä¸åŒçš„å…¥å‚åšä¸åŒçš„æ“ä½œã€‚ æ¯”å¦‚æœ‰ä¸€ä¸ªè·å–èŠå¤©æ¶ˆæ¯çš„æ–¹æ³•ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°ä»æ•°ç»„ä¸­æŸ¥æ‰¾æ•°æ®ã€‚å¦‚æœå…¥å‚ä¸ºæ•°å­—ï¼Œåˆ™è®¤ä¸ºæ˜¯ idï¼Œç„¶åä»æ•°æ®æºä¸­æ‰¾å¯¹åº” id çš„æ•°æ®å¹¶è¿”å›ï¼Œå¦åˆ™å½“æˆç±»å‹ï¼Œè¿”å›è¿™ä¸€ç±»å‹çš„æ¶ˆæ¯ã€‚ function getMessage(query) { if (typeof query === &quot;nunber&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query); } } TypeScript ä¸­ï¼Œå‡å¦‚æˆ‘ä»¬çš„æ¶ˆæ¯æ•°æ®ä¸ºå¦‚ä¸‹ç»“æ„ï¼š type MessageType = &quot;string&quot; | &quot;image&quot; | &quot;audio&quot;; type Message = { id: number; type: MessageType; content: string; }; ä¸Šé¢è·å–æ•°æ®çš„æ–¹æ³•ç­‰ä»·äºï¼š function getMessage( query: number | MessageType ): Message[] | Message | undefined { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query); } } è¿™æ ·åšä¸€æ˜¯ç±»å‹ä¹¦å†™ä¸Šæ¯”è¾ƒä¸‘é™‹ï¼ŒäºŒæ˜¯æ²¡æœ‰å‘æŒ¥å‡º TypeScript ç±»å‹æ£€æŸ¥çš„ä¼˜åŠ¿ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯å¯ä»¥æ ¹æ®å…¥å‚çš„ç±»å‹æ˜ç¡®çŸ¥é“è¿”å›çš„ç±»å‹çš„ï¼Œå³å¦‚æœä¼ å…¥çš„æ˜¯ idï¼Œè¿”å›çš„æ˜¯å•ä¸ªæ•°æ®æˆ–undefinedï¼Œå¦‚æœæ˜¯æ ¹æ®ç±»å‹æŸ¥æ‰¾ï¼Œè¿”å›çš„æ˜¯æ•°ç»„ã€‚è€Œç°åœ¨è°ƒç”¨æ–¹æ³•åï¼Œå¾—åˆ°çš„ç±»å‹å¤ªè¿‡å®½æ³›ï¼Œè¿™å’Œä½¿ç”¨ any åšä¸ºè¿”å›æ²¡å¤šå¤§å·®åˆ«ã€‚ å‡½æ•°è¿”å›ç±»å‹ä¸å¤Ÿç´§å‡‘ å› ä¸ºç±»å‹çš„ä¸æ˜æœ—ï¼Œè¿”å›çš„ç»“æœéƒ½ä¸èƒ½ç›´æ¥æ“ä½œï¼Œéœ€è¦è¿›è¡Œç±»å‹è½¬æ¢åæ‰èƒ½ç»§ç»­ã€‚ const result1 = getMessage(&quot;audio&quot;); /** ä¸èƒ½ç›´æ¥å¯¹ result1 è°ƒç”¨æ•°ç»„æ–¹æ³• */ console.log((result1 as Message[]).length); const result2 = getMessage(1); if (result2) { /** ä¸èƒ½å¯¹ result2 ç›´æ¥è®¿é—®æ¶ˆæ¯å¯¹è±¡ä¸­çš„å±æ€§ */ console.log((result2 as Message).content); } é‡è½½çš„å®ç° è¿™æ—¶å€™å¯é€šè¿‡æä¾›å¤šä¸ªå‡½æ•°ç±»å‹çš„å£°æ˜æ¥è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæœ€åå¾—åˆ°çš„ç»“æœå°±æ˜¯é—´æ¥å®ç°äº†å‡½æ•°çš„é‡è½½ã€‚å½“ç„¶è¿™ä¸ªé‡è½½åªæ˜¯ TypeScript ç¼–è¯‘æ—¶çš„ã€‚ function getMessage(id: number): Message | undefined; function getMessage(type: MessageType): Message[]; function getMessage(query: any): any { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query); } } è¿™æ ·æ”¹é€ åï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨çš„æ—¶å€™ç›´æ¥å°±ä¼šæœ‰é‡è½½çš„æç¤ºã€‚ å®ç° TypeScript çš„é‡è½½åè°ƒç”¨æ—¶çš„è‡ªåŠ¨æç¤º å¹¶ä¸”å¾—åˆ°çš„ç»“æœç±»å‹æ˜¯é‡è½½æ–¹æ³•ä¸­æŒ‡å®šçš„å…¥å‚ä¸è¿”å›çš„ç»„åˆï¼Œåœ¨å¯¹ç»“æœè¿›è¡Œä½¿ç”¨æ—¶ï¼Œæ— é¡»å†è¿›è¡Œç±»å‹è½¬æ¢ã€‚ const result1 = getMessage(&quot;audio&quot;); /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result1.length); const result2 = getMessage(1); if (result2) { /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result2.content); } è¿™é‡Œéœ€è¦ç†è§£çš„æ˜¯ï¼Œä¸Šé¢æ·»åŠ çš„å‡½æ•°ç±»å‹ä»…ä½œä¸º TypeScript åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨çš„ï¼Œå®ƒä¸æ˜¯çœŸçš„å®ç°åƒä¼ ç»Ÿé™æ€ç±»å‹è¯­è¨€é‚£æ ·çš„é‡è½½ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ç¼–è¯‘åä»£ç çš„è¾“å‡ºã€‚å®é™…è¿è¡Œæ—¶ä»ç„¶æ˜¯ä¸å¸¦é‡è½½çš„ JavaScript ç‰ˆæœ¬ã€‚ ç¼–è¯‘åçš„ä»£ç  ```js &quot;use strict&quot;; var data = [ { id: 0, type: &quot;string&quot;, content: &quot;hello&quot; }, { id: 1, type: &quot;image&quot;, content: &quot;url_for_iamge&quot; }, { id: 2, type: &quot;string&quot;, content: &quot;world&quot; } ]; function getMessage(query) { if (typeof query === &quot;number&quot;) { return data.find(function (message) { return message.id === query; }); } else { return data.filter(function (message) { return message.type === query; }); } } var result1 = getMessage(&quot;audio&quot;); /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result1.length); var result2 = getMessage(1); if (result2) { /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result2.content); } ``` ä½†è¿™ä¸€ç‚¹ä¹Ÿä¸å½±å“æˆ‘ä»¬åœ¨ TypeScript ä¸­ä½¿ç”¨è¿™ç§å‡çš„é‡è½½ã€‚ å¯é€‰å‚æ•° å¦ä¸€ä¸ª TypeScript é‡è½½çš„åœºæ™¯ã€‚è¿˜æ˜¯ä¸Šé¢è·å–æ¶ˆæ¯æ•°æ®çš„æ–¹æ³•ï¼Œå› ä¸ºæ ¹æ®ç±»å‹æŸ¥æ‰¾æ¶ˆæ¯æ—¶ï¼Œä¼šè¿”å›åŒç±»å‹æ¶ˆæ¯çš„ä¸€ä¸ªæ•°ç»„ã€‚æ­¤æ—¶æˆ‘ä»¬æƒ³åŠ ä¸€ä¸ªå‚æ•°å®ç°åªè¿”å›ç»“æœä¸­å‰å‡ ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œå¦‚ä¸‹çš„æ”¹é€ ï¼š function getMessage(id: number): Message | undefined; +function getMessage(type: MessageType, count?: number): Message[]; +function getMessage(query: any, count = 10): any { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { + return data.filter(message =&gt; message.type === query).splice(0, count); } } é€šè¿‡é‡è½½ï¼Œè¿™ä¸ªæ–°å¢çš„å‚æ•°å¾ˆå®¹æ˜“å®ç°åªé’ˆå¯¹å…¥å‚ MessageType æ—¶ï¼Œè¿™æ ·å¦‚æœæˆ‘ä»¬æœ‰å¦‚ä¸‹çš„è°ƒç”¨ï¼Œä¼šå¾—åˆ°ç¼–è¯‘æ—¶çš„æŠ¥é”™ï¼š /** ğŸš¨ Argument of type &#39;1&#39; is not assignable to parameter of type &#39;MessageType&#39; */ getMessage(1,10); è€Œéé‡è½½çš„ç‰ˆæœ¬æ˜¯äº«å—ä¸åˆ°ä¸Šé¢æåˆ°çš„ç±»å‹ä¼˜åŠ¿çš„ã€‚ function getMessage( query: number | MessageType, count = 10 ): Message[] | Message | undefined { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query).splice(0, count); } } /** âœ… ojbk, ä¸é”™æŠ¥ */ getMessage(1, 10); é‡è½½è¿‡ç¨‹ TypeScript é‡è½½çš„è¿‡ç¨‹æ˜¯ï¼Œæ‹¿ä¼ å…¥çš„å‚æ•°å’Œé‡è½½çš„æ–¹æ³•ç­¾ååˆ—è¡¨ä¸­ç”±ä¸Šå¾€ä¸‹é€ä¸ªåŒ¹é…ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå®Œå…¨åŒ¹é…çš„å‡½æ•°ç­¾åï¼Œå¦åˆ™æŠ¥é”™ã€‚æ‰€ä»¥æ¨èçš„åšæ³•æ˜¯å°†ç­¾åæ›´åŠ å…·ä½“çš„é‡è½½æ”¾ä¸Šé¢ï¼Œä¸é‚£ä¹ˆå…·ä½“çš„æ”¾åé¢ã€‚ /** âœ…*/ function getMessage(type: MessageType, count?: number): Message[]; function getMessage(id: number): Message | undefined; /** ğŸš¨*/ function getMessage(id: number): Message | undefined; function getMessage(type: MessageType, count?: number): Message[]; åƒä¸Šé¢ç¤ºä¾‹ä¸­æ­£ç¡®åšæ³•è¿™æ ·ï¼Œå¦‚æœè¯´å…¥å‚ä¸ªæ•°åªæœ‰ä¸€ä¸ªï¼Œé‚£å¯ä»¥ç›´æ¥è·³è¿‡ç¬¬ä¸€ä¸ªå‡½æ•°ç­¾åï¼Œæ— é¡»åšå…¥å‚ç±»å‹çš„åˆ¤æ–­ã€‚ ç›¸å…³èµ„æº TypeScript Handbook - Functions - Overloads Typescript method overloading" />
<meta property="og:description" content="TypeScript ä¸­çš„æ–¹æ³•é‡è½½ æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰åœ¨ä¼ ç»Ÿçš„é™æ€ç±»å‹è¯­è¨€ä¸­æ˜¯å¾ˆå¸¸è§çš„ã€‚JavaScript ä½œä¸ºåŠ¨æ€è¯­è¨€ï¼Œ æ˜¯æ²¡æœ‰é‡è½½è¿™ä¸€è¯´çš„ã€‚ä¸€æ˜¯å®ƒçš„å‚æ•°æ²¡æœ‰ç±»å‹çš„åŒºåˆ†ï¼ŒäºŒæ˜¯å¯¹å‚æ•°ä¸ªæ•°ä¹Ÿæ²¡æœ‰æ£€æŸ¥ã€‚è™½ç„¶è¯­è¨€å±‚é¢æ— æ³•è‡ªåŠ¨è¿›è¡Œé‡è½½ï¼Œä½†å€ŸåŠ©å…¶åŠ¨æ€çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ£€æŸ¥å…¥å‚çš„ç±»å‹ï¼Œæˆ–è€…é€šè¿‡ arguments è·å–åˆ°å‚æ•°ä¸ªæ•°ï¼Œä»è€Œå®ç°æ ¹æ®ä¸åŒçš„å…¥å‚åšä¸åŒçš„æ“ä½œã€‚ æ¯”å¦‚æœ‰ä¸€ä¸ªè·å–èŠå¤©æ¶ˆæ¯çš„æ–¹æ³•ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°ä»æ•°ç»„ä¸­æŸ¥æ‰¾æ•°æ®ã€‚å¦‚æœå…¥å‚ä¸ºæ•°å­—ï¼Œåˆ™è®¤ä¸ºæ˜¯ idï¼Œç„¶åä»æ•°æ®æºä¸­æ‰¾å¯¹åº” id çš„æ•°æ®å¹¶è¿”å›ï¼Œå¦åˆ™å½“æˆç±»å‹ï¼Œè¿”å›è¿™ä¸€ç±»å‹çš„æ¶ˆæ¯ã€‚ function getMessage(query) { if (typeof query === &quot;nunber&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query); } } TypeScript ä¸­ï¼Œå‡å¦‚æˆ‘ä»¬çš„æ¶ˆæ¯æ•°æ®ä¸ºå¦‚ä¸‹ç»“æ„ï¼š type MessageType = &quot;string&quot; | &quot;image&quot; | &quot;audio&quot;; type Message = { id: number; type: MessageType; content: string; }; ä¸Šé¢è·å–æ•°æ®çš„æ–¹æ³•ç­‰ä»·äºï¼š function getMessage( query: number | MessageType ): Message[] | Message | undefined { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query); } } è¿™æ ·åšä¸€æ˜¯ç±»å‹ä¹¦å†™ä¸Šæ¯”è¾ƒä¸‘é™‹ï¼ŒäºŒæ˜¯æ²¡æœ‰å‘æŒ¥å‡º TypeScript ç±»å‹æ£€æŸ¥çš„ä¼˜åŠ¿ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯å¯ä»¥æ ¹æ®å…¥å‚çš„ç±»å‹æ˜ç¡®çŸ¥é“è¿”å›çš„ç±»å‹çš„ï¼Œå³å¦‚æœä¼ å…¥çš„æ˜¯ idï¼Œè¿”å›çš„æ˜¯å•ä¸ªæ•°æ®æˆ–undefinedï¼Œå¦‚æœæ˜¯æ ¹æ®ç±»å‹æŸ¥æ‰¾ï¼Œè¿”å›çš„æ˜¯æ•°ç»„ã€‚è€Œç°åœ¨è°ƒç”¨æ–¹æ³•åï¼Œå¾—åˆ°çš„ç±»å‹å¤ªè¿‡å®½æ³›ï¼Œè¿™å’Œä½¿ç”¨ any åšä¸ºè¿”å›æ²¡å¤šå¤§å·®åˆ«ã€‚ å‡½æ•°è¿”å›ç±»å‹ä¸å¤Ÿç´§å‡‘ å› ä¸ºç±»å‹çš„ä¸æ˜æœ—ï¼Œè¿”å›çš„ç»“æœéƒ½ä¸èƒ½ç›´æ¥æ“ä½œï¼Œéœ€è¦è¿›è¡Œç±»å‹è½¬æ¢åæ‰èƒ½ç»§ç»­ã€‚ const result1 = getMessage(&quot;audio&quot;); /** ä¸èƒ½ç›´æ¥å¯¹ result1 è°ƒç”¨æ•°ç»„æ–¹æ³• */ console.log((result1 as Message[]).length); const result2 = getMessage(1); if (result2) { /** ä¸èƒ½å¯¹ result2 ç›´æ¥è®¿é—®æ¶ˆæ¯å¯¹è±¡ä¸­çš„å±æ€§ */ console.log((result2 as Message).content); } é‡è½½çš„å®ç° è¿™æ—¶å€™å¯é€šè¿‡æä¾›å¤šä¸ªå‡½æ•°ç±»å‹çš„å£°æ˜æ¥è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæœ€åå¾—åˆ°çš„ç»“æœå°±æ˜¯é—´æ¥å®ç°äº†å‡½æ•°çš„é‡è½½ã€‚å½“ç„¶è¿™ä¸ªé‡è½½åªæ˜¯ TypeScript ç¼–è¯‘æ—¶çš„ã€‚ function getMessage(id: number): Message | undefined; function getMessage(type: MessageType): Message[]; function getMessage(query: any): any { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query); } } è¿™æ ·æ”¹é€ åï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨çš„æ—¶å€™ç›´æ¥å°±ä¼šæœ‰é‡è½½çš„æç¤ºã€‚ å®ç° TypeScript çš„é‡è½½åè°ƒç”¨æ—¶çš„è‡ªåŠ¨æç¤º å¹¶ä¸”å¾—åˆ°çš„ç»“æœç±»å‹æ˜¯é‡è½½æ–¹æ³•ä¸­æŒ‡å®šçš„å…¥å‚ä¸è¿”å›çš„ç»„åˆï¼Œåœ¨å¯¹ç»“æœè¿›è¡Œä½¿ç”¨æ—¶ï¼Œæ— é¡»å†è¿›è¡Œç±»å‹è½¬æ¢ã€‚ const result1 = getMessage(&quot;audio&quot;); /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result1.length); const result2 = getMessage(1); if (result2) { /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result2.content); } è¿™é‡Œéœ€è¦ç†è§£çš„æ˜¯ï¼Œä¸Šé¢æ·»åŠ çš„å‡½æ•°ç±»å‹ä»…ä½œä¸º TypeScript åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨çš„ï¼Œå®ƒä¸æ˜¯çœŸçš„å®ç°åƒä¼ ç»Ÿé™æ€ç±»å‹è¯­è¨€é‚£æ ·çš„é‡è½½ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ç¼–è¯‘åä»£ç çš„è¾“å‡ºã€‚å®é™…è¿è¡Œæ—¶ä»ç„¶æ˜¯ä¸å¸¦é‡è½½çš„ JavaScript ç‰ˆæœ¬ã€‚ ç¼–è¯‘åçš„ä»£ç  ```js &quot;use strict&quot;; var data = [ { id: 0, type: &quot;string&quot;, content: &quot;hello&quot; }, { id: 1, type: &quot;image&quot;, content: &quot;url_for_iamge&quot; }, { id: 2, type: &quot;string&quot;, content: &quot;world&quot; } ]; function getMessage(query) { if (typeof query === &quot;number&quot;) { return data.find(function (message) { return message.id === query; }); } else { return data.filter(function (message) { return message.type === query; }); } } var result1 = getMessage(&quot;audio&quot;); /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result1.length); var result2 = getMessage(1); if (result2) { /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result2.content); } ``` ä½†è¿™ä¸€ç‚¹ä¹Ÿä¸å½±å“æˆ‘ä»¬åœ¨ TypeScript ä¸­ä½¿ç”¨è¿™ç§å‡çš„é‡è½½ã€‚ å¯é€‰å‚æ•° å¦ä¸€ä¸ª TypeScript é‡è½½çš„åœºæ™¯ã€‚è¿˜æ˜¯ä¸Šé¢è·å–æ¶ˆæ¯æ•°æ®çš„æ–¹æ³•ï¼Œå› ä¸ºæ ¹æ®ç±»å‹æŸ¥æ‰¾æ¶ˆæ¯æ—¶ï¼Œä¼šè¿”å›åŒç±»å‹æ¶ˆæ¯çš„ä¸€ä¸ªæ•°ç»„ã€‚æ­¤æ—¶æˆ‘ä»¬æƒ³åŠ ä¸€ä¸ªå‚æ•°å®ç°åªè¿”å›ç»“æœä¸­å‰å‡ ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œå¦‚ä¸‹çš„æ”¹é€ ï¼š function getMessage(id: number): Message | undefined; +function getMessage(type: MessageType, count?: number): Message[]; +function getMessage(query: any, count = 10): any { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { + return data.filter(message =&gt; message.type === query).splice(0, count); } } é€šè¿‡é‡è½½ï¼Œè¿™ä¸ªæ–°å¢çš„å‚æ•°å¾ˆå®¹æ˜“å®ç°åªé’ˆå¯¹å…¥å‚ MessageType æ—¶ï¼Œè¿™æ ·å¦‚æœæˆ‘ä»¬æœ‰å¦‚ä¸‹çš„è°ƒç”¨ï¼Œä¼šå¾—åˆ°ç¼–è¯‘æ—¶çš„æŠ¥é”™ï¼š /** ğŸš¨ Argument of type &#39;1&#39; is not assignable to parameter of type &#39;MessageType&#39; */ getMessage(1,10); è€Œéé‡è½½çš„ç‰ˆæœ¬æ˜¯äº«å—ä¸åˆ°ä¸Šé¢æåˆ°çš„ç±»å‹ä¼˜åŠ¿çš„ã€‚ function getMessage( query: number | MessageType, count = 10 ): Message[] | Message | undefined { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query).splice(0, count); } } /** âœ… ojbk, ä¸é”™æŠ¥ */ getMessage(1, 10); é‡è½½è¿‡ç¨‹ TypeScript é‡è½½çš„è¿‡ç¨‹æ˜¯ï¼Œæ‹¿ä¼ å…¥çš„å‚æ•°å’Œé‡è½½çš„æ–¹æ³•ç­¾ååˆ—è¡¨ä¸­ç”±ä¸Šå¾€ä¸‹é€ä¸ªåŒ¹é…ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå®Œå…¨åŒ¹é…çš„å‡½æ•°ç­¾åï¼Œå¦åˆ™æŠ¥é”™ã€‚æ‰€ä»¥æ¨èçš„åšæ³•æ˜¯å°†ç­¾åæ›´åŠ å…·ä½“çš„é‡è½½æ”¾ä¸Šé¢ï¼Œä¸é‚£ä¹ˆå…·ä½“çš„æ”¾åé¢ã€‚ /** âœ…*/ function getMessage(type: MessageType, count?: number): Message[]; function getMessage(id: number): Message | undefined; /** ğŸš¨*/ function getMessage(id: number): Message | undefined; function getMessage(type: MessageType, count?: number): Message[]; åƒä¸Šé¢ç¤ºä¾‹ä¸­æ­£ç¡®åšæ³•è¿™æ ·ï¼Œå¦‚æœè¯´å…¥å‚ä¸ªæ•°åªæœ‰ä¸€ä¸ªï¼Œé‚£å¯ä»¥ç›´æ¥è·³è¿‡ç¬¬ä¸€ä¸ªå‡½æ•°ç­¾åï¼Œæ— é¡»åšå…¥å‚ç±»å‹çš„åˆ¤æ–­ã€‚ ç›¸å…³èµ„æº TypeScript Handbook - Functions - Overloads Typescript method overloading" />
<link rel="canonical" href="http://localhost:4000/2019/04/12/TypeScript-%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD.html" />
<meta property="og:url" content="http://localhost:4000/2019/04/12/TypeScript-%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD.html" />
<meta property="og:site_name" content="ç‰›ã•ã‚“ã®éƒ¨è½æ ¼" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-12T23:04:00+08:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2019/04/12/TypeScript-%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD.html","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/04/12/TypeScript-%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD.html"},"description":"TypeScript ä¸­çš„æ–¹æ³•é‡è½½ æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰åœ¨ä¼ ç»Ÿçš„é™æ€ç±»å‹è¯­è¨€ä¸­æ˜¯å¾ˆå¸¸è§çš„ã€‚JavaScript ä½œä¸ºåŠ¨æ€è¯­è¨€ï¼Œ æ˜¯æ²¡æœ‰é‡è½½è¿™ä¸€è¯´çš„ã€‚ä¸€æ˜¯å®ƒçš„å‚æ•°æ²¡æœ‰ç±»å‹çš„åŒºåˆ†ï¼ŒäºŒæ˜¯å¯¹å‚æ•°ä¸ªæ•°ä¹Ÿæ²¡æœ‰æ£€æŸ¥ã€‚è™½ç„¶è¯­è¨€å±‚é¢æ— æ³•è‡ªåŠ¨è¿›è¡Œé‡è½½ï¼Œä½†å€ŸåŠ©å…¶åŠ¨æ€çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ£€æŸ¥å…¥å‚çš„ç±»å‹ï¼Œæˆ–è€…é€šè¿‡ arguments è·å–åˆ°å‚æ•°ä¸ªæ•°ï¼Œä»è€Œå®ç°æ ¹æ®ä¸åŒçš„å…¥å‚åšä¸åŒçš„æ“ä½œã€‚ æ¯”å¦‚æœ‰ä¸€ä¸ªè·å–èŠå¤©æ¶ˆæ¯çš„æ–¹æ³•ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°ä»æ•°ç»„ä¸­æŸ¥æ‰¾æ•°æ®ã€‚å¦‚æœå…¥å‚ä¸ºæ•°å­—ï¼Œåˆ™è®¤ä¸ºæ˜¯ idï¼Œç„¶åä»æ•°æ®æºä¸­æ‰¾å¯¹åº” id çš„æ•°æ®å¹¶è¿”å›ï¼Œå¦åˆ™å½“æˆç±»å‹ï¼Œè¿”å›è¿™ä¸€ç±»å‹çš„æ¶ˆæ¯ã€‚ function getMessage(query) { if (typeof query === &quot;nunber&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query); } } TypeScript ä¸­ï¼Œå‡å¦‚æˆ‘ä»¬çš„æ¶ˆæ¯æ•°æ®ä¸ºå¦‚ä¸‹ç»“æ„ï¼š type MessageType = &quot;string&quot; | &quot;image&quot; | &quot;audio&quot;; type Message = { id: number; type: MessageType; content: string; }; ä¸Šé¢è·å–æ•°æ®çš„æ–¹æ³•ç­‰ä»·äºï¼š function getMessage( query: number | MessageType ): Message[] | Message | undefined { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query); } } è¿™æ ·åšä¸€æ˜¯ç±»å‹ä¹¦å†™ä¸Šæ¯”è¾ƒä¸‘é™‹ï¼ŒäºŒæ˜¯æ²¡æœ‰å‘æŒ¥å‡º TypeScript ç±»å‹æ£€æŸ¥çš„ä¼˜åŠ¿ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯å¯ä»¥æ ¹æ®å…¥å‚çš„ç±»å‹æ˜ç¡®çŸ¥é“è¿”å›çš„ç±»å‹çš„ï¼Œå³å¦‚æœä¼ å…¥çš„æ˜¯ idï¼Œè¿”å›çš„æ˜¯å•ä¸ªæ•°æ®æˆ–undefinedï¼Œå¦‚æœæ˜¯æ ¹æ®ç±»å‹æŸ¥æ‰¾ï¼Œè¿”å›çš„æ˜¯æ•°ç»„ã€‚è€Œç°åœ¨è°ƒç”¨æ–¹æ³•åï¼Œå¾—åˆ°çš„ç±»å‹å¤ªè¿‡å®½æ³›ï¼Œè¿™å’Œä½¿ç”¨ any åšä¸ºè¿”å›æ²¡å¤šå¤§å·®åˆ«ã€‚ å‡½æ•°è¿”å›ç±»å‹ä¸å¤Ÿç´§å‡‘ å› ä¸ºç±»å‹çš„ä¸æ˜æœ—ï¼Œè¿”å›çš„ç»“æœéƒ½ä¸èƒ½ç›´æ¥æ“ä½œï¼Œéœ€è¦è¿›è¡Œç±»å‹è½¬æ¢åæ‰èƒ½ç»§ç»­ã€‚ const result1 = getMessage(&quot;audio&quot;); /** ä¸èƒ½ç›´æ¥å¯¹ result1 è°ƒç”¨æ•°ç»„æ–¹æ³• */ console.log((result1 as Message[]).length); const result2 = getMessage(1); if (result2) { /** ä¸èƒ½å¯¹ result2 ç›´æ¥è®¿é—®æ¶ˆæ¯å¯¹è±¡ä¸­çš„å±æ€§ */ console.log((result2 as Message).content); } é‡è½½çš„å®ç° è¿™æ—¶å€™å¯é€šè¿‡æä¾›å¤šä¸ªå‡½æ•°ç±»å‹çš„å£°æ˜æ¥è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæœ€åå¾—åˆ°çš„ç»“æœå°±æ˜¯é—´æ¥å®ç°äº†å‡½æ•°çš„é‡è½½ã€‚å½“ç„¶è¿™ä¸ªé‡è½½åªæ˜¯ TypeScript ç¼–è¯‘æ—¶çš„ã€‚ function getMessage(id: number): Message | undefined; function getMessage(type: MessageType): Message[]; function getMessage(query: any): any { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query); } } è¿™æ ·æ”¹é€ åï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨çš„æ—¶å€™ç›´æ¥å°±ä¼šæœ‰é‡è½½çš„æç¤ºã€‚ å®ç° TypeScript çš„é‡è½½åè°ƒç”¨æ—¶çš„è‡ªåŠ¨æç¤º å¹¶ä¸”å¾—åˆ°çš„ç»“æœç±»å‹æ˜¯é‡è½½æ–¹æ³•ä¸­æŒ‡å®šçš„å…¥å‚ä¸è¿”å›çš„ç»„åˆï¼Œåœ¨å¯¹ç»“æœè¿›è¡Œä½¿ç”¨æ—¶ï¼Œæ— é¡»å†è¿›è¡Œç±»å‹è½¬æ¢ã€‚ const result1 = getMessage(&quot;audio&quot;); /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result1.length); const result2 = getMessage(1); if (result2) { /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result2.content); } è¿™é‡Œéœ€è¦ç†è§£çš„æ˜¯ï¼Œä¸Šé¢æ·»åŠ çš„å‡½æ•°ç±»å‹ä»…ä½œä¸º TypeScript åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨çš„ï¼Œå®ƒä¸æ˜¯çœŸçš„å®ç°åƒä¼ ç»Ÿé™æ€ç±»å‹è¯­è¨€é‚£æ ·çš„é‡è½½ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ç¼–è¯‘åä»£ç çš„è¾“å‡ºã€‚å®é™…è¿è¡Œæ—¶ä»ç„¶æ˜¯ä¸å¸¦é‡è½½çš„ JavaScript ç‰ˆæœ¬ã€‚ ç¼–è¯‘åçš„ä»£ç  ```js &quot;use strict&quot;; var data = [ { id: 0, type: &quot;string&quot;, content: &quot;hello&quot; }, { id: 1, type: &quot;image&quot;, content: &quot;url_for_iamge&quot; }, { id: 2, type: &quot;string&quot;, content: &quot;world&quot; } ]; function getMessage(query) { if (typeof query === &quot;number&quot;) { return data.find(function (message) { return message.id === query; }); } else { return data.filter(function (message) { return message.type === query; }); } } var result1 = getMessage(&quot;audio&quot;); /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result1.length); var result2 = getMessage(1); if (result2) { /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */ console.log(result2.content); } ``` ä½†è¿™ä¸€ç‚¹ä¹Ÿä¸å½±å“æˆ‘ä»¬åœ¨ TypeScript ä¸­ä½¿ç”¨è¿™ç§å‡çš„é‡è½½ã€‚ å¯é€‰å‚æ•° å¦ä¸€ä¸ª TypeScript é‡è½½çš„åœºæ™¯ã€‚è¿˜æ˜¯ä¸Šé¢è·å–æ¶ˆæ¯æ•°æ®çš„æ–¹æ³•ï¼Œå› ä¸ºæ ¹æ®ç±»å‹æŸ¥æ‰¾æ¶ˆæ¯æ—¶ï¼Œä¼šè¿”å›åŒç±»å‹æ¶ˆæ¯çš„ä¸€ä¸ªæ•°ç»„ã€‚æ­¤æ—¶æˆ‘ä»¬æƒ³åŠ ä¸€ä¸ªå‚æ•°å®ç°åªè¿”å›ç»“æœä¸­å‰å‡ ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œå¦‚ä¸‹çš„æ”¹é€ ï¼š function getMessage(id: number): Message | undefined; +function getMessage(type: MessageType, count?: number): Message[]; +function getMessage(query: any, count = 10): any { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { + return data.filter(message =&gt; message.type === query).splice(0, count); } } é€šè¿‡é‡è½½ï¼Œè¿™ä¸ªæ–°å¢çš„å‚æ•°å¾ˆå®¹æ˜“å®ç°åªé’ˆå¯¹å…¥å‚ MessageType æ—¶ï¼Œè¿™æ ·å¦‚æœæˆ‘ä»¬æœ‰å¦‚ä¸‹çš„è°ƒç”¨ï¼Œä¼šå¾—åˆ°ç¼–è¯‘æ—¶çš„æŠ¥é”™ï¼š /** ğŸš¨ Argument of type &#39;1&#39; is not assignable to parameter of type &#39;MessageType&#39; */ getMessage(1,10); è€Œéé‡è½½çš„ç‰ˆæœ¬æ˜¯äº«å—ä¸åˆ°ä¸Šé¢æåˆ°çš„ç±»å‹ä¼˜åŠ¿çš„ã€‚ function getMessage( query: number | MessageType, count = 10 ): Message[] | Message | undefined { if (typeof query === &quot;number&quot;) { return data.find(message =&gt; message.id === query); } else { return data.filter(message =&gt; message.type === query).splice(0, count); } } /** âœ… ojbk, ä¸é”™æŠ¥ */ getMessage(1, 10); é‡è½½è¿‡ç¨‹ TypeScript é‡è½½çš„è¿‡ç¨‹æ˜¯ï¼Œæ‹¿ä¼ å…¥çš„å‚æ•°å’Œé‡è½½çš„æ–¹æ³•ç­¾ååˆ—è¡¨ä¸­ç”±ä¸Šå¾€ä¸‹é€ä¸ªåŒ¹é…ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå®Œå…¨åŒ¹é…çš„å‡½æ•°ç­¾åï¼Œå¦åˆ™æŠ¥é”™ã€‚æ‰€ä»¥æ¨èçš„åšæ³•æ˜¯å°†ç­¾åæ›´åŠ å…·ä½“çš„é‡è½½æ”¾ä¸Šé¢ï¼Œä¸é‚£ä¹ˆå…·ä½“çš„æ”¾åé¢ã€‚ /** âœ…*/ function getMessage(type: MessageType, count?: number): Message[]; function getMessage(id: number): Message | undefined; /** ğŸš¨*/ function getMessage(id: number): Message | undefined; function getMessage(type: MessageType, count?: number): Message[]; åƒä¸Šé¢ç¤ºä¾‹ä¸­æ­£ç¡®åšæ³•è¿™æ ·ï¼Œå¦‚æœè¯´å…¥å‚ä¸ªæ•°åªæœ‰ä¸€ä¸ªï¼Œé‚£å¯ä»¥ç›´æ¥è·³è¿‡ç¬¬ä¸€ä¸ªå‡½æ•°ç­¾åï¼Œæ— é¡»åšå…¥å‚ç±»å‹çš„åˆ¤æ–­ã€‚ ç›¸å…³èµ„æº TypeScript Handbook - Functions - Overloads Typescript method overloading","@type":"BlogPosting","headline":"TypeScript ä¸­çš„æ–¹æ³•é‡è½½","dateModified":"2019-04-12T23:04:00+08:00","datePublished":"2019-04-12T23:04:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="ç‰›ã•ã‚“ã®éƒ¨è½æ ¼" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">TypeScript ä¸­çš„æ–¹æ³•é‡è½½</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-04-12T23:04:00+08:00" itemprop="datePublished">Apr 12, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="typescript-ä¸­çš„æ–¹æ³•é‡è½½">TypeScript ä¸­çš„æ–¹æ³•é‡è½½</h1>

<p>æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰åœ¨ä¼ ç»Ÿçš„é™æ€ç±»å‹è¯­è¨€ä¸­æ˜¯å¾ˆå¸¸è§çš„ã€‚JavaScript ä½œä¸ºåŠ¨æ€è¯­è¨€ï¼Œ æ˜¯æ²¡æœ‰é‡è½½è¿™ä¸€è¯´çš„ã€‚ä¸€æ˜¯å®ƒçš„å‚æ•°æ²¡æœ‰ç±»å‹çš„åŒºåˆ†ï¼ŒäºŒæ˜¯å¯¹å‚æ•°ä¸ªæ•°ä¹Ÿæ²¡æœ‰æ£€æŸ¥ã€‚è™½ç„¶è¯­è¨€å±‚é¢æ— æ³•è‡ªåŠ¨è¿›è¡Œé‡è½½ï¼Œä½†å€ŸåŠ©å…¶åŠ¨æ€çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ£€æŸ¥å…¥å‚çš„ç±»å‹ï¼Œæˆ–è€…é€šè¿‡ <code class="language-plaintext highlighter-rouge">arguments</code> è·å–åˆ°å‚æ•°ä¸ªæ•°ï¼Œä»è€Œå®ç°æ ¹æ®ä¸åŒçš„å…¥å‚åšä¸åŒçš„æ“ä½œã€‚</p>

<p>æ¯”å¦‚æœ‰ä¸€ä¸ªè·å–èŠå¤©æ¶ˆæ¯çš„æ–¹æ³•ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°ä»æ•°ç»„ä¸­æŸ¥æ‰¾æ•°æ®ã€‚å¦‚æœå…¥å‚ä¸ºæ•°å­—ï¼Œåˆ™è®¤ä¸ºæ˜¯ idï¼Œç„¶åä»æ•°æ®æºä¸­æ‰¾å¯¹åº” id çš„æ•°æ®å¹¶è¿”å›ï¼Œå¦åˆ™å½“æˆç±»å‹ï¼Œè¿”å›è¿™ä¸€ç±»å‹çš„æ¶ˆæ¯ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">nunber</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">message</span> <span class="o">=&gt;</span> <span class="nx">message</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">query</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">message</span> <span class="o">=&gt;</span> <span class="nx">message</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">query</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>TypeScript ä¸­ï¼Œå‡å¦‚æˆ‘ä»¬çš„æ¶ˆæ¯æ•°æ®ä¸ºå¦‚ä¸‹ç»“æ„ï¼š</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">type</span> <span class="nx">MessageType</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">image</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">audio</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">type</span> <span class="nx">Message</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">type</span><span class="p">:</span> <span class="nx">MessageType</span><span class="p">;</span>
  <span class="nl">content</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>ä¸Šé¢è·å–æ•°æ®çš„æ–¹æ³•ç­‰ä»·äºï¼š</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span>
  <span class="nx">query</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="nx">MessageType</span>
<span class="p">):</span> <span class="nx">Message</span><span class="p">[]</span> <span class="o">|</span> <span class="nx">Message</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">number</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">message</span> <span class="o">=&gt;</span> <span class="nx">message</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">query</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">message</span> <span class="o">=&gt;</span> <span class="nx">message</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="nx">query</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>è¿™æ ·åšä¸€æ˜¯ç±»å‹ä¹¦å†™ä¸Šæ¯”è¾ƒä¸‘é™‹ï¼ŒäºŒæ˜¯æ²¡æœ‰å‘æŒ¥å‡º TypeScript ç±»å‹æ£€æŸ¥çš„ä¼˜åŠ¿ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯å¯ä»¥æ ¹æ®å…¥å‚çš„ç±»å‹æ˜ç¡®çŸ¥é“è¿”å›çš„ç±»å‹çš„ï¼Œå³å¦‚æœä¼ å…¥çš„æ˜¯ idï¼Œè¿”å›çš„æ˜¯å•ä¸ªæ•°æ®æˆ–<code class="language-plaintext highlighter-rouge">undefined</code>ï¼Œå¦‚æœæ˜¯æ ¹æ®ç±»å‹æŸ¥æ‰¾ï¼Œè¿”å›çš„æ˜¯æ•°ç»„ã€‚è€Œç°åœ¨è°ƒç”¨æ–¹æ³•åï¼Œå¾—åˆ°çš„ç±»å‹å¤ªè¿‡å®½æ³›ï¼Œè¿™å’Œä½¿ç”¨ <code class="language-plaintext highlighter-rouge">any</code> åšä¸ºè¿”å›æ²¡å¤šå¤§å·®åˆ«ã€‚</p>

<p><img src="https://user-images.githubusercontent.com/3783096/55962274-231c6980-5ca3-11e9-8381-33a767a0517b.png" alt="å‡½æ•°è¿”å›ç±»å‹ä¸å¤Ÿç´§å‡‘" /></p>
<p align="center">å‡½æ•°è¿”å›ç±»å‹ä¸å¤Ÿç´§å‡‘</p>

<p>å› ä¸ºç±»å‹çš„ä¸æ˜æœ—ï¼Œè¿”å›çš„ç»“æœéƒ½ä¸èƒ½ç›´æ¥æ“ä½œï¼Œéœ€è¦è¿›è¡Œç±»å‹è½¬æ¢åæ‰èƒ½ç»§ç»­ã€‚</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">result1</span> <span class="o">=</span> <span class="nx">getMessage</span><span class="p">(</span><span class="dl">"</span><span class="s2">audio</span><span class="dl">"</span><span class="p">);</span>
<span class="cm">/** ä¸èƒ½ç›´æ¥å¯¹ result1 è°ƒç”¨æ•°ç»„æ–¹æ³• */</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nx">result1</span> <span class="k">as</span> <span class="nx">Message</span><span class="p">[]).</span><span class="nx">length</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">result2</span> <span class="o">=</span> <span class="nx">getMessage</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">result2</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/** ä¸èƒ½å¯¹ result2 ç›´æ¥è®¿é—®æ¶ˆæ¯å¯¹è±¡ä¸­çš„å±æ€§ */</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nx">result2</span> <span class="k">as</span> <span class="nx">Message</span><span class="p">).</span><span class="nx">content</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="é‡è½½çš„å®ç°">é‡è½½çš„å®ç°</h3>

<p>è¿™æ—¶å€™å¯é€šè¿‡æä¾›å¤šä¸ªå‡½æ•°ç±»å‹çš„å£°æ˜æ¥è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæœ€åå¾—åˆ°çš„ç»“æœå°±æ˜¯é—´æ¥å®ç°äº†å‡½æ•°çš„é‡è½½ã€‚å½“ç„¶è¿™ä¸ªé‡è½½åªæ˜¯ TypeScript ç¼–è¯‘æ—¶çš„ã€‚</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">Message</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span><span class="kd">type</span><span class="p">:</span> <span class="nx">MessageType</span><span class="p">):</span> <span class="nx">Message</span><span class="p">[];</span>
<span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span><span class="nx">query</span><span class="p">:</span> <span class="kr">any</span><span class="p">):</span> <span class="kr">any</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">number</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">message</span> <span class="o">=&gt;</span> <span class="nx">message</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">query</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">message</span> <span class="o">=&gt;</span> <span class="nx">message</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="nx">query</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>è¿™æ ·æ”¹é€ åï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨çš„æ—¶å€™ç›´æ¥å°±ä¼šæœ‰é‡è½½çš„æç¤ºã€‚</p>

<p><img src="https://user-images.githubusercontent.com/3783096/55962191-ff592380-5ca2-11e9-8df2-cfd7356c4dda.png" alt="å®ç° TypeScript çš„é‡è½½åè°ƒç”¨æ—¶çš„è‡ªåŠ¨æç¤º" /></p>
<p align="center">å®ç° TypeScript çš„é‡è½½åè°ƒç”¨æ—¶çš„è‡ªåŠ¨æç¤º</p>

<p>å¹¶ä¸”å¾—åˆ°çš„ç»“æœç±»å‹æ˜¯é‡è½½æ–¹æ³•ä¸­æŒ‡å®šçš„å…¥å‚ä¸è¿”å›çš„ç»„åˆï¼Œåœ¨å¯¹ç»“æœè¿›è¡Œä½¿ç”¨æ—¶ï¼Œæ— é¡»å†è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">result1</span> <span class="o">=</span> <span class="nx">getMessage</span><span class="p">(</span><span class="dl">"</span><span class="s2">audio</span><span class="dl">"</span><span class="p">);</span>
<span class="cm">/** âœ… æ— é¡»ç±»å‹è½¬æ¢ */</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result1</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">result2</span> <span class="o">=</span> <span class="nx">getMessage</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">result2</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/** âœ… æ— é¡»ç±»å‹è½¬æ¢ */</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result2</span><span class="p">.</span><span class="nx">content</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>è¿™é‡Œéœ€è¦ç†è§£çš„æ˜¯ï¼Œä¸Šé¢æ·»åŠ çš„å‡½æ•°ç±»å‹ä»…ä½œä¸º TypeScript åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨çš„ï¼Œå®ƒä¸æ˜¯çœŸçš„å®ç°åƒä¼ ç»Ÿé™æ€ç±»å‹è¯­è¨€é‚£æ ·çš„é‡è½½ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ç¼–è¯‘åä»£ç çš„è¾“å‡ºã€‚å®é™…è¿è¡Œæ—¶ä»ç„¶æ˜¯ä¸å¸¦é‡è½½çš„ JavaScript ç‰ˆæœ¬ã€‚</p>

<details>
<summary>ç¼–è¯‘åçš„ä»£ç </summary>

```js
"use strict";
var data = [
    {
        id: 0,
        type: "string",
        content: "hello"
    },
    {
        id: 1,
        type: "image",
        content: "url_for_iamge"
    },
    {
        id: 2,
        type: "string",
        content: "world"
    }
];
function getMessage(query) {
    if (typeof query === "number") {
        return data.find(function (message) { return message.id === query; });
    }
    else {
        return data.filter(function (message) { return message.type === query; });
    }
}
var result1 = getMessage("audio");
/** âœ… æ— é¡»ç±»å‹è½¬æ¢ */
console.log(result1.length);
var result2 = getMessage(1);
if (result2) {
    /** âœ… æ— é¡»ç±»å‹è½¬æ¢ */
    console.log(result2.content);
}
```
</details>

<p>ä½†è¿™ä¸€ç‚¹ä¹Ÿä¸å½±å“æˆ‘ä»¬åœ¨ TypeScript ä¸­ä½¿ç”¨è¿™ç§å‡çš„é‡è½½ã€‚</p>

<h3 id="å¯é€‰å‚æ•°">å¯é€‰å‚æ•°</h3>

<p>å¦ä¸€ä¸ª TypeScript é‡è½½çš„åœºæ™¯ã€‚è¿˜æ˜¯ä¸Šé¢è·å–æ¶ˆæ¯æ•°æ®çš„æ–¹æ³•ï¼Œå› ä¸ºæ ¹æ®ç±»å‹æŸ¥æ‰¾æ¶ˆæ¯æ—¶ï¼Œä¼šè¿”å›åŒç±»å‹æ¶ˆæ¯çš„ä¸€ä¸ªæ•°ç»„ã€‚æ­¤æ—¶æˆ‘ä»¬æƒ³åŠ ä¸€ä¸ªå‚æ•°å®ç°åªè¿”å›ç»“æœä¸­å‰å‡ ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œå¦‚ä¸‹çš„æ”¹é€ ï¼š</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">function getMessage(id: number): Message | undefined;
</span><span class="gi">+function getMessage(type: MessageType, count?: number): Message[];
+function getMessage(query: any, count = 10): any {
</span>  if (typeof query === "number") {
    return data.find(message =&gt; message.id === query);
  } else {
<span class="gi">+    return data.filter(message =&gt; message.type === query).splice(0, count);
</span>  }
<span class="err">}</span>
</code></pre></div></div>

<p>é€šè¿‡é‡è½½ï¼Œè¿™ä¸ªæ–°å¢çš„å‚æ•°å¾ˆå®¹æ˜“å®ç°åªé’ˆå¯¹å…¥å‚ <code class="language-plaintext highlighter-rouge">MessageType</code> æ—¶ï¼Œè¿™æ ·å¦‚æœæˆ‘ä»¬æœ‰å¦‚ä¸‹çš„è°ƒç”¨ï¼Œä¼šå¾—åˆ°ç¼–è¯‘æ—¶çš„æŠ¥é”™ï¼š</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/** ğŸš¨ Argument of type '1' is not assignable to parameter of type 'MessageType' */</span>
<span class="nx">getMessage</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
</code></pre></div></div>

<p>è€Œéé‡è½½çš„ç‰ˆæœ¬æ˜¯äº«å—ä¸åˆ°ä¸Šé¢æåˆ°çš„ç±»å‹ä¼˜åŠ¿çš„ã€‚</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span>
  <span class="nx">query</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="nx">MessageType</span><span class="p">,</span>
  <span class="nx">count</span> <span class="o">=</span> <span class="mi">10</span>
<span class="p">):</span> <span class="nx">Message</span><span class="p">[]</span> <span class="o">|</span> <span class="nx">Message</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">number</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">message</span> <span class="o">=&gt;</span> <span class="nx">message</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">query</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">message</span> <span class="o">=&gt;</span> <span class="nx">message</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="nx">query</span><span class="p">).</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">count</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/** âœ… ojbk, ä¸é”™æŠ¥ */</span>
<span class="nx">getMessage</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="é‡è½½è¿‡ç¨‹">é‡è½½è¿‡ç¨‹</h3>

<p>TypeScript é‡è½½çš„è¿‡ç¨‹æ˜¯ï¼Œæ‹¿ä¼ å…¥çš„å‚æ•°å’Œé‡è½½çš„æ–¹æ³•ç­¾ååˆ—è¡¨ä¸­ç”±ä¸Šå¾€ä¸‹é€ä¸ªåŒ¹é…ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå®Œå…¨åŒ¹é…çš„å‡½æ•°ç­¾åï¼Œå¦åˆ™æŠ¥é”™ã€‚æ‰€ä»¥æ¨èçš„åšæ³•æ˜¯å°†ç­¾åæ›´åŠ å…·ä½“çš„é‡è½½æ”¾ä¸Šé¢ï¼Œä¸é‚£ä¹ˆå…·ä½“çš„æ”¾åé¢ã€‚</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/** âœ…*/</span>
<span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span><span class="kd">type</span><span class="p">:</span> <span class="nx">MessageType</span><span class="p">,</span> <span class="nx">count</span><span class="p">?:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">Message</span><span class="p">[];</span>
<span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">Message</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>

<span class="cm">/** ğŸš¨*/</span>
<span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">Message</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">getMessage</span><span class="p">(</span><span class="kd">type</span><span class="p">:</span> <span class="nx">MessageType</span><span class="p">,</span> <span class="nx">count</span><span class="p">?:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">Message</span><span class="p">[];</span>
</code></pre></div></div>

<p>åƒä¸Šé¢ç¤ºä¾‹ä¸­æ­£ç¡®åšæ³•è¿™æ ·ï¼Œå¦‚æœè¯´å…¥å‚ä¸ªæ•°åªæœ‰ä¸€ä¸ªï¼Œé‚£å¯ä»¥ç›´æ¥è·³è¿‡ç¬¬ä¸€ä¸ªå‡½æ•°ç­¾åï¼Œæ— é¡»åšå…¥å‚ç±»å‹çš„åˆ¤æ–­ã€‚</p>

<h3 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æº</h3>

<ul>
  <li><a href="https://www.typescriptlang.org/docs/handbook/functions.html">TypeScript Handbook - Functions - Overloads</a></li>
  <li><a href="https://medium.com/@kevinkreuzer/typescript-method-overloading-c256dd63245a">Typescript method overloading</a></li>
</ul>


  </div><a class="u-url" href="/2019/04/12/TypeScript-%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</li><li><a class="u-email" href="mailto:liuwayong@gmail.com">liuwayong@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>notes about the coding life</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
