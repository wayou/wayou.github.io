<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="google-site-verification"
    content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"
  />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <meta name="description" content="notes about the coding life" />
  <meta name="keywords" content="ç‰›å“‡å‹‡, åšå®¢, äº’è”ç½‘, Web, JavaScript, å‰ç«¯, è®¾è®¡" />
  <meta name="theme-color" content="#000000" />

  <!-- Open Graph -->
  <meta
    property="og:title"
    content="Kafka çš„å®‰è£…åŠå¯åŠ¨ - ç‰›ã•ã‚“ã®éƒ¨è½æ ¼|åˆ˜å“‡å‹‡çš„éƒ¨è½æ ¼"
  />
  
  <meta property="og:type" content="article" />
  <meta
    property="og:description"
    content="Kafka çš„å®‰è£…åŠå¯åŠ¨

Linux æœåŠ¡å™¨

CentOS ä¸ºä¾‹ã€‚

Kafka å®‰è£…

è·å–ä¸‹è½½åœ°å€ï¼Œä¸‹è½½åè§£å‹ã€‚

$ wget https://mirror.bit.edu.cn/apache/kafka/2.5.0/kafka_2.12-2.5.0.tgz
$ tar -zxvf kafka_2.12-2.5.0.tgz &amp;&amp; cd kafka_2.12-2.5...."
  />
   <meta property="article:published_time" content="2020-05-13T15:05:00Z">    
  <meta property="og:image" content="http://0.0.0.0:4000" />
  <meta property="og:url" content="http://0.0.0.0:4000/2020/05/13/Kafka-%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E5%90%AF%E5%8A%A8/" />
  <meta property="og:site_name" content="ç‰›ã•ã‚“ã®éƒ¨è½æ ¼|åˆ˜å“‡å‹‡çš„éƒ¨è½æ ¼" />

  <title>
    Kafka çš„å®‰è£…åŠå¯åŠ¨ - ç‰›ã•ã‚“ã®éƒ¨è½æ ¼|åˆ˜å“‡å‹‡çš„éƒ¨è½æ ¼
  </title>

  <!-- Favicon -->
  <link rel="shortcut icon" href="/favicon.ico" />

  <!-- Canonical URL -->
  <link
    rel="canonical"
    href="http://0.0.0.0:4000/2020/05/13/Kafka-%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E5%90%AF%E5%8A%A8/"
  />

  <!-- Bootstrap Core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/blog.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- ga & ba script hoook -->
  <script></script>
</head>


  <!-- hack iOS CSS :active style -->
  <body ontouchstart="">
    <!-- Navigation -->

  <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle">
          <span class="sr-only">âŒ</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div id="huxblog_navbar">
        <div class="navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="/">ä¸»é¡µ</a>
            </li>
               
            <li>
              <a href="/about/"
                >å…³äº</a
              >
            </li>
              
            <li>
              <a href="/archive"
                >Archive</a
              >
            </li>
                                                                   
          </ul>
        </div>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
  </nav>

  <script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body = document.body;
    var $toggle = document.querySelector(".navbar-toggle");
    var $navbar = document.querySelector("#huxblog_navbar");
    var $collapse = document.querySelector(".navbar-collapse");

    var __HuxNav__ = {
      close: function () {
        $navbar.className = " ";
        // wait until animation end.
        setTimeout(function () {
          // prevent frequently toggle
          if ($navbar.className.indexOf("in") < 0) {
            $collapse.style.height = "0px";
          }
        }, 400);
      },
      open: function () {
        $collapse.style.height = "auto";
        $navbar.className += " in";
      },
    };

    // Bind Event
    $toggle.addEventListener("click", function (e) {
      if ($navbar.className.indexOf("in") > 0) {
        __HuxNav__.close();
      } else {
        __HuxNav__.open();
      }
    });

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from
     * $toggle/$collapse will break global delegation.
     *
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener("click", function (e) {
      if (e.target == $toggle) return;
      if (e.target.className == "icon-bar") return;
      __HuxNav__.close();
    });
  </script>
</nav>
 <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background: ;
    }

    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                    </div>
                    <h1>Kafka çš„å®‰è£…åŠå¯åŠ¨</h1>
                    
                    <h2 class="subheading"></h2>
                    <span class="meta">May 13, 2020</span>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"
      >
        <!-- Multi-Lingual -->
         <h1 id="kafka-çš„å®‰è£…åŠå¯åŠ¨">Kafka çš„å®‰è£…åŠå¯åŠ¨</h1>

<h2 id="linux-æœåŠ¡å™¨">Linux æœåŠ¡å™¨</h2>

<p>CentOS ä¸ºä¾‹ã€‚</p>

<h3 id="kafka-å®‰è£…">Kafka å®‰è£…</h3>

<p>è·å–ä¸‹è½½åœ°å€ï¼Œä¸‹è½½åè§£å‹ã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wget https://mirror.bit.edu.cn/apache/kafka/2.5.0/kafka_2.12-2.5.0.tgz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-zxvf</span> kafka_2.12-2.5.0.tgz <span class="o">&amp;&amp;</span> <span class="nb">cd </span>kafka_2.12-2.5.0
</code></pre></div></div>

<p>å…·ä½“å‚è€ƒå®˜ç½‘ <a href="https://kafka.apache.org/quickstart">Kafka - Quickstart</a>ã€‚</p>

<h3 id="å¯åŠ¨-kafka">å¯åŠ¨ Kafka</h3>

<p>Kafka ä¾èµ– <a href="https://zookeeper.apache.org/">ZooKeeper</a>ï¼Œæ‰€ä»¥éœ€è¦å…ˆè¿è¡Œåè€…ã€‚Kafak å®‰è£…ç›®å½•ä¸‹è‡ªå¸¦äº† ZooKeeperï¼Œå¯ç›´æ¥è¿è¡Œæ— é¡»å•ç‹¬å®‰è£…ã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/zookeeper-server-start.sh config/zookeeper.properties
</code></pre></div></div>

<p>è¿è¡Œ Zookeeper æ—¶å‘ç°æœºå™¨ä¸Šæ²¡æœ‰ Javaï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/zookeeper-server-start.sh config/zookeeper.properties
/root/dev/kafka/bin/kafka-run-class.sh: line 315: <span class="nb">exec</span>: java: not found
</code></pre></div></div>

<p>æ‰€ä»¥éœ€è¦å…ˆå®‰è£… Javaã€‚</p>

<p>å®‰è£… Java è¿‡ç¨‹ä¸­å¦‚æœ yum æŠ¥ https é”™è¯¯ï¼Œæç¤º 404 repo åœ°å€æ— æ•ˆç­‰ï¼Œ</p>

<details>
<summary>yum install java æ—¶çš„æŠ¥é”™ä¿¡æ¯</summary>

```sh
$ yum install java-1.6.0-openjdk
Failed to set locale, defaulting to C
Loaded plugins: fastestmirror
base                                                                                                                                                                                                                                   | 3.6 kB  00:00:00
epel                                                                                                                                                                                                                                   | 4.7 kB  00:00:00
extras                                                                                                                                                                                                                                 | 3.4 kB  00:00:00
https://repo.mongodb.org/yum/redhat/2.2/mongodb-org/4.2/x86_64/repodata/repomd.xml: [Errno 14] HTTPS Error 404 - Not Found
Trying other mirror.
To address this issue please refer to the below knowledge base article

https://access.redhat.com/articles/1320623

If above article doesn't help to resolve this issue please create a bug on https://bugs.centos.org/



 One of the configured repositories failed (MongoDB Repository),
 and yum doesn't have enough cached data to continue. At this point the only
 safe thing yum can do is fail. There are a few ways to work "fix" this:

     1. Contact the upstream for the repository and get them to fix the problem.

     2. Reconfigure the baseurl/etc. for the repository, to point to a working
        upstream. This is most often useful if you are using a newer
        distribution release than is supported by the repository (and the
        packages for the previous distribution release still work).

     3. Disable the repository, so yum won't use it by default. Yum will then
        just ignore the repository until you permanently enable it again or use
        --enablerepo for temporary usage:

            yum-config-manager --disable mongodb-org-4.2

     4. Configure the failing repository to be skipped, if it is unavailable.
        Note that yum will try to contact the repo. when it runs most commands,
        so will have to try and fail each time (and thus. yum will be be much
        slower). If it is a very temporary problem though, this is often a nice
        compromise:

            yum-config-manager --save --setopt=mongodb-org-4.2.skip_if_unavailable=true

failure: repodata/repomd.xml from mongodb-org-4.2: [Errno 256] No more mirrors to try.
https://repo.mongodb.org/yum/redhat/2.2/mongodb-org/4.2/x86_64/repodata/repomd.xml: [Errno 14] HTTPS Error 404 - Not Found
```

</details>

<p>æ ¹æ®æç¤ºï¼Œæ‰§è¡Œ <code class="language-plaintext highlighter-rouge">yum-config-manager --disable mongodb-org-4.2</code> åå†æ¬¡å®‰è£…å°±æˆåŠŸäº†ã€‚</p>

<p>æ£€æŸ¥ Java çš„å®‰è£…ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-version</span>
java version <span class="s2">"1.6.0_38"</span>
OpenJDK Runtime Environment <span class="o">(</span>IcedTea6 1.13.10<span class="o">)</span> <span class="o">(</span>rhel-1.13.10.0.el7_2-x86_64<span class="o">)</span>
OpenJDK 64-Bit Server VM <span class="o">(</span>build 23.25-b01, mixed mode<span class="o">)</span>

</code></pre></div></div>

<p>å¦ï¼Œå¦‚æœéœ€è¦å¸è½½ï¼Œæ‰§è¡Œ <code class="language-plaintext highlighter-rouge">yum remove java-1.6.0-openjdk</code></p>

<p>å†æ¬¡è¿è¡Œ <code class="language-plaintext highlighter-rouge">bin/zookeeper-server-start.sh config/zookeeper.properties</code> å‘ç°å‰é¢å®‰è£…çš„ Java ç‰ˆæœ¬ä¸å¯¹ï¼Œä½äº†â€¦</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/zookeeper-server-start.sh config/zookeeper.properties
Exception <span class="k">in </span>thread <span class="s2">"main"</span> java.lang.UnsupportedClassVersionError: org/apache/zookeeper/server/quorum/QuorumPeerMain : Unsupported major.minor version 52.0
	at java.lang.ClassLoader.defineClass1<span class="o">(</span>Native Method<span class="o">)</span>
	at java.lang.ClassLoader.defineClass<span class="o">(</span>ClassLoader.java:643<span class="o">)</span>
	at java.security.SecureClassLoader.defineClass<span class="o">(</span>SecureClassLoader.java:142<span class="o">)</span>
	at java.net.URLClassLoader.defineClass<span class="o">(</span>URLClassLoader.java:277<span class="o">)</span>
	at java.net.URLClassLoader.access<span class="nv">$000</span><span class="o">(</span>URLClassLoader.java:73<span class="o">)</span>
	at java.net.URLClassLoader<span class="nv">$1</span>.run<span class="o">(</span>URLClassLoader.java:212<span class="o">)</span>
	at java.security.AccessController.doPrivileged<span class="o">(</span>Native Method<span class="o">)</span>
	at java.net.URLClassLoader.findClass<span class="o">(</span>URLClassLoader.java:205<span class="o">)</span>
	at java.lang.ClassLoader.loadClass<span class="o">(</span>ClassLoader.java:323<span class="o">)</span>
	at sun.misc.Launcher<span class="nv">$AppClassLoader</span>.loadClass<span class="o">(</span>Launcher.java:294<span class="o">)</span>
	at java.lang.ClassLoader.loadClass<span class="o">(</span>ClassLoader.java:268<span class="o">)</span>
Could not find the main class: org.apache.zookeeper.server.quorum.QuorumPeerMain. Program will exit.
</code></pre></div></div>

<p>æ ¹æ®æç¤ºæœ€å°åº”è¯¥ä¸º 52 çš„ç‰ˆæœ¬ï¼Œæ ¹æ® <a href="https://stackoverflow.com/questions/22489398/unsupported-major-minor-version-52-0">Unsupported major.minor version 52.0 [duplicate]</a>å¯çŸ¥ 52 å¯¹åº”çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬ã€‚</p>

<p>åŒæ—¶ï¼Œå¯é€šè¿‡ <code class="language-plaintext highlighter-rouge">yum list available java\*</code> å‘½ä»¤æŸ¥è¯¢åˆ° yum ä¸Šå¯å®‰è£…çš„ç‰ˆæœ¬ï¼Œæ‰¾ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„å®‰è£…å³å¯ï¼Œ<code class="language-plaintext highlighter-rouge">yum install java-1.8.0-openjdk</code>ã€‚</p>

<p>å†æ¬¡æ£€æŸ¥å®‰è£…ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-version</span>
openjdk version <span class="s2">"1.8.0_71"</span>
OpenJDK Runtime Environment <span class="o">(</span>build 1.8.0_71-b15<span class="o">)</span>
OpenJDK 64-Bit Server VM <span class="o">(</span>build 25.71-b15, mixed mode<span class="o">)</span>
</code></pre></div></div>

<h3 id="å¯åŠ¨-kafka-æœåŠ¡">å¯åŠ¨ Kafka æœåŠ¡</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/kafka-server-start.sh config/server.properties
</code></pre></div></div>

<h3 id="åˆ›å»º-topic">åˆ›å»º Topic</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/kafka-topics.sh <span class="nt">--create</span> <span class="nt">--bootstrap-server</span> localhost:9092 <span class="nt">--replication-factor</span> 1 <span class="nt">--partitions</span> 1 <span class="nt">--topic</span> <span class="nb">test</span>
</code></pre></div></div>

<h3 id="åˆ›å»ºç”Ÿäº§è€…">åˆ›å»ºç”Ÿäº§è€…</h3>

<p>åˆ›å»ºç”Ÿäº§è€…å‘é€æ¶ˆæ¯</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/kafka-console-producer.sh <span class="nt">--bootstrap-server</span> localhost:9092 <span class="nt">--topic</span> <span class="nb">test</span>
</code></pre></div></div>

<h3 id="åˆ›å»ºæ¶ˆè´¹è€…">åˆ›å»ºæ¶ˆè´¹è€…</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/kafka-console-consumer.sh <span class="nt">--bootstrap-server</span> localhost:9092 <span class="nt">--topic</span> <span class="nb">test</span> <span class="nt">--from-beginning</span>
</code></pre></div></div>

<p>æ­¤æ—¶å‘æ¶ˆæ¯çš„åœ°æ–¹æœ‰æ–°å¢æ•°æ®æ—¶ï¼Œæ¶ˆè´¹è€…å¤„ä¼šå®æ—¶è·å–åˆ°ã€‚</p>

<h2 id="mac-æœ¬æœº">mac æœ¬æœº</h2>

<h3 id="ä¿®æ”¹-kafka-é…ç½®">ä¿®æ”¹ Kafka é…ç½®</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>vi /usr/local/etc/kafka/server.properties
</code></pre></div></div>

<p>å°† <code class="language-plaintext highlighter-rouge">listeners=PLAINTEXT://:9092</code> å–æ¶ˆå…¶æ³¨é‡Šå¹¶ä¿®æ”¹æˆå¦‚ä¸‹å½¢å¼åä¿å­˜ï¼š</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span> The address the socket server listens on. It will get the value returned from
<span class="err">#</span> java.net.InetAddress.getCanonicalHostName() if not configured.
<span class="err">#</span>   FORMAT:
<span class="err">#</span>     listeners = listener_name://host_name:port
<span class="err">#</span>   EXAMPLE:
<span class="err">#</span>     listeners = PLAINTEXT://your.host.name:9092
<span class="gd">- listeners=PLAINTEXT://:9092
</span><span class="gi">+ listeners=PLAINTEXT://localhost:9092
</span>
# Hostname and port the broker will advertise to producers and consumers. If not set,
<span class="err">#</span> it uses the value for "listeners" if configured.  Otherwise, it will use the value
<span class="err">#</span> returned from java.net.InetAddress.getCanonicalHostName().
<span class="err">#advertised.listeners=PLAINTEXT://your.host.name:9092</span>
</code></pre></div></div>

<h3 id="å¯åŠ¨-zookeeper">å¯åŠ¨ zookeeper</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew services start zookeeper                                          
<span class="o">==&gt;</span> Successfully started <span class="sb">`</span>zookeeper<span class="sb">`</span> <span class="o">(</span>label: homebrew.mxcl.zookeeper<span class="o">)</span>
</code></pre></div></div>

<p><strong>æ³¨ï¼š</strong> é€šè¿‡ brew å’Œ zookeeper è‡ªå·±çš„å‘½ä»¤å¯åŠ¨æ—¶ï¼Œåœæ­¢æœåŠ¡ä¹Ÿéœ€è¦å¯¹åº”çš„å‘½ä»¤ï¼Œå³ï¼Œ<code class="language-plaintext highlighter-rouge">brew services stop zookeeper</code> åªä¼šåœæ­¢ brew å¯åŠ¨çš„æœåŠ¡ã€‚</p>

<h3 id="å¯åŠ¨-kafka-1">å¯åŠ¨ kafka</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew services start kafka                                                
<span class="o">==&gt;</span> Successfully started <span class="sb">`</span>kafka<span class="sb">`</span> <span class="o">(</span>label: homebrew.mxcl.kafka<span class="o">)</span>
</code></pre></div></div>

<p>ä¸Šé¢æ˜¯ä»¥æœåŠ¡å½¢å¼å¸¸é©»å¯åŠ¨ï¼Œå¦‚æœä¸´æ—¶å¯åŠ¨ï¼Œå¯ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>zkServer start
<span class="nv">$ </span>kafka-server-start /usr/local/etc/kafka/server.properties
</code></pre></div></div>

<h3 id="åˆ›å»º-topic-1">åˆ›å»º Topic</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kafka-topics <span class="nt">--create</span> <span class="nt">--zookeeper</span> localhost:2181 <span class="nt">--replication-factor</span> 1 <span class="nt">--partitions</span> 1 <span class="nt">--topic</span> <span class="nb">test</span>
</code></pre></div></div>

<p>å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Exception <span class="k">in </span>thread <span class="s2">"main"</span> kafka.zookeeper.ZooKeeperClientTimeoutException: Timed out waiting <span class="k">for </span>connection <span class="k">while in </span>state: CONNECTING
	at kafka.zookeeper.ZooKeeperClient.<span class="nv">$anonfun$waitUntilConnected$3</span><span class="o">(</span>ZooKeeperClient.scala:262<span class="o">)</span>
	at kafka.zookeeper.ZooKeeperClient.waitUntilConnected<span class="o">(</span>ZooKeeperClient.scala:258<span class="o">)</span>
	at kafka.zookeeper.ZooKeeperClient.&lt;init&gt;<span class="o">(</span>ZooKeeperClient.scala:119<span class="o">)</span>
	at kafka.zk.KafkaZkClient<span class="nv">$.</span>apply<span class="o">(</span>KafkaZkClient.scala:1863<span class="o">)</span>
	at kafka.admin.TopicCommand<span class="nv">$ZookeeperTopicService$.</span>apply<span class="o">(</span>TopicCommand.scala:341<span class="o">)</span>
	at kafka.admin.TopicCommand<span class="nv">$.</span>main<span class="o">(</span>TopicCommand.scala:55<span class="o">)</span>
	at kafka.admin.TopicCommand.main<span class="o">(</span>TopicCommand.scala<span class="o">)</span>
</code></pre></div></div>

<ul>
  <li>æ£€æŸ¥ zookeeper æœåŠ¡æ˜¯å¦æ­£å¸¸ï¼š</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>zkServer status                                                        22:22:32
/usr/bin/java
ZooKeeper JMX enabled by default
Using config: /usr/local/etc/zookeeper/zoo.cfg
Client port found: 2181. Client address: localhost.
Error contacting service. It is probably not running.
</code></pre></div></div>

<p>å¦‚æœæ˜¯åƒä¸Šé¢è¿™æ ·ï¼Œzookeeper æ ¹æœ¬æ²¡å¯åŠ¨æˆåŠŸã€‚è™½ç„¶ <code class="language-plaintext highlighter-rouge">brew services start zookeeper</code> åŠ <code class="language-plaintext highlighter-rouge">zkServer start</code> éƒ½ä¼šæç¤ºå¯åŠ¨æˆåŠŸï¼Œè¿™æ˜¯æ¯”è¾ƒå‘çˆ¹çš„åœ°æ–¹ã€‚</p>

<p>ç„¶åä¸è¦ç›¸ä¿¡ç½‘ä¸Šåˆ—çš„é‚£ä¸€ç³»åˆ—å¯èƒ½åŸå› ï¼š</p>

<ul>
  <li>host æ²¡ç»‘</li>
  <li>ç«¯å£å ç”¨</li>
  <li>dataDir ç›®å½•ä¸å­˜åœ¨æˆ–æƒé™ä¸è¶³</li>
  <li>myid æ–‡ä»¶ç¼ºå¤±æˆ–å†…å®¹ä¸å¯¹</li>
  <li>â€¦</li>
</ul>

<p>æ­¤æ—¶éœ€è¦åšçš„æ˜¯å…ˆåœæ‰æœåŠ¡ï¼Œ</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew services start zookeeper
<span class="c"># æˆ–</span>
<span class="nv">$ </span>zkServer stop
</code></pre></div></div>

<p>ç„¶åæ‰“å¼€ <code class="language-plaintext highlighter-rouge">/usr/local/etc/zookeeper/log4j.properties</code> é…ç½®æ–‡ä»¶çœ‹æ—¥å¿—åœ¨å“ªï¼Œ</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> /usr/local/etc/zookeeper/log4j.properties
log4j.rootCategory<span class="o">=</span>WARN, zklog
log4j.appender.zklog <span class="o">=</span> org.apache.log4j.RollingFileAppender
log4j.appender.zklog.File <span class="o">=</span> /usr/local/var/log/zookeeper/zookeeper.log
log4j.appender.zklog.Append <span class="o">=</span> <span class="nb">true
</span>log4j.appender.zklog.layout <span class="o">=</span> org.apache.log4j.PatternLayout
log4j.appender.zklog.layout.ConversionPattern <span class="o">=</span> %d<span class="o">{</span>yyyy-MM-dd HH:mm:ss<span class="o">}</span> %c<span class="o">{</span>1<span class="o">}</span> <span class="o">[</span>%p] %m%n
</code></pre></div></div>

<p>å¯ä»¥çœ‹åˆ°ï¼Œæ—¥å¿—æ–‡ä»¶åœ¨ <code class="language-plaintext highlighter-rouge">/usr/local/var/log/zookeeper/zookeeper.log</code> é‡Œé¢ï¼Œå¯ä»¥çœ‹çœ‹é‡Œé¢æœ‰æ²¡æœ‰æŠ¥é”™ä»¥å¸®åŠ©æ’æŸ¥å¯åŠ¨çš„é—®é¢˜ã€‚</p>

<p>æ–°å¼€çª—å£ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">tail -f</code> æ‰“å¼€æ—¥å¿—ï¼Œç„¶åé‡æ–°å°è¯•å¯åŠ¨ zookeeper å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">tail</span> <span class="nt">-n</span> 50 <span class="nt">-f</span> /usr/local/var/log/zookeeper/zookeeper.log
2020-05-13 09:58:43 QuorumPeerMain <span class="o">[</span>WARN] Either no config or no quorum defined <span class="k">in </span>config, running  <span class="k">in </span>standalone mode
2020-05-13 09:58:43 ContextHandler <span class="o">[</span>WARN] o.e.j.s.ServletContextHandler@e45f292<span class="o">{</span>/,null,UNAVAILABLE<span class="o">}</span> contextPath ends with /<span class="k">*</span>
2020-05-13 09:58:43 ContextHandler <span class="o">[</span>WARN] Empty contextPath
2020-05-13 09:58:43 NIOServerCnxnFactory <span class="o">[</span>ERROR] Thread Thread[main,5,main] died
java.lang.NoSuchMethodError: java.nio.ByteBuffer.clear<span class="o">()</span>Ljava/nio/ByteBuffer<span class="p">;</span>
	at org.apache.jute.BinaryOutputArchive.stringToByteBuffer<span class="o">(</span>BinaryOutputArchive.java:77<span class="o">)</span>
	at org.apache.jute.BinaryOutputArchive.writeString<span class="o">(</span>BinaryOutputArchive.java:107<span class="o">)</span>
	at org.apache.zookeeper.data.Id.serialize<span class="o">(</span>Id.java:50<span class="o">)</span>
	at org.apache.jute.BinaryOutputArchive.writeRecord<span class="o">(</span>BinaryOutputArchive.java:123<span class="o">)</span>
	at org.apache.zookeeper.data.ACL.serialize<span class="o">(</span>ACL.java:51<span class="o">)</span>
	at org.apache.zookeeper.server.ReferenceCountedACLCache.serialize<span class="o">(</span>ReferenceCountedACLCache.java:136<span class="o">)</span>
	at org.apache.zookeeper.server.DataTree.serialize<span class="o">(</span>DataTree.java:1218<span class="o">)</span>
	at org.apache.zookeeper.server.util.SerializeUtils.serializeSnapshot<span class="o">(</span>SerializeUtils.java:152<span class="o">)</span>
	at org.apache.zookeeper.server.persistence.FileSnap.serialize<span class="o">(</span>FileSnap.java:210<span class="o">)</span>
	at org.apache.zookeeper.server.persistence.FileSnap.serialize<span class="o">(</span>FileSnap.java:227<span class="o">)</span>
	at org.apache.zookeeper.server.persistence.FileTxnSnapLog.save<span class="o">(</span>FileTxnSnapLog.java:406<span class="o">)</span>
	at org.apache.zookeeper.server.persistence.FileTxnSnapLog.restore<span class="o">(</span>FileTxnSnapLog.java:248<span class="o">)</span>
	at org.apache.zookeeper.server.ZKDatabase.loadDataBase<span class="o">(</span>ZKDatabase.java:240<span class="o">)</span>
	at org.apache.zookeeper.server.ZooKeeperServer.loadData<span class="o">(</span>ZooKeeperServer.java:290<span class="o">)</span>
	at org.apache.zookeeper.server.ZooKeeperServer.startdata<span class="o">(</span>ZooKeeperServer.java:450<span class="o">)</span>
	at org.apache.zookeeper.server.NIOServerCnxnFactory.startup<span class="o">(</span>NIOServerCnxnFactory.java:764<span class="o">)</span>
	at org.apache.zookeeper.server.ServerCnxnFactory.startup<span class="o">(</span>ServerCnxnFactory.java:98<span class="o">)</span>
	at org.apache.zookeeper.server.ZooKeeperServerMain.runFromConfig<span class="o">(</span>ZooKeeperServerMain.java:144<span class="o">)</span>
	at org.apache.zookeeper.server.ZooKeeperServerMain.initializeAndRun<span class="o">(</span>ZooKeeperServerMain.java:106<span class="o">)</span>
	at org.apache.zookeeper.server.ZooKeeperServerMain.main<span class="o">(</span>ZooKeeperServerMain.java:64<span class="o">)</span>
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun<span class="o">(</span>QuorumPeerMain.java:128<span class="o">)</span>
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.main<span class="o">(</span>QuorumPeerMain.java:82<span class="o">)</span>
</code></pre></div></div>

<p>åŸå› å°±å¾ˆæ˜æœ—äº†ï¼Œ java ä¸­æŠ¥é”™æ‰¾ä¸åˆ°å¯¹åº”æ–¹æ³•ã€‚æ ¹æ® <a href="https://stackoverflow.com/a/60613000/1553656">Kafka with Zookeeper 3.5.7 Crash NoSuchMethodError: java.nio.ByteBuffer.flip()</a> è¿™ä¸ªç±»ä¼¼é—®é¢˜ä¸‹çš„å›ç­”ï¼Œè§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼š</p>

<ul>
  <li>å‡çº§ java åˆ° 1.9</li>
  <li>é™çº§ zookeeper åˆ° 3.14.x</li>
</ul>

<p>çœ‹äº†ä¸‹ä½¿ç”¨ brew å®‰è£…åçš„ç‰ˆæœ¬ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-version</span>
openjdk version <span class="s2">"1.8.0_252"</span>
OpenJDK Runtime Environment <span class="o">(</span>AdoptOpenJDK<span class="o">)(</span>build 1.8.0_252-b09<span class="o">)</span>
OpenJDK 64-Bit Server VM <span class="o">(</span>AdoptOpenJDK<span class="o">)(</span>build 25.252-b09, mixed mode<span class="o">)</span>

<span class="nv">$ </span>brew info zookeeper
zookeeper: stable 3.5.7 <span class="o">(</span>bottled<span class="o">)</span>, HEAD
Centralized server <span class="k">for </span>distributed coordination of services
...
</code></pre></div></div>

<p>å› ä¸ºæ˜¯æœ¬æœºï¼Œå‡çº§ java ä¼šæ¯”è¾ƒå®¹æ˜“æ“ä½œäº›ï¼Œç›´æ¥ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew cask <span class="nb">install </span>java
...
</code></pre></div></div>

<p>å®ŒæˆåæŸ¥çœ‹ java ç‰ˆæœ¬ï¼Œå·²ç»æ¥åˆ°äº†æœ€æ–°çš„ 14.0ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-version</span>
openjdk version <span class="s2">"14.0.1"</span> 2020-04-14
OpenJDK Runtime Environment <span class="o">(</span>build 14.0.1+7<span class="o">)</span>
OpenJDK 64-Bit Server VM <span class="o">(</span>build 14.0.1+7, mixed mode, sharing<span class="o">)</span>
</code></pre></div></div>

<p>å†æ¬¡å¯åŠ¨ zookeeperï¼Œ</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>zkServer start
/usr/bin/java
ZooKeeper JMX enabled by default
Using config: /usr/local/etc/zookeeper/zoo.cfg
Starting zookeeper ... STARTED
</code></pre></div></div>

<p>åŒæ—¶æŸ¥çœ‹æ—¥å¿—è¾“å‡ºï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2020-05-13 10:35:47 QuorumPeerMain [WARN] Either no config or no quorum defined in config, running  in standalone mode
2020-05-13 10:35:47 ContextHandler [WARN] o.e.j.s.ServletContextHandler@69b2283a{/,null,UNAVAILABLE} contextPath ends with /*
2020-05-13 10:35:47 ContextHandler [WARN] Empty contextPath
2020-05-13 10:35:47 ZooKeeperServerMain [ERROR] Unable to start AdminServer, exiting abnormally
org.apache.zookeeper.server.admin.AdminServer$AdminServerException: Problem starting AdminServer on address 0.0.0.0, port 8080 and command URL /commands
	at org.apache.zookeeper.server.admin.JettyAdminServer.start(JettyAdminServer.java:107)
	at org.apache.zookeeper.server.ZooKeeperServerMain.runFromConfig(ZooKeeperServerMain.java:138)
	at org.apache.zookeeper.server.ZooKeeperServerMain.initializeAndRun(ZooKeeperServerMain.java:106)
	at org.apache.zookeeper.server.ZooKeeperServerMain.main(ZooKeeperServerMain.java:64)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:128)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:82)
Caused by: java.io.IOException: Failed to bind to /0.0.0.0:8080
	at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:346)
	at org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:308)
	at org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:80)
	at org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:236)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)
	at org.eclipse.jetty.server.Server.doStart(Server.java:396)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)
	at org.apache.zookeeper.server.admin.JettyAdminServer.start(JettyAdminServer.java:103)
	... 5 more
Caused by: java.net.BindException: Address already in use
	at java.base/sun.nio.ch.Net.bind0(Native Method)
	at java.base/sun.nio.ch.Net.bind(Net.java:479)
	at java.base/sun.nio.ch.Net.bind(Net.java:468)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:220)
	at java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:88)
	at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:342)
	... 12 more
</code></pre></div></div>

<p>å¯ä»¥çœ‹åˆ°ï¼Œä»ç„¶æŠ¥é”™ï¼Œä½†é”™è¯¯å·²ç»å˜äº†ã€‚çœ‹æ¥å‰é¢çš„æ­¥éª¤èµ·ä½œç”¨äº†ã€‚å†æ¥çœ‹æ–°çš„æŠ¥é”™ï¼Œ</p>

<p>é”™è¯¯ä¿¡æ¯é‡Œå…³é”®ä¿¡æ¯æ˜¯ <code class="language-plaintext highlighter-rouge">Problem starting AdminServer on address 0.0.0.0, port 8080 and command URL /commands</code>ã€‚</p>

<p>çœ‹æ¥æ˜¯ç«¯å£å ç”¨çš„é—®é¢˜ï¼ŒæŸ¥çœ‹ zookeeper é…ç½®å¹¶æ·»åŠ  <code class="language-plaintext highlighter-rouge">admin.serverPort</code> é…ç½®ï¼Œä¿®æ”¹é»˜è®¤çš„ 8080 åˆ°å…¶ä»–ç«¯å£ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>vi /usr/local/etc/zookeeper/zoo.cfg
</code></pre></div></div>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span> The number of snapshots to retain in dataDir
<span class="err">#autopurge.snapRetainCount=3</span>
# Purge task interval in hours
<span class="err">#</span> Set to "0" to disable auto purge feature
<span class="err">#autopurge.purgeInterval=1</span>
+ admin.serverPort=8089
</code></pre></div></div>

<p>å†æ¬¡å°è¯•å¯åŠ¨å¹¶æŸ¥çœ‹æ—¥å¿—ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2020-05-13 10:56:13 QuorumPeerMain [WARN] Either no config or no quorum defined in config, running  in standalone mode
2020-05-13 10:56:13 ContextHandler [WARN] o.e.j.s.ServletContextHandler@69b2283a{/,null,UNAVAILABLE} contextPath ends with /*
2020-05-13 10:56:13 ContextHandler [WARN] Empty contextPath
2020-05-13 10:56:13 ZooKeeperServerMain [ERROR] Unexpected exception, exiting abnormally
java.net.BindException: Address already in use
	at java.base/sun.nio.ch.Net.bind0(Native Method)
	at java.base/sun.nio.ch.Net.bind(Net.java:479)
	at java.base/sun.nio.ch.Net.bind(Net.java:468)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:220)
	at java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:88)
	at java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:80)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.configure(NIOServerCnxnFactory.java:687)
	at org.apache.zookeeper.server.ZooKeeperServerMain.runFromConfig(ZooKeeperServerMain.java:143)
	at org.apache.zookeeper.server.ZooKeeperServerMain.initializeAndRun(ZooKeeperServerMain.java:106)
	at org.apache.zookeeper.server.ZooKeeperServerMain.main(ZooKeeperServerMain.java:64)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:128)
	at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:82)
</code></pre></div></div>

<p>é”™è¯¯å·²ç»æ›´æ–°æˆäº† <code class="language-plaintext highlighter-rouge">Address already in use</code>ã€‚è¿™ä¸ªå°±æ˜¯ä¹‹å‰æœ‰èµ·è¿‡ zookeeper ä½†å¿˜äº†å…³ï¼Œä¸ç®¡æ€æ ·ï¼Œé€šè¿‡ä¸‹é¢å¯¹åº”çš„å‘½ä»¤å…³é—­ä¸€ä¸‹å³å¯ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew services start zookeeper
<span class="c"># æˆ–</span>
<span class="nv">$ </span>zkServer stop
</code></pre></div></div>

<p>å†æ¬¡å¯åŠ¨ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>zkServer start
/usr/bin/java
ZooKeeper JMX enabled by default
Using config: /usr/local/etc/zookeeper/zoo.cfg
Starting zookeeper ... STARTED
</code></pre></div></div>

<p>æŸ¥çœ‹æ—¥å¿—å·²ç»æ²¡æœ‰å¼‚æ ·äº†ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2020-05-13 11:57:01 QuorumPeerMain [WARN] Either no config or no quorum defined in config, running  in standalone mode
2020-05-13 11:57:02 ContextHandler [WARN] o.e.j.s.ServletContextHandler@69b2283a{/,null,UNAVAILABLE} contextPath ends with /*
2020-05-13 11:57:02 ContextHandler [WARN] Empty contextPath
</code></pre></div></div>

<p>å†é€šè¿‡ <code class="language-plaintext highlighter-rouge">zkServer status</code> æŸ¥çœ‹ zookeeper çŠ¶æ€ï¼Œä¸å‡ºæ„å¤–å¯ä»¥çœ‹åˆ° <code class="language-plaintext highlighter-rouge">Mode: standalone</code> å­—æ ·è¡¨ç¤ºå•ä¾‹å¯åŠ¨æˆåŠŸï¼Œå› ä¸ºæ²¡æœ‰é…é›†ç¾¤æ‰€ä»¥æ˜¯æœ¬æœºå•ä¾‹ã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>zkServer status                                                            11:57:01
/usr/bin/java
ZooKeeper JMX enabled by default
Using config: /usr/local/etc/zookeeper/zoo.cfg
Client port found: 2181. Client address: localhost.
Mode: standalone
</code></pre></div></div>

<p>æœ€åï¼Œå¯ä»¥æˆåŠŸåˆ›å»º Topic äº†:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kafka-topics <span class="nt">--create</span> <span class="nt">--zookeeper</span> localhost:2181 <span class="nt">--replication-factor</span> 1 <span class="nt">--partitions</span> 1 <span class="nt">--topic</span> <span class="nb">test
</span>Created topic test.
</code></pre></div></div>

<h3 id="åˆ›å»ºç”Ÿäº§è€…-1">åˆ›å»ºç”Ÿäº§è€…</h3>

<p>åˆ›å»ºç”Ÿäº§è€…å¹¶ç”Ÿæˆæ¶ˆæ¯ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kafka-console-producer <span class="nt">--broker-list</span> localhost:9092 <span class="nt">--topic</span> <span class="nb">test</span>
<span class="o">&gt;</span> hello
</code></pre></div></div>

<p>ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œåä¼šè¿›å…¥äº¤äº’å‘½ä»¤è¡Œï¼Œæ¯è¾“å…¥ä¸€è¡Œä»£è¡¨ä¸€æ¡æ¶ˆæ¯ã€‚</p>

<h3 id="åˆ›å»ºæ¶ˆè´¹è€…-1">åˆ›å»ºæ¶ˆè´¹è€…</h3>

<p>æ¶ˆè´¹æ¶ˆæ¯ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kafka-console-consumer <span class="nt">--bootstrap-server</span> localhost:9092 <span class="nt">--topic</span> <span class="nb">test</span> <span class="nt">--from-beginning</span>
<span class="o">&gt;</span> hello
</code></pre></div></div>

<p>å¯åŠ¨åä¼šä»é˜Ÿåˆ—èµ·å§‹å¤„å¼€å§‹æ¶ˆè´¹æ¶ˆæ¯å¹¶è¾“å‡ºã€‚</p>

<h2 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æº</h2>

<ul>
  <li><a href="https://kafka.apache.org/quickstart">Kafka - Quickstart</a></li>
  <li><a href="https://colobu.com/2019/09/27/install-Kafka-on-Mac/">åœ¨ MacOS ä¸Šå®‰è£… Kafka</a></li>
  <li><a href="https://medium.com/@Ankitthakur/apache-kafka-installation-on-mac-using-homebrew-a367cdefd273">Apache Kafka Installation on Mac using Homebrew</a></li>
  <li><a href="https://stackoverflow.com/a/3855359/1553656">Find (and kill) process locking port 3000 on Mac</a></li>
  <li><a href="https://stackoverflow.com/a/58557904/1553656">ZooKepper Unable to start AdminServer, exiting abnormally</a></li>
</ul>



        <hr style="visibility: hidden" />
        <ul class="pager">
          
          <li class="previous">
            <a
              href="/2020/05/09/%E8%B7%A8%E5%9F%9F%E5%8F%8A%E8%A7%A3%E5%86%B3/"
              data-toggle="tooltip"
              data-placement="top"
              title="è·¨åŸŸåŠè§£å†³"
            >
              Previous<br />
              <span>è·¨åŸŸåŠè§£å†³</span>
            </a>
          </li>
           
          <li class="next">
            <a
              href="/2020/05/13/MySQL-%E9%87%8D%E7%BD%AE-root-%E5%AF%86%E7%A0%81/"
              data-toggle="tooltip"
              data-placement="top"
              title="MySQL é‡ç½® root å¯†ç "
            >
              Next<br />
              <span>MySQL é‡ç½® root å¯†ç </span>
            </a>
          </li>
          
        </ul>
        <hr style="visibility: hidden" />

         
      </div>

      <!-- Side Catalog Container -->
      
      <div
        class="col-lg-2 col-lg-offset-0 visible-lg-block sidebar-container catalog-container"
      >
        <div class="side-catalog">
          <hr class="hidden-sm hidden-xs" />
          <ul class="catalog-body"></ul>
        </div>
      </div>
      

      <!-- Sidebar Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"
      >
        <!-- Featured Tags -->
        



        <!-- Friends Blog -->
        
      </div>
    </div>
  </div>
</article>

<!-- add support for mathjax by voleking-->
   
<!-- async load function -->
<script>
  function async(u, c) {
    var d = document,
      t = "script",
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener(
        "load",
        function (e) {
          c(null, e);
        },
        false
      );
    }
    s.parentNode.insertBefore(o, s);
  }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
  async(
    "//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",
    function () {
      anchors.options = {
        visible: "hover",
        placement: "right",
        // icon: '#'
      };
      anchors
        .add()
        .remove(".intro-header h1")
        .remove(".subheading")
        .remove(".sidebar-container h5");
    }
  );
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

 <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  <li>
    <a href="/feed.xml">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a href="https://twitter.com/liuwayong">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/wayou">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

                <p class="copyright text-muted">
                   å·²ç»åˆ°åº•äº†ğŸ˜
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->



<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");
  
    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


  </body>
</html>
