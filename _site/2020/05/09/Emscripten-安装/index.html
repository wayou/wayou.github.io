<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="google-site-verification"
    content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"
  />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <meta name="description" content="notes about the coding life" />
  <meta name="keywords" content="ç‰›å“‡å‹‡, åšå®¢, äº’è”ç½‘, Web, JavaScript, å‰ç«¯, è®¾è®¡" />
  <meta name="theme-color" content="#000000" />

  <!-- Open Graph -->
  <meta
    property="og:title"
    content="Emscripten å®‰è£… - ç‰›ã•ã‚“ã®éƒ¨è½æ ¼|åˆ˜å“‡å‹‡çš„éƒ¨è½æ ¼"
  />
  
  <meta property="og:type" content="article" />
  <meta
    property="og:description"
    content="Emscripten å®‰è£…

é€šè¿‡ Homebrew å®‰è£…

å¯ä»¥é€šè¿‡å®˜æ–¹çš„ Download and install é¡µé¢æè¿°çš„æ­¥éª¤æ¥è¿›è¡Œï¼Œä½†ä¹Ÿæœ‰æ›´åŠ ä¾¿æ·çš„æ–¹å¼ï¼Œæ¯”å¦‚é€šè¿‡ Homebrewï¼Œåªéœ€æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ï¼š

$ brew install emscripten


.emscripten æ–‡ä»¶çš„é…ç½®

å®ŒæˆæˆåŠŸåï¼Œ ä¼šæœ‰ä¸ªé…ç½®çš„æç¤ºï¼š

==&gt; Caveats
Manually..."
  />
   <meta property="article:published_time" content="2020-05-09T13:05:00Z">    
  <meta property="og:image" content="http://0.0.0.0:4000" />
  <meta property="og:url" content="http://0.0.0.0:4000/2020/05/09/Emscripten-%E5%AE%89%E8%A3%85/" />
  <meta property="og:site_name" content="ç‰›ã•ã‚“ã®éƒ¨è½æ ¼|åˆ˜å“‡å‹‡çš„éƒ¨è½æ ¼" />

  <title>
    Emscripten å®‰è£… - ç‰›ã•ã‚“ã®éƒ¨è½æ ¼|åˆ˜å“‡å‹‡çš„éƒ¨è½æ ¼
  </title>

  <!-- Web App Manifest -->
  <link rel="manifest" href="/pwa/manifest.json" />

  <!-- Favicon -->
  <link rel="shortcut icon" href="/favicon.ico" />

  <!-- Canonical URL -->
  <link
    rel="canonical"
    href="http://0.0.0.0:4000/2020/05/09/Emscripten-%E5%AE%89%E8%A3%85/"
  />

  <!-- Bootstrap Core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/hux-blog.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- ga & ba script hoook -->
  <script></script>
</head>


  <!-- hack iOS CSS :active style -->
  <body ontouchstart="">
    <!-- Navigation -->

  <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle">
          <span class="sr-only">âŒ</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">ç‰›ã•ã‚“ã®éƒ¨è½æ ¼</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div id="huxblog_navbar">
        <div class="navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="/">ä¸»é¡µ</a>
            </li>
               
            <li>
              <a href="/about/"
                >å…³äº</a
              >
            </li>
              
            <li>
              <a href="/archive/"
                >å­˜æ¡£</a
              >
            </li>
                                                                   
          </ul>
        </div>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
  </nav>

  <script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body = document.body;
    var $toggle = document.querySelector(".navbar-toggle");
    var $navbar = document.querySelector("#huxblog_navbar");
    var $collapse = document.querySelector(".navbar-collapse");

    var __HuxNav__ = {
      close: function () {
        $navbar.className = " ";
        // wait until animation end.
        setTimeout(function () {
          // prevent frequently toggle
          if ($navbar.className.indexOf("in") < 0) {
            $collapse.style.height = "0px";
          }
        }, 400);
      },
      open: function () {
        $collapse.style.height = "auto";
        $navbar.className += " in";
      },
    };

    // Bind Event
    $toggle.addEventListener("click", function (e) {
      if ($navbar.className.indexOf("in") > 0) {
        __HuxNav__.close();
      } else {
        __HuxNav__.open();
      }
    });

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from
     * $toggle/$collapse will break global delegation.
     *
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener("click", function (e) {
      if (e.target == $toggle) return;
      if (e.target.className == "icon-bar") return;
      __HuxNav__.close();
    });
  </script>
</nav>
 <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background: ;
    }

    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                    </div>
                    <h1>Emscripten å®‰è£…</h1>
                    
                    <h2 class="subheading"></h2>
                    <span class="meta">May 9, 2020</span>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"
      >
        <!-- Multi-Lingual -->
         <h1 id="emscripten-å®‰è£…">Emscripten å®‰è£…</h1>

<h2 id="é€šè¿‡-homebrew-å®‰è£…">é€šè¿‡ Homebrew å®‰è£…</h2>

<p>å¯ä»¥é€šè¿‡å®˜æ–¹çš„ <a href="https://emscripten.org/docs/getting_started/downloads.html">Download and install</a> é¡µé¢æè¿°çš„æ­¥éª¤æ¥è¿›è¡Œï¼Œä½†ä¹Ÿæœ‰æ›´åŠ ä¾¿æ·çš„æ–¹å¼ï¼Œæ¯”å¦‚é€šè¿‡ Homebrewï¼Œåªéœ€æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew <span class="nb">install </span>emscripten
</code></pre></div></div>

<h2 id="emscripten-æ–‡ä»¶çš„é…ç½®"><code class="language-plaintext highlighter-rouge">.emscripten</code> æ–‡ä»¶çš„é…ç½®</h2>

<p>å®ŒæˆæˆåŠŸåï¼Œ ä¼šæœ‰ä¸ªé…ç½®çš„æç¤ºï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>==&gt; Caveats
Manually set LLVM_ROOT to
  /usr/local/opt/emscripten/libexec/llvm/bin
and comment out BINARYEN_ROOT
in ~/.emscripten after running `emcc` for the first time.
</code></pre></div></div>

<p>å³é¦–æ¬¡è¿è¡Œ <code class="language-plaintext highlighter-rouge">emcc</code> åï¼Œä¼šç”Ÿæˆä¸€ä¸ª <code class="language-plaintext highlighter-rouge">~/.emscripten</code> é…ç½®æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„ <code class="language-plaintext highlighter-rouge">LLVM_ROOT</code> è®¾ç½®æˆä¸Šé¢æç¤ºçš„è·¯å¾„ï¼ŒåŒæ—¶æ³¨é‡Šæ‰ <code class="language-plaintext highlighter-rouge">BINARYEN_ROOT</code>ã€‚</p>

<h3 id="è¿è¡Œ-emcc-æ£€æŸ¥å®‰è£…">è¿è¡Œ <code class="language-plaintext highlighter-rouge">emcc</code> æ£€æŸ¥å®‰è£…</h3>

<p>è¿è¡Œ <code class="language-plaintext highlighter-rouge">emcc</code> æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>emcc <span class="nt">-v</span>
<span class="o">==============================================================================</span>
Welcome to Emscripten!

This is the first <span class="nb">time </span>any of the Emscripten tools has been run.

A settings file has been copied to ~/.emscripten, at absolute path: /Users/wayou/.emscripten

It contains our best guesses <span class="k">for </span>the important paths, which are:

  LLVM_ROOT       <span class="o">=</span> /usr/bin
  NODE_JS         <span class="o">=</span> /Users/wayou/.nvm/versions/node/v12.1.0/bin/node
  EMSCRIPTEN_ROOT <span class="o">=</span> /usr/local/Cellar/emscripten/1.39.8/libexec

Please edit the file <span class="k">if </span>any of those are incorrect.

This <span class="nb">command </span>will now exit. When you are <span class="k">done </span>editing those paths, re-run it.
<span class="o">==============================================================================</span>
</code></pre></div></div>

<p>ç„¶åæŒ‰ç…§ä¸Šé¢æç¤ºé…ç½® <code class="language-plaintext highlighter-rouge">~/.emscripten</code>ï¼Œå†æ¬¡è¿è¡Œ <code class="language-plaintext highlighter-rouge">emcc</code> æ—¶ï¼Œå¦‚æœæ˜¯ 1.38.44 ä¹‹åçš„ç‰ˆæœ¬ï¼Œä¼šå‘ç°æŠ¥é”™ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>emcc <span class="nt">-v</span>
shared:ERROR: BINARYEN_ROOT is not defined <span class="k">in</span> /Users/wayou/.emscripten
</code></pre></div></div>

<h3 id="binaryen_root-çš„è®¾ç½®"><code class="language-plaintext highlighter-rouge">BINARYEN_ROOT</code> çš„è®¾ç½®</h3>

<p>å› ä¸ºå‰é¢æ­¥éª¤æ³¨é‡Šæ‰äº† <code class="language-plaintext highlighter-rouge">BINARYEN_ROOT</code>ï¼Œæ‰€ä»¥è¿™é‡Œæç¤ºè¯¥å­—æ®µæ²¡æœ‰è®¾ç½®ã€‚æŸ¥è¯¢åå‘ç°è¿™é‡Œæœ‰å¯¹è¿™ä¸ªé—®é¢˜çš„è®¨è®ºï¼Œå…·ä½“åŸå› æ¥è‡ª 1.38.44 ä¸­çš„æ”¹åŠ¨ï¼š</p>

<blockquote>
  <h2 id="v13844-09112019">v1.38.44: 09/11/2019</h2>
  <ul>
    <li>Remove Binaryen from the ports system. This means that emscripten will
no longer automatically build Binaryen from source. Instead, either use
the emsdk (binaries are provided automatically, just like for LLVM), or
build it yourself and point <code class="language-plaintext highlighter-rouge">BINARYEN_ROOT</code> in .emscripten to it. See #9409
â€“ <em>å¼•ç”¨è‡ª emscripten çš„å‘ç‰ˆæ—¥å¿—</em></li>
  </ul>
</blockquote>

<p>è§£å†³åŠæ³•æ˜¯å®‰è£… <code class="language-plaintext highlighter-rouge">binaryen</code> å¹¶ä¸”è®¾ç½® <code class="language-plaintext highlighter-rouge">BINARYEN_ROOT</code> åˆ° <code class="language-plaintext highlighter-rouge">/usr/local/opt/binaryen</code> è¿™ä¸ªè·¯å¾„ã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew <span class="nb">install </span>binaryen
</code></pre></div></div>

<p>ç¼–è¾‘ <code class="language-plaintext highlighter-rouge">~/.emscripten</code> è®¾ç½® <code class="language-plaintext highlighter-rouge">BINARYEN_ROOT</code>ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BINARYEN_ROOT = '/usr/local/opt/binaryen'
</code></pre></div></div>

<p>å†æ¬¡è¿è¡Œ <code class="language-plaintext highlighter-rouge">emcc</code> æ£€æŸ¥æ˜¯å¦ä¸€åˆ‡æ­£å¸¸ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>emcc <span class="nt">-v</span>
cache:INFO: generating system asset: is_vanilla.txt... <span class="o">(</span>this will be cached <span class="k">in</span> <span class="s2">"/Users/wayou/.emscripten_cache/is_vanilla.txt"</span> <span class="k">for </span>subsequent builds<span class="o">)</span>
cache:INFO:  - ok
emcc <span class="o">(</span>Emscripten gcc/clang-like replacement + linker emulating GNU ld<span class="o">)</span> 1.39.8
clang version 6.0.1  <span class="o">(</span>emscripten 1.39.8 : 1.39.8<span class="o">)</span>
Target: x86_64-apple-darwin19.3.0
Thread model: posix
InstalledDir: /usr/local/opt/emscripten/libexec/llvm/bin
shared:INFO: <span class="o">(</span>Emscripten: Running sanity checks<span class="o">)</span>
</code></pre></div></div>

<p>è‡³æ­¤ï¼Œé€šè¿‡ Homebrew æ–¹å¼æˆåŠŸå®‰è£… emscriptenã€‚</p>

<h2 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æº</h2>

<ul>
  <li><a href="https://emscripten.org/docs/getting_started/downloads.html">Emscripten documentation - Download and install</a></li>
  <li><a href="https://github.com/Homebrew/homebrew-core/issues/47869#issue-537885207">Emscripten needs Binaryen while compiling to wasm #47869</a></li>
  <li><a href="https://formulae.brew.sh/formula/emscripten">Homebrew Formulae - emscripten</a></li>
</ul>



        <hr style="visibility: hidden" />
        <ul class="pager">
          
          <li class="previous">
            <a
              href="/2020/05/09/%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86-Content-Nagotiation/"
              data-toggle="tooltip"
              data-placement="top"
              title="å†…å®¹åå•†/ Content Nagotiation"
            >
              Previous<br />
              <span>å†…å®¹åå•†/ Content Nagotiation</span>
            </a>
          </li>
           
          <li class="next">
            <a
              href="/2020/05/09/MySQL-INNODB-%E4%B8%8E-MYISAM-%E7%9A%84%E5%8C%BA%E5%88%AB/"
              data-toggle="tooltip"
              data-placement="top"
              title="MySQL INNODB ä¸ MYISAM çš„åŒºåˆ«"
            >
              Next<br />
              <span>MySQL INNODB ä¸ MYISAM çš„åŒºåˆ«</span>
            </a>
          </li>
          
        </ul>
        <hr style="visibility: hidden" />

         
      </div>

      <!-- Side Catalog Container -->
      
      <div
        class="col-lg-2 col-lg-offset-0 visible-lg-block sidebar-container catalog-container"
      >
        <div class="side-catalog">
          <hr class="hidden-sm hidden-xs" />
          <ul class="catalog-body"></ul>
        </div>
      </div>
      

      <!-- Sidebar Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"
      >
        <!-- Featured Tags -->
        



        <!-- Friends Blog -->
        
      </div>
    </div>
  </div>
</article>

<!-- add support for mathjax by voleking-->
   
<!-- async load function -->
<script>
  function async(u, c) {
    var d = document,
      t = "script",
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener(
        "load",
        function (e) {
          c(null, e);
        },
        false
      );
    }
    s.parentNode.insertBefore(o, s);
  }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
  async(
    "//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",
    function () {
      anchors.options = {
        visible: "hover",
        placement: "right",
        // icon: '#'
      };
      anchors
        .add()
        .remove(".intro-header h1")
        .remove(".subheading")
        .remove(".sidebar-container h5");
    }
  );
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

 <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  <li>
    <a href="/feed.xml">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a href="https://twitter.com/liuwayong">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/wayou">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

                <p class="copyright text-muted">
                   å·²ç»åˆ°åº•äº†ğŸ˜
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->



<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");
  
    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


  </body>
</html>
