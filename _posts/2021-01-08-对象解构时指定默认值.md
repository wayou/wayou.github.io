---
layout: post
title: "å¯¹è±¡è§£æ„æ—¶æŒ‡å®šé»˜è®¤å€¼"
date: 2021-01-08T01:43:21Z
---
# å¯¹è±¡å±•å¼€æ—¶æŒ‡å®šé»˜è®¤å€¼

## å¾…å±•å¼€å­—æ®µä¸ºåŸå§‹å€¼

æ­£å¸¸æƒ…å†µä¸‹ï¼Œ

```ts
const obj = {
  a: 1,
  b: 2,
};

const { a, b } = obj;
console.log(a, b); // 1 2
```

å½“è¢«å±•å¼€å­—æ®µç¼ºå¤±æ—¶ï¼Œ

```ts
const obj = {
  a: 1,
};

const { a, b } = obj;
console.log(a, b); // 1 undefined
```

æ­¤æ—¶å¯åœ¨å±•å¼€æ—¶ä½¿ç”¨ `=` æŒ‡å®šé»˜è®¤å€¼ï¼š

```ts
const obj = {
  a: 1,
};

const { a, b = 2 } = obj;
console.log(a, b); // 1 2
```

### å±•ç¤ºæ—¶æŒ‡å®šåˆ«å

ä½ ç”šè‡³å¯ä»¥åœ¨å±•ç¤ºå­—æ®µçš„åŒæ—¶ä¸ºå…¶é‡å‘½åï¼Œ

```ts
const obj = {
  a: 1,
  b: undefined
}

const { a, b: c = 2 } = obj;
console.log(a, c) // 1 2
```

ä¸Šè¿°è¿‡ç¨‹å…¶å®ä¸ºï¼š

- åˆ›å»ºå˜é‡ `c`
- è·å– `obj.b` å¹¶èµ‹å€¼ç»™ `c`
- å¦‚æœ `obj.b` ä¸º `undefined`ï¼Œåˆ™å°†æŒ‡å®šçš„é»˜è®¤å€¼ `2` èµ‹å€¼ç»™ `c`

ä¸Šé¢çš„è¿‡ç¨‹ç­‰åŒäºï¼š

```ts
const c = obj.b || 2
```

## å¾…å±•å¼€å­—æ®µä¸ºå¯¹è±¡

è€ƒå¯Ÿå¦‚ä¸‹çš„å¯¹è±¡ï¼š

```ts
const obj = {
  innerObj: {
    a: 1,
    b: 2
  }
}
```

æ­£å¸¸æƒ…å†µä¸‹å¯é€šè¿‡å¦‚ä¸‹çš„å½¢å¼å±•å¼€ä»¥å¾—åˆ°å†…å±‚çš„å­—æ®µï¼š

```ts
const obj = {
  innerObj: {
    a: 1,
    b: 2,
  },
};

const {
  innerObj: { a, b = 2 },
} = obj;

console.log(a, b); // 1 2
```

ä½†å¦‚æœé‡Œé¢åµŒå¥—çš„å¯¹è±¡ç¼ºå¤±æ—¶ï¼Œä¸Šé¢çš„å±•å¼€ä¼šæŠ¥é”™ï¼š

```ts
const obj = {};

const {
  innerObj: { a, b = 2 },
} = obj;

console.log(a, b); // ğŸš¨ error: Uncaught TypeError: Cannot read property 'a' of undefined
```

æ­¤æ—¶éœ€è¦åœ¨å±•ç¤ºæ—¶å¯¹å†…å±‚å¯¹è±¡ä¹ŸæŒ‡å®šé»˜è®¤å€¼ï¼Œå½¢å¼å¦‚ä¸‹ï¼š

```ts
const obj = {};

const {
  innerObj: { a, b = 2 } = {},
} = obj;

console.log(a, b); // undefined 2
```

### å±•ç¤ºå­—æ®µåŒ…å«åœ¨å¤šå±‚åµŒå¥—å†…

å½“è¢«å±•å¼€å­—æ®µåŒ…å«åœ¨å¤šå±‚åµŒå¥—å†…æ—¶ï¼Œç”šè‡³å¯ä»¥é€šè¿‡ä¸Šé¢çš„æ–¹å¼ä¸ºæ¯ä¸€å±‚éƒ½æŒ‡å®šé»˜è®¤å€¼ï¼š

```ts
const obj = {}
const { foo: { bar: { a, b = 2 } = {} } = {} } = obj;
console.log(a, b) // undefined 2
```

å¯¹è±¡å±•å¼€æ—¶éœ€è¦æ³¨æ„ï¼Œå½“å…¶ä¸º `null` æ—¶ï¼Œä¸Šè¿°é»˜è®¤å€¼å¹¶ä¸ç”Ÿæ•ˆï¼Œä»ä¼šæŠ¥é”™ã€‚å…·ä½“è§ä¸‹æ–¹è®¨è®ºã€‚

```ts
const obj = {
  foo: {
    bar: null
  }
}
const { foo: { bar: { a, b = 2 } = {} } = {} } = obj;
console.log(a, b) // ğŸš¨ error: Uncaught TypeError: Cannot destructure property 'a' of '{}' as it is null.
```

## `undefined` & `null`

ä¸Šé¢è®¨è®ºçš„é»˜è®¤å€¼ä»…åœ¨è¢«å±•å¼€å­—æ®µçš„å€¼ä¸º `undefined` æ—¶ç”Ÿæ•ˆã€‚æ‹¿è¢«å±•å¼€å­—æ®µä¸ºåŸå§‹ä¸ºä¾‹ï¼Œä¸‹é¢ä¸¤ç§æƒ…å†µé»˜è®¤å€¼éƒ½ä¼šç”Ÿæ•ˆï¼š

- è¢«å±•å¼€å­—æ®µç¼ºå¤±

```ts
const obj = {
  a: 1,
};

const { a, b = 2 } = obj;
console.log(a, b); // 1 2
```

- è¢«å±•å¼€å­—æ®µæ˜¾å¼åœ°æ‹¥æœ‰ `undefined` å€¼

```ts
const obj = {
  a: 1
  b: undefined
}

const { a, b = 2 } = obj;
console.log(a, b) // 1 2
```

ä½†å¦‚æœè¢«å±•å¼€å­—æ®µçš„å€¼ä¸ºé `undefined` æ—¶ï¼Œæ¯”å¦‚ `null`ï¼Œæ­¤æ—¶é»˜è®¤å€¼å¹¶ä¸ç”Ÿæ•ˆï¼Œå› ä¸ºå­—æ®µæ‹¥æœ‰ `null` æœ¬èº«å°±æ˜¯ä¸€ç§åˆæ³•çš„å€¼ï¼Œæ‰€ä»¥å†å¯¹å…¶æŒ‡å®šé»˜è®¤å€¼ä¾¿æ¯«æ— æ„ä¹‰ã€‚

äºæ˜¯ï¼Œå¦‚ä¸‹æƒ…å†µé»˜è®¤å€¼ä¸ä¼šç”Ÿæ•ˆï¼š

```ts
const obj = {
  a: 1
  b: null
}

const { a, b = 2 } = obj;
console.log(a, b) // 1 null
```

è¿™ä¸€è§„åˆ™åœ¨è¢«å±•å¼€å­—æ®µä¸ºå¯¹è±¡æ—¶åŒæ ·é€‚ç”¨ã€‚


