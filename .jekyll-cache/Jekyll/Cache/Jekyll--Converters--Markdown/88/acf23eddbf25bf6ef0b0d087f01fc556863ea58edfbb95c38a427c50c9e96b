I"T<h1 id="objective-c-ä¸­ä¸å¸¦åŠ å‡å·çš„æ–¹æ³•">Objective-C ä¸­ä¸å¸¦åŠ å‡å·çš„æ–¹æ³•</h1>

<p>æ˜¾è€Œæ˜“è§çš„äº‹å®æ˜¯ï¼ŒObjective-C ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">+</code> è¡¨ç¤ºç±»æ–¹æ³•ï¼Œ<code class="language-plaintext highlighter-rouge">-</code> è¡¨ç¤ºå®ä¾‹æ–¹æ³•ã€‚</p>

<p>ä½†çœ‹åˆ«äººä»£ç è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šå‘ç°ä¸€ç§ï¼Œä¸å¸¦åŠ å‡å·çš„æ–¹æ³•ã€‚</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">@implementation</span> <span class="nc">MyViewController</span>

<span class="kt">void</span> <span class="nf">foo</span><span class="p">(){</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"msg from foo..."</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">loadView</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">super</span> <span class="nf">loadView</span><span class="p">];</span>
  <span class="n">foo</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">@end</span>

</code></pre></div></div>

<p>è¿™ç§æ˜¯æ··æ­çš„ C ä»£ç ã€‚</p>

<p>å½“ç„¶å½“ C æ–¹æ³•å†™åœ¨ <code class="language-plaintext highlighter-rouge">@implementation</code> å†…ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œç¼–è¯‘å™¨ä¼šæ­£ç¡®åœ°å¤„ç†ã€‚å› ä¸º C æ–¹æ³•ä¸¥æ ¼æ¥è¯´ä¸éš¶å±äºç±»ï¼Œå¥½çš„åšæ³•æ˜¯å§‹ç»ˆå†™åœ¨ç±»å®ç°çš„å¤–éƒ¨ã€‚</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">foo</span><span class="p">(){</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"msg from foo..."</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">@implementation</span> <span class="nc">MyViewController</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">loadView</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">super</span> <span class="nf">loadView</span><span class="p">];</span>
  <span class="n">foo</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">@end</span>

</code></pre></div></div>

<h2 id="c-ä¸­è·å–-objective-c-çš„æ•°æ®">C ä¸­è·å– Objective-C çš„æ•°æ®</h2>

<p>ä½†å¦‚æœä½ ä»¥ä¸ºå°† C ä»£ç å†™åœ¨ <code class="language-plaintext highlighter-rouge">@implementation</code> å†…éƒ¨å°±å¯ä»¥è·å–åˆ°ç±»é‡Œé¢çš„æ•°æ®ï¼Œé‚£æ˜¯ä¸ç°å®çš„ã€‚</p>

<p><em>MyViewController.h</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">@interface</span> <span class="nc">MyViewController</span> <span class="p">()</span>
<span class="k">@property</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">someStr</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre></div></div>

<p><em>MyViewController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">@implementation</span> <span class="nc">MyViewController</span>
<span class="c1">// void foo() { printf(self.someStr); } // ğŸš¨ Use of undeclared identifier '_someStr'</span>
<span class="kt">void</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span> <span class="n">printf</span><span class="p">(</span><span class="n">_someStr</span><span class="p">);</span> <span class="p">}</span> <span class="c1">// ğŸš¨ Use of undeclared identifier '_someStr'</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">loadView</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">super</span> <span class="nf">loadView</span><span class="p">];</span>
  <span class="n">self</span><span class="p">.</span><span class="n">someStr</span> <span class="o">=</span> <span class="s">@"some string..."</span><span class="p">;</span>
  <span class="n">foo</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">@end</span>

</code></pre></div></div>

<p>æ­£ç¡®çš„åšæ³•æ˜¯å°† Objective-C çš„å¯¹è±¡ä¼ é€’ç»™ C ä»£ç ï¼Œè¿™æ ·åœ¨ C ä¸­ä¾¿æœ‰äº†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œæ•°æ®å°±å¯ä»¥æ­£å¸¸è·å–äº†ã€‚</p>

<p><em>MyViewController.h</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@interface</span> <span class="nc">MyViewController</span> <span class="p">:</span> <span class="nc">UIViewController</span>

<span class="k">@property</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">someStr</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">myObjcMethod</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre></div></div>

<p><em>MyViewController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="n">MyViewController</span><span class="o">*</span> <span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="p">[</span><span class="n">obj</span><span class="p">.</span><span class="n">someStr</span> <span class="nf">UTF8String</span><span class="p">]);</span>
  <span class="p">[</span><span class="n">obj</span> <span class="nf">myObjcMethod</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">@implementation</span> <span class="nc">MyViewController</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">loadView</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">super</span> <span class="nf">loadView</span><span class="p">];</span>
  <span class="n">self</span><span class="p">.</span><span class="n">someStr</span> <span class="o">=</span> <span class="s">@"some string..."</span><span class="p">;</span>
  <span class="n">foo</span><span class="p">(</span><span class="n">self</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">myObjcMethod</span> <span class="p">{</span>
  <span class="n">NSLog</span><span class="p">(</span><span class="s">@"msg from my objc method"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">@end</span>

</code></pre></div></div>

<h2 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æº</h2>

<ul>
  <li><a href="https://stackoverflow.com/questions/801976/mixing-c-functions-in-an-objective-c-class">Mixing C functions in an Objective-C class</a></li>
  <li><a href="https://stackoverflow.com/questions/14535660/accessing-objective-c-variable-from-c-function">accessing objective c variable from c function</a></li>
</ul>
:ET