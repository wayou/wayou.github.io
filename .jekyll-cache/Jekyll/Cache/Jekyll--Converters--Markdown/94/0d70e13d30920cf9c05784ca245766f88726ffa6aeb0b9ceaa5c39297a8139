I"Í<h1 id="macos-ç¦ç”¨ç¨‹åºçš„é»‘è‰²æ¨¡å¼dark-mode">macOS ç¦ç”¨ç¨‹åºçš„é»‘è‰²æ¨¡å¼/Dark Mode</h1>

<p>macOS Mojave ä¸­å¼•å…¥äº†ç³»ç»Ÿå±‚é¢çš„é»‘è‰²æ¨¡å¼ï¼ŒChrome 73 åœ¨åº”ç”¨ä¸­æ”¯è¡Œäº†è¿™ä¸€æ¨¡å¼ï¼Œå³ç³»ç»Ÿè®¾ç½®ä¸ºé»‘è‰²æ¨¡å¼æ—¶ï¼ŒChrome ä¼šè‡ªåŠ¨é€‚åº”åˆ‡æ¢åˆ° Dark Modeã€‚</p>

<p><img src="https://user-images.githubusercontent.com/3783096/55413010-114c0f80-559b-11e9-9ec1-7080e80ad92a.png" alt="Chrome è·Ÿéšç³»ç»Ÿè®¾ç½®çš„é»‘è‰²æ¨¡å¼" />
<em>Chrome è·Ÿéšç³»ç»Ÿè®¾ç½®çš„é»‘è‰²æ¨¡å¼</em></p>

<p>å¾ˆé…·å¯¹ä¸ï¼Ÿ</p>

<p>ä½†å…¶å®é»‘è‰²æ¨¡å¼ä¸‹æ ‡é¢˜ä¸é¡¶éƒ¨ç³»ç»Ÿèœå•èä¸ºä¸€ä½“ï¼Œä¸”é»‘è‰²æ¨¡å¼ä¸‹ Chrome æ ‡ç­¾ä¸Šå†…å®¹è¾¨è¯†åº¦ä¹Ÿä¸é«˜äº†ï¼Œçœ‹èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹åˆ«æ‰­ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªæ¨¡å¼è®©äººå¾ˆéš¾åŒºåˆ†éšèº«æ¨¡å¼ã€‚</p>

<p><img src="https://user-images.githubusercontent.com/3783096/55413062-2d4fb100-559b-11e9-88f2-3bfe5c5a5b97.png" alt="Chrome é»‘è‰²æ¨¡å¼ä¸‹ä¸éšèº«æ¨¡å¼çš„å¯¹æ¯”" />
<em>Chrome é»‘è‰²æ¨¡å¼ä¸‹ä¸éšèº«æ¨¡å¼çš„å¯¹æ¯”</em></p>

<p>æ‰€ä»¥å†³å®šç³»ç»Ÿä½¿ç”¨ Dark Mode çš„æƒ…å†µä¸‹å°† Chrome çš„é»‘è‰²ç¦ç”¨ã€‚</p>

<p>é€šè¿‡å‘½ä»¤è¡Œä¸­è®¾ç½® <code class="language-plaintext highlighter-rouge">defaults</code> å€¼å¯è¾¾åˆ°ç›®çš„ã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>defaults write com.google.Chrome NSRequiresAquaSystemAppearance <span class="nt">-bool</span> Yes
</code></pre></div></div>

<p>å¦‚æœæƒ³æ¢å¤é»˜è®¤ï¼Œåªéœ€è¦å°†åˆšæ‰è®¾ç½®çš„å€¼åˆ æ‰æˆ–è€…å°† <code class="language-plaintext highlighter-rouge">Yes</code> è®¾ç½®æˆ <code class="language-plaintext highlighter-rouge">No</code>ã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>defaults delete com.google.Chrome NSRequiresAquaSystemAppearance
</code></pre></div></div>

<h2 id="ç¦ç”¨ä»»æ„-app-çš„-dark-mode">ç¦ç”¨ä»»æ„ App çš„ Dark Mode</h2>

<p>æ¨è€Œå¹¿ä¹‹ï¼Œä¸ä»…å¯ç¦æ­¢ Chrome è¿›å…¥ Dark Modeï¼Œè¿˜å¯è®©å…¶ä»–ä»»æ„ App ä¸è¿›å…¥ Dark Modeï¼Œå¦‚æœè¯¥åº”ç”¨æ”¯æŒè¿‡ Dark Mode çš„è¯ã€‚åªéœ€è¦æ‰¾å‡ºè¯¥åº”ç”¨çš„æ‰“åŒ…å‘å¸ƒçš„ bundle id å³å¯ã€‚è¿™ä¸ª id å¯é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥å¾—åˆ°ã€‚æ¯”å¦‚æŸ¥çœ‹ Canary ç‰ˆæœ¬çš„ Chromeï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>osascript <span class="nt">-e</span> <span class="s1">'id of app "Google Chrome Canary"'</span>
com.google.Chrome.canary
</code></pre></div></div>

<p>å…¶ä¸­ <code class="language-plaintext highlighter-rouge">Google Chrome Canary</code> ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰æ˜¯ä½ åœ¨ç¨‹åºæ–‡ä»¶å¤¹ä¸‹çœ‹åˆ°çš„ <code class="language-plaintext highlighter-rouge">.app</code> åç¼€çš„é‚£ä¸ªæ–‡ä»¶çš„æ–‡ä»¶åï¼Œæ¯”å¦‚è¿™é‡Œ <code class="language-plaintext highlighter-rouge">Google Chrome Canary.app</code>ã€‚å¾—åˆ°çš„ id ä¸º <code class="language-plaintext highlighter-rouge">com.google.Chrome.canary</code> å†ä»£å…¥æœ€ä¸Šé¢çš„å‘½ä»¤ä¸­å³å¯ã€‚</p>

<h3 id="ç¨‹åº-bundle-id-çš„æŸ¥æ‰¾">ç¨‹åº bundle id çš„æŸ¥æ‰¾</h3>

<p>æ›´ä¸ºå‡†å¤‡çš„æ–¹å¼ï¼ŒæŸ¥æ‰¾ idï¼Œæ˜¯é€šè¿‡å³é”® <code class="language-plaintext highlighter-rouge">.app</code> æ–‡ä»¶é€‰æ‹© <code class="language-plaintext highlighter-rouge">Show Package Contents</code>ï¼Œç„¶åæ‰¾åˆ° <code class="language-plaintext highlighter-rouge">Contents&gt;info.plist</code> æ–‡ä»¶ï¼Œæœç´¢ <code class="language-plaintext highlighter-rouge">CFBundleIdentifier</code> å³å¯çœ‹åˆ°è¯¥ç¨‹åºçš„ bundle idã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>defaults write com.google.Chrome.canary NSRequiresAquaSystemAppearance <span class="nt">-bool</span> Yes
</code></pre></div></div>

<p>è¿™é‡Œ id æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œå†™é”™ä¸ç”Ÿæ•ˆã€‚</p>

<p>è¦æ¢å¤é»˜è®¤æ—¶åŒç†ã€‚</p>

<h3 id="ä¸€äº›å¸¸ç”¨è½¯ä»¶">ä¸€äº›å¸¸ç”¨è½¯ä»¶</h3>

<ul>
  <li>ç½‘æ˜“äº‘éŸ³ä¹</li>
</ul>

<p>åŒç†ï¼Œè®¾ç½®ç½‘æ˜“äº‘éŸ³ä¹å…³é—­å…¶é»‘è‰²æ¨¡å¼ï¼Œé€šè¿‡ <code class="language-plaintext highlighter-rouge">plist</code> æ–‡ä»¶å‘ç°å…¶ bundle id ä¸º <code class="language-plaintext highlighter-rouge">com.netease.163music</code>ï¼Œ</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
&lt;key&gt;CFBundleIdentifier&lt;/key&gt;
&lt;string&gt;com.netease.163music&lt;/string&gt;
...
</code></pre></div></div>

<p>è®¾ç½®ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>defaults write com.netease.163music NSRequiresAquaSystemAppearance <span class="nt">-bool</span> Yes
</code></pre></div></div>

<ul>
  <li>iBooks:</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>defaults write com.apple.iBooksX NSRequiresAquaSystemAppearance <span class="nt">-bool</span> Yes
</code></pre></div></div>

<ul>
  <li>Xcode:</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>defaults write com.apple.dt.Xcode NSRequiresAquaSystemAppearance <span class="nt">-bool</span> YES
</code></pre></div></div>

<ul>
  <li>Notes:</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>defaults write com.apple.Notes NSRequiresAquaSystemAppearance <span class="nt">-bool</span> Yes
</code></pre></div></div>

<h3 id="å…¶ä»–é»˜è®¤å€¼">å…¶ä»–é»˜è®¤å€¼</h3>

<p>é€šè¿‡ <code class="language-plaintext highlighter-rouge">defaults read</code> å¯æŸ¥çœ‹åˆ°æ‰€æœ‰åº”ç”¨å·²ç»å­˜åœ¨çš„çš„ defaults å€¼ã€‚</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>defaults <span class="nb">read</span> <span class="o">&gt;&gt;</span> defaults.txt
</code></pre></div></div>

<p>æ‰“å¼€ <code class="language-plaintext highlighter-rouge">defaults.txt</code> åæœç´¢ç›¸åº” app çš„ id å¯çœ‹åˆ°å…¶æ‰€æœ‰å¯ç”¨å€¼çš„åˆ—è¡¨ã€‚æ¯”å¦‚æœç´¢ <code class="language-plaintext highlighter-rouge">com.google.chrome</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
      "com.google.Chrome" =     {
        KeychainReauthorizeInAppSpring2017 = 2;
        KeychainReauthorizeInAppSpring2017Success = 1;
        LastRunAppBundlePath = "/Applications/Google Chrome.app";
        ...
    };
    "com.google.Chrome.canary" =     {
        KeychainReauthorizeInAppSpring2017 = 1;
        KeychainReauthorizeInAppSpring2017Success = 1;
        LastRunAppBundlePath = "/Applications/Google Chrome Canary.app";
        ...
    };
}
</code></pre></div></div>

<h3 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æº</h3>

<ul>
  <li><a href="https://superuser.com/questions/1417973/how-to-disable-google-chrome-dark-mode">How to disable Google Chrome Dark Mode?</a></li>
  <li><a href="https://apple.stackexchange.com/questions/195244/concise-compact-list-of-all-defaults-currently-configured-and-their-values">Concise, compact list of all â€˜defaultsâ€™ currently configured and their values?</a></li>
</ul>

:ET