I"®<h1 id="typescript-é¡¹ç›®-rootdir-è®¾ç½®åŠæ ¹ç›®å½•ä¹‹å¤–èµ„æºçš„å¼•ç”¨">TypeScript é¡¹ç›® <code class="language-plaintext highlighter-rouge">rootDir</code> è®¾ç½®åŠæ ¹ç›®å½•ä¹‹å¤–èµ„æºçš„å¼•ç”¨</h1>

<h2 id="æ§åˆ¶è¾“å‡ºç›®å½•çš„å±‚çº§">æ§åˆ¶è¾“å‡ºç›®å½•çš„å±‚çº§</h2>

<p>å‡è®¾é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ dest
â”œâ”€â”€ node_modules
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ index.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ yarn.lock
</code></pre></div></div>

<p>åœ¨ <code class="language-plaintext highlighter-rouge">"outDir": "./dest"</code> é…ç½®æƒ…å†µä¸‹ï¼Œ<code class="language-plaintext highlighter-rouge">src/index.ts</code> ç¼–è¯‘åè¾“å‡ºä½ç½®ä¸º <code class="language-plaintext highlighter-rouge">dest/src/index.js</code>ã€‚</p>

<p>è¾“å‡ºç›®å½•å¸¦ä¸Šäº†çš„ <code class="language-plaintext highlighter-rouge">src</code> è¿™ä¸€å±‚ï¼Œæ˜¾ç„¶ä¸æ˜¯é‚£ä¹ˆåˆç†ã€‚</p>

<p>è§£å†³åŠæ³•æ˜¯æŒ‡å®š <code class="language-plaintext highlighter-rouge">rootDir: â€œsrcâ€</code>ã€‚è¿™æ ·ï¼Œæ ¹ç›®å½•å˜æˆäº† <code class="language-plaintext highlighter-rouge">src</code>ï¼Œç¼–è¯‘åè¾“å‡ºåˆ™æ²¡æœ‰äº† <code class="language-plaintext highlighter-rouge">src</code> è¿™ä¸€å±‚ã€‚</p>

<h2 id="æ ¹ç›®å½•ä¹‹å¤–èµ„æºçš„å¼•ç”¨">æ ¹ç›®å½•ä¹‹å¤–èµ„æºçš„å¼•ç”¨</h2>

<p>ä½†ï¼Œè¿™æ ·åšå­˜åœ¨å±€é™æ€§ã€‚å› ä¸ºæ ¹ç›®å½•è®¾ç½®ä¸º <code class="language-plaintext highlighter-rouge">src</code> åï¼Œå°±é™åˆ¶äº†ä»£ç ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">src</code> ä¹‹å¤–èµ„æºçš„èƒ½åŠ›ã€‚</p>

<p>ä»€ä¹ˆæ„æ€å‘¢ï¼Œå‡è®¾æˆ‘ä»¬æƒ³åœ¨ <code class="language-plaintext highlighter-rouge">src/index.ts</code> ä¸­å¼•ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ <code class="language-plaintext highlighter-rouge">package.json</code> æ–‡ä»¶ï¼Œ</p>

<p>src/index.ts</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">pkg</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../package.json</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>TypeScript ä¸­å¯¼å…¥ JSON æ–‡ä»¶éœ€è¦æ·»åŠ  <code class="language-plaintext highlighter-rouge">resolveJsonModule : true</code> é…ç½®ã€‚å¥½çš„ã€‚</p>

<p>åŠ ä¸Šåå‘ç°ï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>File â€˜/myapp/package.json' is not under 'rootDir' â€˜/myapp/src'. 'rootDir' is expected to contain all source files.ts(6059)
</code></pre></div></div>

<p>å› ä¸ºå‰é¢æˆ‘ä»¬é…ç½®äº† <code class="language-plaintext highlighter-rouge">src</code> ä¸ºæ ¹ç›®å½•ï¼Œè€Œ <code class="language-plaintext highlighter-rouge">package.json</code> å¹¶ä¸åœ¨ <code class="language-plaintext highlighter-rouge">src</code> ä¸‹é¢ï¼Œæ‰€ä»¥ä»£ç ä¸­å¼•ç”¨å°±è¶Šç•Œäº†ï¼Œè¿™å°±æ˜¯å‰é¢è¯´çš„å±€é™æ€§ã€‚</p>

<h3 id="è‡ªå®šä¹‰å£°æ˜æ–‡ä»¶">è‡ªå®šä¹‰å£°æ˜æ–‡ä»¶</h3>

<p>é‚£ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŠŠåˆšåˆšæ·»åŠ çš„ <code class="language-plaintext highlighter-rouge">resolveJsonModule : true</code> å»æ‰æˆ–è€…æ”¹æˆ <code class="language-plaintext highlighter-rouge">resolveJsonModule : false</code>ã€‚</p>

<p>æ¥ä¸‹æ¥åœ¨ <code class="language-plaintext highlighter-rouge">src</code> ä¸‹æ·»åŠ ç±»å‹å£°æ˜æ–‡ä»¶ä»¥æ”¯æŒ JSON çš„å¯¼å…¥ï¼Œå³ï¼Œé€šè¿‡è‡ªå®šä¹‰å£°æ˜çš„æ–¹å¼è®© TypeScript è®¤è¯† JSON æ–‡ä»¶è€Œä¸ç”¨åŸç”Ÿçš„é…ç½®ã€‚</p>

<p>src/typings.d.ts</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">declare</span> <span class="kr">module</span> <span class="dl">"</span><span class="s2">*.json</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>è¿™æ ·ï¼Œå®Œç¾è§£å†³ã€‚</p>

<p>æœ€åçš„é¡¹ç›®ç›®å½•ä¼šé•¿è¿™æ ·ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
â”œâ”€â”€ dest
â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â””â”€â”€ package.json
â”œâ”€â”€ node_modules
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ index.ts
â”‚Â Â  â””â”€â”€ typings.d.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ yarn.lock
</code></pre></div></div>

<h2 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æº</h2>

<ul>
  <li><a href="https://stackoverflow.com/a/61426303/1553656">â€˜package.jsonâ€™ is not under â€˜rootDirâ€™</a></li>
</ul>

:ET