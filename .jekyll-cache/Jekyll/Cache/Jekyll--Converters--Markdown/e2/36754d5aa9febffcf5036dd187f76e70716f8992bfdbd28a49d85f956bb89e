I"ÎC<h1 id="cocoatouch-view-controller-ç›¸å…³">CocoaTouch View Controller ç›¸å…³</h1>

<p>åº”ç”¨çš„å†…å®¹å‘ˆç°åœ¨ä¸€ä¸ª window ä¸­ï¼Œä¸€ä¸ª window éœ€è¦åŒ…å«ä¸€ä¸ª rootViewController æ¥ç®¡ç†åº”ç”¨ä¸­æ•°æ®ï¼Œè§†å›¾çš„å±•ç°åŠè·³è½¬ã€‚æ‰€ä»¥ View Controller  ä¼šæ‰®æ¼”å¾ˆé‡è¦çš„è§’è‰²ã€‚</p>

<h2 id="è§†å›¾æ§åˆ¶å™¨view-controller">è§†å›¾æ§åˆ¶å™¨/View Controller</h2>

<p>View Controller ç”¨æ¥ç®¡ç†è§†å›¾ï¼Œæ¯”å¦‚è§†å›¾åˆ›å»ºï¼Œè·³è½¬åˆ°å…¶ä»–è§†å›¾ï¼ŒåŒæ—¶å……å½“ç•Œé¢ä¸æ•°æ®çš„ä¸­é—´äººï¼Œç®¡ç†æ•°æ®å˜æ›´åŠæ•°æ®åœ¨è§†å›¾ä¸­çš„å±•ç°ã€‚</p>

<p>æ‰€ä»¥å¯åˆ†ä¸ºä¸¤ç±»ï¼Œ</p>
<ul>
  <li>å®¹å™¨ç±»ï¼Œæ¯”å¦‚ <a href="https://developer.apple.com/documentation/uikit/uinavigationcontroller">UINavigationController</a>ï¼Œ<a href="https://developer.apple.com/documentation/uikit/uisplitviewcontroller">UISplitViewController</a> åŠ <a href="https://developer.apple.com/documentation/uikit/uipageviewcontroller">UIPageViewController</a> ...</li>
  <li>å†…å®¹ç±»ã€‚<a href="https://developer.apple.com/documentation/uikit/uitableviewcontroller">UITableViewController</a>ï¼Œ<a href="https://developer.apple.com/documentation/uikit/uicollectionviewcontroller">UICollectionViewController</a> ç­‰ï¼Œè¿˜åŒ…æ‹¬ç”¨æˆ·é€šè¿‡ç»§æ‰¿ UIViewContrller æ–¹å¼åˆ›å»ºç”¨æ¥å±•ç¤ºå†…å®¹çš„ View Controllerã€‚</li>
</ul>

<p>ä¸€èˆ¬å®¹å™¨ç±»çš„ä¼šä½œä¸º <a href="https://developer.apple.com/documentation/uikit/uiwindow">UIWindow</a> çš„ <a href="https://developer.apple.com/documentation/uikit/uiwindow/1621581-rootviewcontroller">rootViewController</a>ã€‚</p>

<p>ä½¿ç”¨ Storyboard æˆ– XIB å¼€å‘è§†å›¾æ—¶ï¼Œ rootViewController æ˜¯è‡ªåŠ¨è®¾ç½®çš„ï¼Œä»¥ä¸‹æ˜¯æ‰‹åŠ¨è®¾ç½®çš„ç¤ºä¾‹ï¼š</p>

<p><em>AppDelegate.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span>
    <span class="nf">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>
  <span class="n">self</span><span class="p">.</span><span class="n">window</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIWindow</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:[</span><span class="n">UIScreen</span> <span class="nf">mainScreen</span><span class="p">].</span><span class="n">bounds</span><span class="p">];</span>
  <span class="n">self</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">rootViewController</span> <span class="o">=</span> <span class="p">[</span><span class="n">NavigatorController</span> <span class="nf">new</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">window</span> <span class="nf">makeKeyAndVisible</span><span class="p">];</span>
  <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="å‘½å">å‘½å</h2>

<p>View Controller åŸºç±»æ˜¯   <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller?language=objc">UIViewController</a>ï¼Œè®²é“ç†å…¶å­ç±»éƒ½å‘½åæˆ XYZViewController æ˜¯æ¯”è¾ƒç¬¦åˆé€»è¾‘çš„ï¼ŒUIKit è‡ªå¸¦çš„å¤§éƒ¨åˆ†ç»„ä»¶ç¡®å®å¦‚æ­¤ï¼Œä¹Ÿæœ‰ç•¥å» View ç›´æ¥å« XYZController çš„ï¼Œæ¯”å¦‚å®¹å™¨ç±»å‹ <a href="https://developer.apple.com/documentation/uikit/uinavigationcontroller">UINavigationController</a>ï¼Œå¦‚æœæœç´¢ UIKit çš„è¯ï¼Œä¸¤ç§åç§°éƒ½æŒºå¤šçš„ï¼Œ</p>

<p><em>UIKit/UIKitCore.h</em></p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#import &lt;UIKit/UICollectionViewController.h&gt;
#import &lt;UIKit/UIDocumentMenuViewController.h&gt;
#import &lt;UIKit/UIDocumentPickerExtensionViewController.h&gt;
#import &lt;UIKit/UIDocumentPickerViewController.h&gt;
#import &lt;UIKit/UIFontPickerViewController.h&gt;
#import &lt;UIKit/UIInputViewController.h&gt;
#import &lt;UIKit/UIPageViewController.h&gt;
#import &lt;UIKit/UIReferenceLibraryViewController.h&gt;
#import &lt;UIKit/UISearchContainerViewController.h&gt;
#import &lt;UIKit/UISplitViewController.h&gt;
#import &lt;UIKit/UITableViewController.h&gt;
#import &lt;UIKit/UIViewController.h&gt;
</span>
<span class="cp">#import &lt;UIKit/UIAlertController.h&gt;
#import &lt;UIKit/UICloudSharingController.h&gt;
#import &lt;UIKit/UIImagePickerController.h&gt;
#import &lt;UIKit/UIMenuController.h&gt;
#import &lt;UIKit/UINavigationController.h&gt;
#import &lt;UIKit/UIPopoverController.h&gt;
#import &lt;UIKit/UIPopoverPresentationController.h&gt;
#import &lt;UIKit/UIPresentationController.h&gt;
#import &lt;UIKit/UIPrinterPickerController.h&gt;
#import &lt;UIKit/UIPrintInteractionController.h&gt;
#import &lt;UIKit/UISearchController.h&gt;
#import &lt;UIKit/UISearchDisplayController.h&gt;
#import &lt;UIKit/UITabBarController.h&gt;
#import &lt;UIKit/UIVideoEditorController.h&gt;
</span></code></pre></div></div>

<h2 id="è§†å›¾æ ‘">è§†å›¾æ ‘</h2>

<p>æ— è®ºå®¹å™¨ç±»è¿˜æ˜¯å†…å®¹ç±»ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªæ ¹è§†å›¾èŠ‚ç‚¹ï¼Œå¯é€šè¿‡ <code class="language-plaintext highlighter-rouge">self.view</code> è®¿é—®ï¼Œé€šè¿‡å®ƒå¯æ·»åŠ å…¶ä»–è§†å›¾ï¼Œä»è€Œå½¢æˆè§†å›¾æ ‘ã€‚</p>

<p><img src="https://developer.apple.com/library/archive/featuredarticles/ViewControllerPGforiPhoneOS/Art/VCPG-container-acting-as-root-view-controller_2-2_2x.png" alt="A container acting as the root view controller å›¾ç‰‡æ¥è‡ª Apple æ–‡æ¡£" /></p>
<p align="center">A container acting as the root view controller å›¾ç‰‡æ¥è‡ª Apple æ–‡æ¡£</p>

<p>ä¸€èˆ¬ä½œä¸º rootViewController çš„æ§åˆ¶å™¨ä¸ç›´æ¥ç®¡ç† viewï¼Œè€Œæ˜¯å‘å…¶ä¸­æ·»åŠ å…¶ä»– view controllerï¼Œè¿™äº› controller ä¸­åŒ…å«éœ€è¦æ˜¾ç¤ºçš„ viewã€‚è€Œ rootViewController çš„å°ºå¯¸ï¼Œä¾æ®å…¶æ‰€å¤„çš„ä½ç½®è€Œå®šï¼Œå¦‚æœæ˜¯ window çš„ rootViewControllerï¼Œåˆ™æ’‘æ»¡æ•´ä¸ª windowã€‚</p>

<blockquote>
  <p>The size and position of the root view is determined by the object that owns it, which is either a parent view controller or the appâ€™s window. The view controller that is owned by the window is the appâ€™s root view controller and its view is sized to fill the window.
-- <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller?language=objc">UIViewController - View Management</a></p>
</blockquote>

<h2 id="view-contrller-çš„å‘ˆç°">View Contrller çš„å‘ˆç°</h2>

<p>ä¸¤ç§æ–¹å¼ï¼Œ</p>
<ul>
  <li>é€šè¿‡å®¹å™¨å‹æ¥å‘ˆç°</li>
  <li>åŸåœ°ç›´æ¥å‘ˆç°</li>
</ul>

<h3 id="å®¹å™¨å‹">å®¹å™¨å‹</h3>

<p>æ¯”å¦‚ UITabBarController å¯ä»¥é…ç½®å¤šä¸ª tab åŠå…¶å…³è”çš„ View Controllerï¼Œtab åˆ‡æ¢æ—¶ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ç›¸åº”çš„å­ controllerã€‚
å†æ¯”å¦‚ UINavigationControllerï¼Œå®ƒç»´æŠ¤äº†ä¸€ä¸ª View Ccontroller çš„æ ˆï¼Œå½“å‘å…¶ä¸­ push æ–°çš„ View Controller æ—¶ç•Œé¢ä¾¿ä¼šåˆ‡åˆ°ç›¸åº”çš„ controllerã€‚</p>

<p>ç¤ºä¾‹ï¼š</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">self</span> <span class="nf">pushViewController</span><span class="p">:[</span><span class="n">UIViewController</span> <span class="nf">new</span><span class="p">]</span> <span class="nf">animated</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
</code></pre></div></div>

<h3 id="åŸåœ°ç›´æ¥å‘ˆç°">åŸåœ°ç›´æ¥å‘ˆç°</h3>

<p>UIViewController æä¾›äº†ä¸€äº›æ–¹æ³•å¯ä»¥ä½¿ç”¨å¤šç§è¯•å‘ˆç° View Controllerï¼ŒåŒ…æ‹¬å…¨å±çš„ï¼Œæ¨¡æ€ç±»å‹çš„ï¼Œ</p>

<ul>
  <li>showViewController:sender:</li>
  <li>showDetailViewController:sender:</li>
  <li>presentViewController:animated:completion:</li>
</ul>

<p>ç¤ºä¾‹ï¼š</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">add</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>
   <span class="c1">// Create the root view controller for the navigation controller</span>
   <span class="c1">// The new view controller configures a Cancel and Done button for the</span>
   <span class="c1">// navigation bar.</span>
   <span class="n">RecipeAddViewController</span> <span class="o">*</span><span class="n">addController</span> <span class="o">=</span> <span class="p">[[</span><span class="n">RecipeAddViewController</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
 
   <span class="n">addController</span><span class="p">.</span><span class="n">modalPresentationStyle</span> <span class="o">=</span> <span class="n">UIModalPresentationFullScreen</span><span class="p">;</span>
   <span class="n">addController</span><span class="p">.</span><span class="n">transitionStyle</span> <span class="o">=</span> <span class="n">UIModalTransitionStyleCoverVertical</span><span class="p">;</span>
   <span class="p">[</span><span class="n">self</span> <span class="nf">presentViewController</span><span class="p">:</span><span class="n">addController</span> <span class="nf">animated</span><span class="p">:</span><span class="nb">YES</span> <span class="n">completion</span><span class="o">:</span> <span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="uinavigationcontroller-ä½¿ç”¨ç¤ºä¾‹">UINavigationController ä½¿ç”¨ç¤ºä¾‹</h2>

<p>UINavigationController åŒ…å«ä¸€ä¸ªå­˜å‚¨ View Controller çš„æ•°ç»„ï¼Œé€šè¿‡å‘å…¶ä¸­å‹å…¥æ–°çš„ View Controller æ¥å‘ˆç°æ–°é¡µé¢ã€‚</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span><span class="n">copy</span><span class="p">)</span> <span class="n">NSArray</span><span class="o">&lt;</span><span class="n">__kindof</span> <span class="n">UIViewController</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">viewControllers</span><span class="p">;</span> <span class="c1">// The current view controller stack.</span>
</code></pre></div></div>

<p>ç¤ºä¾‹ï¼š</p>

<p><em>MyNavigationController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">super</span> <span class="nf">viewDidLoad</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span> <span class="nf">pushViewController</span><span class="p">:[</span><span class="n">UIViewController</span> <span class="nf">new</span><span class="p">]</span> <span class="nf">animated</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="å¯¼èˆª">å¯¼èˆª</h3>

<p>å¯¼èˆªæ˜¯å±äº UINavigationController ä¸­å­ Controller çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨å­ Controller ä¸­å»è®¾ç½®ï¼Œè€Œä¸æ˜¯åœ¨ UINavigationController ä¸­ã€‚åŒæ ·ï¼Œå¯¼èˆªçš„æ ‡é¢˜ä¹Ÿæ˜¯ã€‚</p>

<p><em>MyViewController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
  <span class="n">self</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">@"ttile"</span><span class="p">;</span>
  <span class="n">UIBarButtonItem</span> <span class="o">*</span><span class="n">left</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"left"</span>
                                                           <span class="nl">style:</span><span class="n">UIBarButtonItemStylePlain</span>
                                                          <span class="nl">target:</span><span class="nb">nil</span>
                                                          <span class="nl">action:</span><span class="nb">nil</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span> <span class="nf">setLeftBarButtonItem</span><span class="p">:</span><span class="n">left</span><span class="p">];</span>
  <span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="s">@"prompt"</span><span class="p">;</span>
  <span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">backBarButtonItem</span> <span class="o">=</span>
      <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"back to launch screen"</span>
                                       <span class="nl">style:</span><span class="n">UIBarButtonItemStyleDone</span>
                                      <span class="nl">target:</span><span class="nb">nil</span>
                                      <span class="nl">action:</span><span class="nb">nil</span><span class="p">];</span>
  <span class="n">UIBarButtonItem</span> <span class="o">*</span><span class="n">right</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"right"</span>
                                                            <span class="nl">style:</span><span class="n">UIBarButtonItemStylePlain</span>
                                                           <span class="nl">target:</span><span class="nb">nil</span>
                                                           <span class="nl">action:</span><span class="nb">nil</span><span class="p">];</span>
  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span> <span class="nf">setRightBarButtonItem</span><span class="p">:</span><span class="n">right</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="toolbar">toolbar</h3>

<p>è¦å±•ç¤º toolbarï¼Œéœ€è¦å…ˆåœ¨ NavigationContorller ä¸­è®¾ç½®æˆæ˜¾ç¤ºï¼Œ</p>

<p><em>MyNavigationController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">self</span><span class="p">.</span><span class="n">toolbarHidden</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
</code></pre></div></div>

<p>ç„¶ååœ¨å­ Controller ä¸­é…ç½®å…·ä½“è¦å±•ç¤ºçš„å†…å®¹ï¼š</p>

<p><em>MyViewController.m</em></p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
  <span class="n">self</span><span class="p">.</span><span class="n">toolbarItems</span> <span class="o">=</span> <span class="p">@[</span>
    <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"btn1"</span>
                                     <span class="nl">style:</span><span class="n">UIBarButtonItemStylePlain</span>
                                    <span class="nl">target:</span><span class="nb">nil</span>
                                    <span class="nl">action:</span><span class="nb">nil</span><span class="p">],</span>
    <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithTitle</span><span class="p">:</span><span class="s">@"btn2"</span>
                                     <span class="nl">style:</span><span class="n">UIBarButtonItemStylePlain</span>
                                    <span class="nl">target:</span><span class="nb">nil</span>
                                    <span class="nl">action:</span><span class="nb">nil</span><span class="p">]</span>
  <span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æº</h2>

<ul>
  <li><a href="https://developer.apple.com/library/archive/featuredarticles/ViewControllerPGforiPhoneOS/">View Controller Programming Guide for iOS</a></li>
</ul>
:ET