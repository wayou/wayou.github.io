(function(){var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:a,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:a,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:a,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};e.bullet=/(?:[*+-]|\d+\.)/;e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;e.item=h(e.item,"gm")(/bull/g,e.bullet)();e.list=h(e.list)(/bull/g,e.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+e.def.source+")")();e.blockquote=h(e.blockquote)("def",e.def)();e._tag="(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code"+"|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo"+"|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b";e.html=h(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)();e.paragraph=h(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)();e.normal=u({},e);e.gfm=u({},e.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/});e.gfm.paragraph=h(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|"+e.list.source.replace("\\1","\\3")+"|")();e.tables=u({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});function t(t){this.tokens=[];this.tokens.links={};this.options=t||p.defaults;this.rules=e.normal;if(this.options.gfm){if(this.options.tables){this.rules=e.tables}else{this.rules=e.gfm}}}t.rules=e;t.lex=function(e,n){var i=new t(n);return i.lex(e)};t.prototype.lex=function(e){e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(e,true)};t.prototype.token=function(t,n,i){var t=t.replace(/^ +$/gm,""),r,s,l,o,h,a,u,p,c;while(t){if(l=this.rules.newline.exec(t)){t=t.substring(l[0].length);if(l[0].length>1){this.tokens.push({type:"space"})}}if(l=this.rules.code.exec(t)){t=t.substring(l[0].length);l=l[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:!this.options.pedantic?l.replace(/\n+$/,""):l});continue}if(l=this.rules.fences.exec(t)){t=t.substring(l[0].length);this.tokens.push({type:"code",lang:l[2],text:l[3]});continue}if(l=this.rules.heading.exec(t)){t=t.substring(l[0].length);this.tokens.push({type:"heading",depth:l[1].length,text:l[2]});continue}if(n&&(l=this.rules.nptable.exec(t))){t=t.substring(l[0].length);a={type:"table",header:l[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:l[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:l[3].replace(/\n$/,"").split("\n")};for(p=0;p<a.align.length;p++){if(/^ *-+: *$/.test(a.align[p])){a.align[p]="right"}else if(/^ *:-+: *$/.test(a.align[p])){a.align[p]="center"}else if(/^ *:-+ *$/.test(a.align[p])){a.align[p]="left"}else{a.align[p]=null}}for(p=0;p<a.cells.length;p++){a.cells[p]=a.cells[p].split(/ *\| */)}this.tokens.push(a);continue}if(l=this.rules.lheading.exec(t)){t=t.substring(l[0].length);this.tokens.push({type:"heading",depth:l[2]==="="?1:2,text:l[1]});continue}if(l=this.rules.hr.exec(t)){t=t.substring(l[0].length);this.tokens.push({type:"hr"});continue}if(l=this.rules.blockquote.exec(t)){t=t.substring(l[0].length);this.tokens.push({type:"blockquote_start"});l=l[0].replace(/^ *> ?/gm,"");this.token(l,n,true);this.tokens.push({type:"blockquote_end"});continue}if(l=this.rules.list.exec(t)){t=t.substring(l[0].length);o=l[2];this.tokens.push({type:"list_start",ordered:o.length>1});l=l[0].match(this.rules.item);r=false;c=l.length;p=0;for(;p<c;p++){a=l[p];u=a.length;a=a.replace(/^ *([*+-]|\d+\.) +/,"");if(~a.indexOf("\n ")){u-=a.length;a=!this.options.pedantic?a.replace(new RegExp("^ {1,"+u+"}","gm"),""):a.replace(/^ {1,4}/gm,"")}if(this.options.smartLists&&p!==c-1){h=e.bullet.exec(l[p+1])[0];if(o!==h&&!(o.length>1&&h.length>1)){t=l.slice(p+1).join("\n")+t;p=c-1}}s=r||/\n\n(?!\s*$)/.test(a);if(p!==c-1){r=a.charAt(a.length-1)==="\n";if(!s)s=r}this.tokens.push({type:s?"loose_item_start":"list_item_start"});this.token(a,false,i);this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"});continue}if(l=this.rules.html.exec(t)){t=t.substring(l[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:l[1]==="pre"||l[1]==="script"||l[1]==="style",text:l[0]});continue}if(!i&&n&&(l=this.rules.def.exec(t))){t=t.substring(l[0].length);this.tokens.links[l[1].toLowerCase()]={href:l[2],title:l[3]};continue}if(n&&(l=this.rules.table.exec(t))){t=t.substring(l[0].length);a={type:"table",header:l[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:l[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:l[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(p=0;p<a.align.length;p++){if(/^ *-+: *$/.test(a.align[p])){a.align[p]="right"}else if(/^ *:-+: *$/.test(a.align[p])){a.align[p]="center"}else if(/^ *:-+ *$/.test(a.align[p])){a.align[p]="left"}else{a.align[p]=null}}for(p=0;p<a.cells.length;p++){a.cells[p]=a.cells[p].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this.tokens.push(a);continue}if(n&&(l=this.rules.paragraph.exec(t))){t=t.substring(l[0].length);this.tokens.push({type:"paragraph",text:l[1].charAt(l[1].length-1)==="\n"?l[1].slice(0,-1):l[1]});continue}if(l=this.rules.text.exec(t)){t=t.substring(l[0].length);this.tokens.push({type:"text",text:l[0]});continue}if(t){throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}}return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:a,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:a,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};n._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/;n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;n.link=h(n.link)("inside",n._inside)("href",n._href)();n.reflink=h(n.reflink)("inside",n._inside)();n.normal=u({},n);n.pedantic=u({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});n.gfm=u({},n.normal,{escape:h(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:h(n.text)("]|","~]|")("|","|https?://|")()});n.breaks=u({},n.gfm,{br:h(n.br)("{2,}","*")(),text:h(n.gfm.text)("{2,}","*")()});function i(e,t){this.options=t||p.defaults;this.links=e;this.rules=n.normal;this.renderer=this.options.renderer||new r;this.renderer.options=this.options;if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=n.breaks}else{this.rules=n.gfm}}else if(this.options.pedantic){this.rules=n.pedantic}}i.rules=n;i.output=function(e,t,n){var r=new i(t,n);return r.output(e)};i.prototype.output=function(e){var t="",n,i,r,s;while(e){if(s=this.rules.escape.exec(e)){e=e.substring(s[0].length);t+=s[1];continue}if(s=this.rules.autolink.exec(e)){e=e.substring(s[0].length);if(s[2]==="@"){i=s[1].charAt(6)===":"?this.mangle(s[1].substring(7)):this.mangle(s[1]);r=this.mangle("mailto:")+i}else{i=l(s[1]);r=i}t+=this.renderer.link(r,null,i);continue}if(!this.inLink&&(s=this.rules.url.exec(e))){e=e.substring(s[0].length);i=l(s[1]);r=i;t+=this.renderer.link(r,null,i);continue}if(s=this.rules.tag.exec(e)){if(!this.inLink&&/^<a /i.test(s[0])){this.inLink=true}else if(this.inLink&&/^<\/a>/i.test(s[0])){this.inLink=false}e=e.substring(s[0].length);t+=this.options.sanitize?l(s[0]):s[0];continue}if(s=this.rules.link.exec(e)){e=e.substring(s[0].length);this.inLink=true;t+=this.outputLink(s,{href:s[2],title:s[3]});this.inLink=false;continue}if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){e=e.substring(s[0].length);n=(s[2]||s[1]).replace(/\s+/g," ");n=this.links[n.toLowerCase()];if(!n||!n.href){t+=s[0].charAt(0);e=s[0].substring(1)+e;continue}this.inLink=true;t+=this.outputLink(s,n);this.inLink=false;continue}if(s=this.rules.strong.exec(e)){e=e.substring(s[0].length);t+=this.renderer.strong(this.output(s[2]||s[1]));continue}if(s=this.rules.em.exec(e)){e=e.substring(s[0].length);t+=this.renderer.em(this.output(s[2]||s[1]));continue}if(s=this.rules.code.exec(e)){e=e.substring(s[0].length);t+=this.renderer.codespan(l(s[2],true));continue}if(s=this.rules.br.exec(e)){e=e.substring(s[0].length);t+=this.renderer.br();continue}if(s=this.rules.del.exec(e)){e=e.substring(s[0].length);t+=this.renderer.del(this.output(s[1]));continue}if(s=this.rules.text.exec(e)){e=e.substring(s[0].length);t+=l(this.smartypants(s[0]));continue}if(e){throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}}return t};i.prototype.outputLink=function(e,t){var n=l(t.href),i=t.title?l(t.title):null;return e[0].charAt(0)!=="!"?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,l(e[1]))};i.prototype.smartypants=function(e){if(!this.options.smartypants)return e;return e.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")};i.prototype.mangle=function(e){var t="",n=e.length,i=0,r;for(;i<n;i++){r=e.charCodeAt(i);if(Math.random()>.5){r="x"+r.toString(16)}t+="&#"+r+";"}return t};function r(e){this.options=e||{}}r.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);if(i!=null&&i!==e){n=true;e=i}}if(!t){return"<pre><code>"+(n?e:l(e,true))+"\n</code></pre>"}return'<pre><code class="'+this.options.langPrefix+l(t,true)+'">'+(n?e:l(e,true))+"\n</code></pre>\n"};r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"};r.prototype.html=function(e){return e};r.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"};r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"};r.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"};r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"};r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"};r.prototype.table=function(e,t){return"<table>\n"+"<thead>\n"+e+"</thead>\n"+"<tbody>\n"+t+"</tbody>\n"+"</table>\n"};r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"};r.prototype.tablecell=function(e,t){var n=t.header?"th":"td";var i=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return i+e+"</"+n+">\n"};r.prototype.strong=function(e){return"<strong>"+e+"</strong>"};r.prototype.em=function(e){return"<em>"+e+"</em>"};r.prototype.codespan=function(e){return"<code>"+e+"</code>"};r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"};r.prototype.del=function(e){return"<del>"+e+"</del>"};r.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(o(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(r){return""}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0){return""}}var s='<a href="'+e+'"';if(t){s+=' title="'+t+'"'}s+=">"+n+"</a>";return s};r.prototype.image=function(e,t,n){var i='<img src="'+e+'" alt="'+n+'"';if(t){i+=' title="'+t+'"'}i+=this.options.xhtml?"/>":">";return i};function s(e){this.tokens=[];this.token=null;this.options=e||p.defaults;this.options.renderer=this.options.renderer||new r;this.renderer=this.options.renderer;this.renderer.options=this.options}s.parse=function(e,t,n){var i=new s(t,n);return i.parse(e)};s.prototype.parse=function(e){this.inline=new i(e.links,this.options,this.renderer);this.tokens=e.reverse();var t="";while(this.next()){t+=this.tok()}return t};s.prototype.next=function(){return this.token=this.tokens.pop()};s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};s.prototype.parseText=function(){var e=this.token.text;while(this.peek().type==="text"){e+="\n"+this.next().text}return this.inline.output(e)};s.prototype.tok=function(){switch(this.token.type){case"space":{return""}case"hr":{return this.renderer.hr()}case"heading":{return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text)}case"code":{return this.renderer.code(this.token.text,this.token.lang,this.token.escaped)}case"table":{var e="",t="",n,i,r,s,l;r="";for(n=0;n<this.token.header.length;n++){s={header:true,align:this.token.align[n]};r+=this.renderer.tablecell(this.inline.output(this.token.header[n]),{header:true,align:this.token.align[n]})}e+=this.renderer.tablerow(r);for(n=0;n<this.token.cells.length;n++){i=this.token.cells[n];r="";for(l=0;l<i.length;l++){r+=this.renderer.tablecell(this.inline.output(i[l]),{header:false,align:this.token.align[l]})}t+=this.renderer.tablerow(r)}return this.renderer.table(e,t)}case"blockquote_start":{var t="";while(this.next().type!=="blockquote_end"){t+=this.tok()}return this.renderer.blockquote(t)}case"list_start":{var t="",o=this.token.ordered;while(this.next().type!=="list_end"){t+=this.tok()}return this.renderer.list(t,o)}case"list_item_start":{var t="";while(this.next().type!=="list_item_end"){t+=this.token.type==="text"?this.parseText():this.tok()}return this.renderer.listitem(t)}case"loose_item_start":{var t="";while(this.next().type!=="list_item_end"){t+=this.tok()}return this.renderer.listitem(t)}case"html":{var h=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;return this.renderer.html(h)}case"paragraph":{return this.renderer.paragraph(this.inline.output(this.token.text))}case"text":{return this.renderer.paragraph(this.parseText())}}};function l(e,t){return e.replace(!t?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e){return e.replace(/&([#\w]+);/g,function(e,t){t=t.toLowerCase();if(t==="colon")return":";if(t.charAt(0)==="#"){return t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1))}return""})}function h(e,t){e=e.source;t=t||"";return function n(i,r){if(!i)return new RegExp(e,t);r=r.source||r;r=r.replace(/(^|[^\[])\^/g,"$1");e=e.replace(i,r);return n}}function a(){}a.exec=a;function u(e){var t=1,n,i;for(;t<arguments.length;t++){n=arguments[t];for(i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}return e}function p(e,n,i){if(i||typeof n==="function"){if(!i){i=n;n=null}n=u({},p.defaults,n||{});var r=n.highlight,o,h,a=0;try{o=t.lex(e,n)}catch(c){return i(c)}h=o.length;var g=function(e){if(e){n.highlight=r;return i(e)}var t;try{t=s.parse(o,n)}catch(l){e=l}n.highlight=r;return e?i(e):i(null,t)};if(!r||r.length<3){return g()}delete n.highlight;if(!h)return g();for(;a<o.length;a++){(function(e){if(e.type!=="code"){return--h||g()}return r(e.text,e.lang,function(t,n){if(t)return g(t);if(n==null||n===e.text){return--h||g()}e.text=n;e.escaped=true;--h||g()})})(o[a])}return}try{if(n)n=u({},p.defaults,n);return s.parse(t.lex(e,n),n)}catch(c){c.message+="\nPlease report this to https://github.com/chjj/marked.";if((n||p.defaults).silent){return"<p>An error occured:</p><pre>"+l(c.message+"",true)+"</pre>"}throw c}}p.options=p.setOptions=function(e){u(p.defaults,e);return p};p.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,smartLists:false,silent:false,highlight:null,langPrefix:"lang-",smartypants:false,headerPrefix:"",renderer:new r,xhtml:false};p.Parser=s;p.parser=s.parse;p.Renderer=r;p.Lexer=t;p.lexer=t.lex;p.InlineLexer=i;p.inlineLexer=i.output;p.parse=p;if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=p}else if(typeof define==="function"&&define.amd){define(function(){return p})}else{this.marked=p}}).call(function(){return this||(typeof window!=="undefined"?window:global)}());